{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/help_edit_train.png","webpack:///./src/components/TrainInfoEditor.vue?aebd","webpack:///./src/assets/help_select_train.png","webpack:///./src/components/DiagramView.vue?a0d0","webpack:///./src/App.vue?c650","webpack:///./src/assets/help_tips.png","webpack:///./src/components/HelpView.vue?0696","webpack:///./src/assets/help_edit_time.png","webpack:///./src/assets/diafreaks_logo.png","webpack:///./src/assets/help_add_new_train.png","webpack:///./src/assets/help_add_new_station.png","webpack:///./src/App.vue?8431","webpack:///./src/HistoryManager.ts","webpack:///./src/data/DiagramConfig.ts","webpack:///./src/data/Track.ts","webpack:///./src/data/Station.ts","webpack:///./src/data/StopEvent.ts","webpack:///./src/data/Train.ts","webpack:///./src/data/Diagram.ts","webpack:///./src/data/ViewConfig.ts","webpack:///./src/data/ViewState.ts","webpack:///./src/data/DiagramViewContext.ts","webpack:///./src/components/DiagramView.vue?8553","webpack:///./src/components/Stage.vue?ca3f","webpack:///./src/components/BackLayer.vue?10e4","webpack:///./src/components/StationGroup.vue?a2a8","webpack:///./src/components/TrackGroup.vue?20e9","webpack:///./src/components/TrackGroup.vue","webpack:///./src/components/TrackGroup.vue?80ea","webpack:///./src/components/TrackGroup.vue?a194","webpack:///./src/components/StationGroup.vue","webpack:///./src/components/StationGroup.vue?f322","webpack:///./src/components/StationGroup.vue?1b58","webpack:///./src/components/BackLayer.vue","webpack:///./src/components/BackLayer.vue?3b1f","webpack:///./src/components/BackLayer.vue?c43c","webpack:///./src/components/Pointer.vue?ee9a","webpack:///./src/utils.ts","webpack:///./src/components/Pointer.vue","webpack:///./src/components/Pointer.vue?63e5","webpack:///./src/components/Pointer.vue?a4a9","webpack:///./src/components/TrainPathLayer.vue?d8ab","webpack:///./src/components/TrainPathGroup.vue?aa05","webpack:///./src/components/TrainPathMarker.vue?de71","webpack:///./src/components/TrainPathMarker.vue","webpack:///./src/components/TrainPathMarker.vue?ce7d","webpack:///./src/components/TrainPathMarker.vue?a47c","webpack:///./src/components/TrainPathGroup.vue","webpack:///./src/components/TrainPathGroup.vue?c604","webpack:///./src/components/TrainPathGroup.vue?fe26","webpack:///./src/components/TrainPathLayer.vue","webpack:///./src/components/TrainPathLayer.vue?75af","webpack:///./src/components/TrainPathLayer.vue?44a2","webpack:///./src/components/Stage.vue","webpack:///./src/components/Stage.vue?091d","webpack:///./src/components/Stage.vue?d206","webpack:///./src/components/StationAddTrackButton.vue?f53f","webpack:///./src/components/StationAddTrackButton.vue","webpack:///./src/components/StationAddTrackButton.vue?f328","webpack:///./src/components/StationAddTrackButton.vue?b738","webpack:///./src/components/StationExpandButton.vue?440d","webpack:///./src/components/StationExpandButton.vue","webpack:///./src/components/StationExpandButton.vue?8892","webpack:///./src/components/StationExpandButton.vue?e10d","webpack:///./src/components/StationNameInput.vue?2c4d","webpack:///./src/components/StationNameInput.vue","webpack:///./src/components/StationNameInput.vue?fcac","webpack:///./src/components/StationNameInput.vue?9ce9","webpack:///./src/components/StationRemoveButton.vue?8823","webpack:///./src/components/StationRemoveButton.vue","webpack:///./src/components/StationRemoveButton.vue?6092","webpack:///./src/components/StationRemoveButton.vue?7287","webpack:///./src/components/StationRemoveTrackButton.vue?95aa","webpack:///./src/components/StationRemoveTrackButton.vue","webpack:///./src/components/StationRemoveTrackButton.vue?2de7","webpack:///./src/components/StationRemoveTrackButton.vue?c700","webpack:///./src/components/TrackNameInput.vue?2fbd","webpack:///./src/components/TrackNameInput.vue","webpack:///./src/components/TrackNameInput.vue?2a59","webpack:///./src/components/TrackNameInput.vue?4243","webpack:///./src/components/TrainInfoEditor.vue?e5fd","webpack:///./src/components/TrainInfoEditor.vue","webpack:///./src/components/TrainInfoEditor.vue?a5a9","webpack:///./src/components/TrainInfoEditor.vue?53e3","webpack:///./src/components/DiagramView.vue","webpack:///./src/components/DiagramView.vue?0f5f","webpack:///./src/components/DiagramView.vue?613b","webpack:///./src/components/HelpView.vue?b067","webpack:///./src/components/HelpView.vue","webpack:///./src/components/HelpView.vue?dc1e","webpack:///./src/components/HelpView.vue?c2ea","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/messages.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","context","subView","_e","_m","staticClass","$t","class","state","editMode","on","onEditButtonClick","history","undoable","onUndoButtonClick","redoable","onRedoButtonClick","keys","diagram","trains","onVanishButtonClick","onUploadButtonClick","onDownloadButtonClick","onHelpButtonClick","staticRenderFns","staticStyle","capacity","undos","redos","elem","pop","undo","redo","minimumTimeUnit","minPlotTime","maxPlotTime","leftPaneWidth","scrollTime","scrollRelY","xScale","yScale","dc","DiagramConfig","assign","fromEntries","filter","undefined","map","station","id","relY","Track","mileage","expanded","topRelY","bottomRelY","tracks","track","index","Math","max","indexOf","e","Array","isArray","Station","fromJSON","train","time","privateId","StopEvent","maxPrivateId","stevs","stations","stationId","trackId","arrTime","a","depTime","find","color","lineWidth","stev","stevRange","inRange","from","to","nodes","prev","phase","next","stops","lastStop","w","Train","flatMap","fromJSONStop","forEach","config","values","sort","b","set","delete","Diagram","fontFamily","topPaneHeight","hourlyLabelBottomMargin","hourlyLabelFontSize","hourlyLabelColor","hourlyGridLineWidth","hourlyGridLineColor","majorMinutelyGridLineSpan","majorMinutelyGridLineWidth","majorMinutelyGridLineColor","minorMinutelyGridLineSpan","minorMinutelyGridLineWidth","minorMinutelyGridLineColor","stationLabelLeftMargin","stationLabelRightMargin","stationLabelFontSize","stationLabelColor","stationLineWidth","stationLineColor","plotPanePadding","trackLabelLeftMargin","trackLabelFontSize","trackLabelColor","trackLineSpan","trackLineWidth","trackLineColor","trainPathWidth","trainPathColor","trainNameLabelLineHeight","trainNameLabelFontSize","minHitWidth","pointerWidth","pointerColor","pointerLabelFontSize","pointerPrecisePixelPerTimeUnit","selectedTrackLabelColor","selectedTrackLineColor","selectedTrainPathColor","selectedTrainPathWidthScale","selectedTrainPathMarkerWidth","selectedTrainPathMarkerColor","unselectedTrainPathOpacity","markerLabelMaxDistance","markerLabelColor","markerLabelFontSize","markerLabelLineHeight","wheelScale","viewWidth","viewHeight","gScale","trainSelections","pointerScreenX","pointerTime","pointerY","pointerTargetTrainPath","pointerTargetLine","pointerPreciseState","drawingState","trainPathDragState","stationNameInputTarget","trackNameInputTarget","trainInfoEditorTarget","controlKeyPressed","inputEnabled","maxRelY","sqrt","subScale","y","xPhysScale","x","state0","updateY","getStationsInMileageOrder","initialMileage","lastMileage","yPhysScale","min","onStationNameInputStart","onTrackNameInputStart","onTrainInfoEditStart","onTrainInfoEditEnd","ref","_l","stageConfig","onStageMouseDown","onStageMouseMove","onStageClick","onStageDoubleClick","onStageMouseWheel","onContextMenu","onTouchEnd","_g","$listeners","lineConfig","labelConfig","topLineConfig","labelRectConfig","onStationLabelClick","onStationLabelMouseDown","isBottomLineIntersectingPlotPane","bottomLineConfig","onLabelClick","onLabelMouseDown","dragState","points","viewConfig","getYByRelY","viewState","stroke","strokeWidth","listening","width","height","text","fontSize","fill","align","verticalAlign","busy","dragging","$emit","konvaEvent","sy0","evt","screenY","index0","addEventListener","onWindowMouseMove","onWindowMouseUp","event","abs","removeTrack","mouseRelY","getRelYByY","clientY","newIndex","findIndex","removeEventListener","index1","addNewTrack","component","widthForChars","stationName","charSpan","mileage0","mileage1","components","TrackGroup","lines","scrollLeftTime","ceil","getXByTime","StationGroup","rectConfig","getTimeText","forceSec","hStr","floor","mmStr","padStart","ssStr","canvas","document","createElement","ctx","getContext","getTextWidth","font","measureText","layerConfig","trainNameLabelConfig","onTrainNameLabelClick","regularTrainPathConfig","onTrainPathClick","onTrainPathMouseMove","onTrainPathTap","selectedTrainPathConfig","onSelectedTrainPathClick","onSelectedTrainPathDoubleClick","onSelectedTrainPathMouseDown","onSelectedTrainPathMouseMove","onMarkerClick","onMarkerMouseDown","$event","trainPathNode","onRectMouseMove","onRectDoubleClick","labelPosition","getLabelPosition","thisStev","prevStev","nextStev","thisRelY","prevRelY","lastStev","direction","stableEnd","floating","sel","visible","trainNameLabelText","trainNameLabelRect","physFontSize","physLineHeight","textWidth","targets","selectedTrainPathNodes","regularTrainPathNodes","firstNodeRunning","segDYToDX","NaN","forwardNode","dx","dy","dy2dx","sign","Infinity","isNaN","hypot","rotation","segDXToD","segDYToD","atan","PI","opacity","hitStrokeWidth","getTrainPathNodes","dragTarget","node","timeShift","nInRange","target","currentTarget","shiftKey","$set","getPointedStevRange","clientX","clickedStopRange","changeTrainSelections","clickedStevRange","clickSelected","selectedStevRange","selStart","selEnd","changed","$delete","leftX","rightX","topY","bottomY","targetTime","nearestStation","getNearestStation","nearestStev","getNearestStopEvent","newStev","addNewStopEvent","minSta","minDist","minStop","minTimeShift","maxTimeShift","changeTrackTargets","firstNode","t0","y0","sx0","screenX","track0","changeTimeTargets","targetStation","mouseTrack","track1","newTrains","srcTrain","srcStevs","getStopEventsInRange","newTrain","addNewTrain","srcStev","removeTrain","TrainPathMarker","clip","TrainPathGroup","stageDragState","pinchState","onKeyDown","onKeyUp","hammer","$el","DIRECTION_ALL","enable","onPanStart","onPanMove","onPanEnd","onPinchStart","onPinchMove","onPinchEnd","dUnit","round","getTimeByX","findPointerTargetLine","removeStopEvent","targetTrack","stationPointedOnTop","stationsInMileageOrder","stationPointedOnBottom","pointedTrack","button","triple","newLastStev","setGlobalScale","ctrlKey","startsWith","stableIndex","addedStevs","concat","targetLine","prevSta","reverse","addNewStation","startDrag","moveDrag","pointerType","center","scrollTime0","scrollRelY0","x0","truncateScrollPosition","f","pow","deltaY","preventDefault","lastScale","scale","cx","cy","pointedTime","pointedUnscaledRelY","repeat","deletingTrains","deletingStevs","fromIndex","toIndex","size","BackLayer","Pointer","TrainPathLayer","style","nativeOn","onClick","left","top","newTrack","icon","directives","rawName","expression","domProps","type","_k","keyCode","onComplete","paddingTop","lineHeight","border","name0","name1","isTopLineIntersectingPlotPane","removingTrains","removingStevs","isLineIntersectingPlotPane","trackIndex","targetTrain","onBlur","background","onColorPickerTriggerClick","onLineWidthPickerTriggerClick","getDispLineWidthByValue","onColorPickerClick","onLineWidthPickerClick","pickerMode","$refs","trainInfoEditorBox","clientHeight","trainInfoEditorBoxTop","colorPickerTrigger","offsetLeft","lineWidthPickerTrigger","lineWidthPickerValues","disp","trainNameInput","color0","lineWidth0","resizeObserver","ResizeObserver","updateViewSize","observe","$nextTick","stationNameInput","focus","trackNameInput","trainInfoEditor","clientWidth","default","Stage","StationAddTrackButton","StationExpandButton","StationNameInput","StationRemoveButton","StationRemoveTrackButton","TrackNameInput","TrainInfoEditor","_s","diagramFileName","enableSwitchEditMode","screen","fetch","then","json","setDiagram","input","accept","onchange","reader","FileReader","files","file","readAsText","onload","JSON","parse","clear","$buefy","notification","open","message","toString","click","stringify","blob","Blob","url","URL","createObjectURL","href","download","DiagramView","HelpView","ja","failedToLoadJSON","editButtonTooltip","undoButtonTooltip","redoButtonTooltip","vanishTrainsButtonTooltip","vanishStationsButtonTooltip","uploadButtonTooltip","downloadButtonTooltip","helpButtonTooltip","help","addNewStationTitle","addNewStationBody","addNewTrainTitle","addNewTrainBody","selectTrainTitle","selectTrainBody","editTrainTitle","editTrainBody","editTimeTitle","editTimeBody","tipsTitle","tipsBody","contactTitle","contactBody","productionTip","use","defaultNotificationDuration","defaultNotificationPosition","i18n","locale","messages","render","h","$mount"],"mappings":"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","file":"js/app.a2ad6d9e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/help_edit_train.67395182.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainInfoEditor.vue?vue&type=style&index=0&id=29c65084&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/help_select_train.6cd1d819.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=style&index=0&id=1d818f47&lang=scss&scoped=true&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/help_tips.12f4142e.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpView.vue?vue&type=style&index=0&id=6afc7d96&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/help_edit_time.25aa545d.png\";","module.exports = __webpack_public_path__ + \"img/diafreaks_logo.8b0abdc8.png\";","module.exports = __webpack_public_path__ + \"img/help_add_new_train.0fab88c8.png\";","module.exports = __webpack_public_path__ + \"img/help_add_new_station.d55b6e32.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('diagram-view',{attrs:{\"id\":\"diagram-view\",\"context\":_vm.context}}),(_vm.subView == 'help')?_c('help-view',{attrs:{\"id\":\"help-pane\"}}):_vm._e(),_c('div',{attrs:{\"id\":\"nav-pane\"}},[_vm._m(0),_c('span',{attrs:{\"id\":\"nav-pane-buttons\"}},[_c('span',{attrs:{\"id\":\"nav-pane-buttons-left\"}},[(_vm.enableSwitchEditMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.editButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{class:_vm.context.state.editMode ? 'is-selected' : '',attrs:{\"icon-left\":\"pencil-outline\",\"size\":\"medium\"},on:{\"click\":_vm.onEditButtonClick}})],1)],1):_vm._e(),(_vm.context.state.editMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.undoButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"undo\",\"size\":\"medium\",\"disabled\":!_vm.context.history.undoable},on:{\"click\":_vm.onUndoButtonClick}})],1)],1):_vm._e(),(_vm.context.state.editMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.redoButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"redo\",\"size\":\"medium\",\"disabled\":!_vm.context.history.redoable},on:{\"click\":_vm.onRedoButtonClick}})],1)],1):_vm._e(),(_vm.context.state.editMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":Object.keys(_vm.context.diagram.trains).length > 0\n                ? _vm.$t('message.vanishTrainsButtonTooltip')\n                : _vm.$t('message.vanishStationsButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"vanish\",\"size\":\"medium\"},on:{\"click\":_vm.onVanishButtonClick}})],1)],1):_vm._e(),_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.uploadButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"upload\",\"size\":\"medium\"},on:{\"click\":_vm.onUploadButtonClick}})],1)],1),_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.downloadButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"download\",\"size\":\"medium\"},on:{\"click\":_vm.onDownloadButtonClick}})],1)],1)]),_c('span',{attrs:{\"id\":\"nav-pane-buttons-spacer\"}}),_c('span',{attrs:{\"id\":\"nav-pane-buttons-right\"}},[(_vm.enableSwitchEditMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.helpButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{class:_vm.subView == 'help' ? 'is-selected' : '',attrs:{\"icon-left\":\"help\",\"size\":\"medium\"},on:{\"click\":_vm.onHelpButtonClick}})],1)],1):_vm._e()])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"nav-pane-item\",attrs:{\"id\":\"nav-pane-logo\"}},[_c('img',{staticStyle:{\"height\":\"32px\"},attrs:{\"src\":require(\"@/assets/diafreaks_logo.png\")}})])}]\n\nexport { render, staticRenderFns }","interface HistoryElement {\n  this: unknown;\n  undo: () => void;\n  redo: () => void;\n}\n\nexport default class HistoryManager {\n  constructor(public capacity: number) {}\n  private undos: HistoryElement[] = [];\n  private redos: HistoryElement[] = [];\n\n  get undoable(): boolean {\n    return this.undos.length > 0;\n  }\n  get redoable(): boolean {\n    return this.redos.length > 0;\n  }\n\n  push(elem: HistoryElement): void {\n    if (this.undos.length >= this.capacity) {\n      this.undos.splice(0, this.undos.length - this.capacity + 1);\n    }\n    this.undos.push(elem);\n    this.redos.splice(0);\n  }\n\n  clear(): void {\n    this.undos.splice(0);\n    this.redos.splice(0);\n  }\n\n  undo(): void {\n    const elem = this.undos.pop();\n    if (elem) {\n      this.redos.push(elem);\n      elem.undo.apply(elem.this);\n    }\n  }\n\n  redo(): void {\n    const elem = this.redos.pop();\n    if (elem) {\n      this.undos.push(elem);\n      elem.redo.apply(elem.this);\n    }\n  }\n}\n","export default class DiagramConfig {\n  minimumTimeUnit = 5;\n  minPlotTime = 0;\n  maxPlotTime = 30 * 3600;\n  leftPaneWidth = 160;\n  scrollTime = 6 * 3600;\n  scrollRelY = 0;\n  xScale = 0.1;\n  yScale = 12;\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n  static fromJSON(o: any): DiagramConfig {\n    if (!(o && typeof o == \"object\")) {\n      throw \"Invalid JSON\";\n    }\n    const dc = new DiagramConfig();\n    Object.assign(\n      dc,\n      Object.fromEntries(\n        Object.keys(dc)\n          .filter((key) => o[key] !== undefined)\n          .map((key) => [key, o[key]])\n      )\n    );\n    return dc;\n  }\n}\n","import Station from \"./Station\";\n\nexport default class Track {\n  constructor(\n    public readonly station: Station,\n    public readonly id: number,\n    public name: string = \"\",\n    public relY = 0\n  ) {}\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n  static fromJSON(o: any, station: Station): Track {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    const name = o.name ?? o.n ?? \"\";\n    if (!(o && typeof o == \"object\" && o.id != null)) {\n      throw \"Invalid JSON @ Track\";\n    }\n    return new Track(station, o.id, name);\n  }\n\n  toJSON(): unknown {\n    return {\n      id: this.id,\n      n: this.name || undefined,\n    };\n  }\n}\n","import Track from \"./Track\";\n\nexport default class Station {\n  constructor(\n    public readonly id: number,\n    public name: string = \"\",\n    public mileage = 0,\n    public expanded = false,\n    public topRelY = 0,\n    public bottomRelY = 0\n  ) {}\n  tracks: Track[] = [new Track(this, 1)];\n\n  addNewTrack(track?: Track, index: number = this.tracks.length): Track {\n    if (!track) {\n      const id = Math.max(0, ...this.tracks.map((t) => t.id)) + 1;\n      track = new Track(this, id);\n    }\n    this.tracks.splice(index, 0, track);\n    return this.tracks[index];\n  }\n\n  removeTrack(t: Track): void {\n    const index = this.tracks.indexOf(t);\n    if (index >= 0) this.tracks.splice(index, 1);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n  static fromJSON(o: any): Station {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    const name = o.name ?? o.n ?? \"\";\n    const mileage = o.mileage ?? o.m ?? 0;\n    const expanded = !!(o.expanded ?? o.e);\n    const tracks = o.tracks ?? o.t;\n    if (!(o && typeof o == \"object\" && o.id != null && Array.isArray(tracks))) {\n      throw \"Invalid JSON @ Station\";\n    }\n    const station = new Station(o.id, name, mileage, expanded);\n    station.tracks = (tracks as any[]).map((t: any) =>\n      Track.fromJSON(t, station)\n    );\n    return station;\n  }\n\n  toJSON(): unknown {\n    return {\n      id: this.id,\n      n: this.name || undefined,\n      m: this.mileage,\n      t: this.tracks,\n      e: this.expanded ? 1 : undefined,\n    };\n  }\n}\n","import Station from \"./Station\";\nimport Track from \"./Track\";\nimport Train from \"./Train\";\n\ntype StationMap = { [id: number]: Station };\n\nexport default class StopEvent {\n  static maxPrivateId = 0;\n\n  constructor(\n    public readonly train: Train,\n    public track: Track,\n    public time: number\n  ) {}\n  readonly privateId: number = ++StopEvent.maxPrivateId;\n\n  get station(): Station {\n    return this.track.station;\n  }\n  get next(): StopEvent | undefined {\n    const index = this.train.stevs.indexOf(this);\n    return index >= 0 ? this.train.stevs[index + 1] : undefined;\n  }\n  get prev(): StopEvent | undefined {\n    const index = this.train.stevs.indexOf(this);\n    return index >= 0 ? this.train.stevs[index - 1] : undefined;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n  static fromJSONStop(o: any, train: Train, stations: StationMap): StopEvent[] {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    const stationId = o.stationId ?? o.s;\n    const trackId = o.trackId ?? o.t;\n    const arrTime = o.arrTime ?? o.a;\n    const depTime = o.depTime ?? o.d;\n    if (\n      !(\n        o &&\n        typeof o == \"object\" &&\n        stationId != null &&\n        trackId != null &&\n        arrTime != null &&\n        depTime != null\n      )\n    ) {\n      throw \"Invalid JSON @ Stop\";\n    }\n    const station = stations[stationId];\n    const track = station && station.tracks.find((t) => t.id == trackId);\n    if (!(station && track)) {\n      throw \"Invalid data @ Stop\";\n    }\n    return arrTime == depTime\n      ? [new StopEvent(train, track, arrTime)]\n      : [\n          new StopEvent(train, track, arrTime),\n          new StopEvent(train, track, depTime),\n        ];\n  }\n}\n\nexport interface StopEventRange {\n  from: StopEvent;\n  to: StopEvent;\n}\n","import Station from \"./Station\";\nimport StopEvent, { StopEventRange } from \"./StopEvent\";\nimport TrainPathNode from \"./TrainPathNode\";\n\nexport default class Train {\n  constructor(\n    public readonly id: number,\n    public name: string = \"\",\n    public color: string | null = null,\n    public lineWidth: number | null = null\n  ) {}\n  stevs: StopEvent[] = [];\n\n  addNewStopEvent(\n    stev: StopEvent,\n    index: number = this.stevs.length\n  ): StopEvent {\n    this.stevs.splice(index, 0, stev);\n    return this.stevs[index];\n  }\n\n  removeStopEvent(stev: StopEvent): void {\n    const index = this.stevs.indexOf(stev);\n    if (index >= 0) this.stevs.splice(index, 1);\n  }\n\n  getStopEventsInRange(stevRange: StopEventRange): StopEvent[] {\n    const result = [];\n    let inRange = false;\n    for (const stev of this.stevs) {\n      if (stev == stevRange.from) inRange = true;\n      if (inRange) result.push(stev);\n      if (stev == stevRange.to) inRange = false;\n    }\n    return result;\n  }\n\n  getTrainPathNodes(): TrainPathNode[] {\n    const nodes: TrainPathNode[] = [];\n    for (const stev of this.stevs) {\n      if (\n        stev.station.expanded &&\n        stev.prev &&\n        stev.prev.station != stev.station\n      ) {\n        nodes.push({\n          stev,\n          phase: \"arr\",\n          time: stev.time,\n          relY:\n            stev.prev.station.mileage < stev.station.mileage\n              ? stev.station.topRelY\n              : stev.station.bottomRelY,\n        });\n      }\n      nodes.push({\n        stev,\n        phase: \"track\",\n        time: stev.time,\n        relY: stev.track.relY,\n      });\n      if (\n        stev.station.expanded &&\n        stev.next &&\n        stev.next.station != stev.station\n      ) {\n        nodes.push({\n          stev,\n          phase: \"dep\",\n          time: stev.time,\n          relY:\n            stev.next.station.mileage < stev.station.mileage\n              ? stev.station.topRelY\n              : stev.station.bottomRelY,\n        });\n      }\n    }\n    return nodes;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n  static fromJSON(o: any, stations: { [id: number]: Station }): Train {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    const name = o.name ?? o.n ?? \"\";\n    const color = o.color ?? o.c;\n    const lineWidth = o.lineWidth ?? o.w;\n    const stops = o.stops ?? o.s;\n    if (!(o && typeof o == \"object\" && o.id != null && Array.isArray(stops))) {\n      throw \"Invalid JSON @ Train\";\n    }\n    const train = new Train(o.id, name, color, lineWidth);\n    (stops as any[])\n      .flatMap((s: any) => StopEvent.fromJSONStop(s, train, stations))\n      .forEach((stev) => train.stevs.push(stev));\n    return train;\n  }\n\n  toJSON(): unknown {\n    const stops: { s: number; t: number; a: number; d: number }[] = [];\n    for (const stev of this.stevs) {\n      const lastStop = stops[stops.length - 1];\n      if (lastStop && lastStop.t == stev.track.id && lastStop.a == lastStop.d) {\n        lastStop.d = stev.time;\n      } else {\n        stops.push({\n          s: stev.station.id,\n          t: stev.track.id,\n          a: stev.time,\n          d: stev.time,\n        });\n      }\n    }\n    return {\n      id: this.id,\n      n: this.name || undefined,\n      c: this.color ?? undefined,\n      w: this.lineWidth ?? undefined,\n      s: stops,\n    };\n  }\n}\n","import Vue from \"vue\";\nimport DiagramConfig from \"./DiagramConfig\";\nimport Station from \"./Station\";\nimport Train from \"./Train\";\n\nexport default class Diagram {\n  constructor(\n    public config: DiagramConfig,\n    public stations: { [id: number]: Station },\n    public trains: { [id: number]: Train }\n  ) {}\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n  static fromJSON(o: any): Diagram {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    if (\n      !(\n        o &&\n        typeof o == \"object\" &&\n        typeof o.stations == \"object\" &&\n        typeof o.trains == \"object\"\n      )\n    ) {\n      throw \"Invalid JSON\";\n    }\n    const config = DiagramConfig.fromJSON(o.config || {});\n    const stations: { [id: number]: Station } = Object.fromEntries(\n      Object.values(o.stations).map((s: any) => [s.id, Station.fromJSON(s)])\n    );\n    const trains: { [id: number]: Train } = Object.fromEntries(\n      Object.values(o.trains).map((t: any) => [\n        t.id,\n        Train.fromJSON(t, stations),\n      ])\n    );\n    const diagram = new Diagram(config, stations, trains);\n\n    return diagram;\n  }\n\n  getStationsInMileageOrder(): Station[] {\n    return Object.values(this.stations).sort((a, b) => a.mileage - b.mileage);\n  }\n\n  addNewStation(station?: Station): Station {\n    if (!station) {\n      const id =\n        Math.max(0, ...Object.values(this.stations).map((s) => s.id)) + 1;\n      station = new Station(id);\n    }\n    return Vue.set(this.stations, station.id, station);\n  }\n  removeStation(station: Station): void {\n    Vue.delete(this.stations, station.id);\n  }\n  addNewTrain(train?: Train): Train {\n    if (!train) {\n      const id =\n        Math.max(0, ...Object.values(this.trains).map((t) => t.id)) + 1;\n      train = new Train(id);\n    }\n    return Vue.set(this.trains, train.id, train);\n  }\n  removeTrain(train: Train): void {\n    Vue.delete(this.trains, train.id);\n  }\n\n  toJSON(): unknown {\n    return {\n      config: this.config,\n      stations: Object.values(this.stations),\n      trains: Object.values(this.trains),\n    };\n  }\n}\n","export default class ViewConfig {\n  fontFamily = \"Verdana, sans-serif\";\n  topPaneHeight = 30;\n  hourlyLabelBottomMargin = 4;\n  hourlyLabelFontSize = 14;\n  hourlyLabelColor = \"rgb(128, 192, 128)\";\n  hourlyGridLineWidth = 2.25;\n  hourlyGridLineColor = \"rgb(128, 192, 128)\";\n  majorMinutelyGridLineSpan = 10 * 60;\n  majorMinutelyGridLineWidth = 1.5;\n  majorMinutelyGridLineColor = \"rgb(128, 192, 128)\";\n  minorMinutelyGridLineSpan = 2 * 60;\n  minorMinutelyGridLineWidth = 0.75;\n  minorMinutelyGridLineColor = \"rgb(128, 192, 128)\";\n  stationLabelLeftMargin = 14;\n  stationLabelRightMargin = 14;\n  stationLabelFontSize = 14;\n  stationLabelColor = \"rgb(128, 192, 128)\";\n  stationLineWidth = 1;\n  stationLineColor = \"rgb(128, 192, 128)\";\n  plotPanePadding = 4;\n  trackLabelLeftMargin = 10;\n  trackLabelFontSize = 11;\n  trackLabelColor = \"rgb(128, 192, 128)\";\n  trackLineSpan = 12;\n  trackLineWidth = 0.75;\n  trackLineColor = \"rgb(128, 192, 128)\";\n  trainPathWidth = 1;\n  trainPathColor = \"rgb(0, 0, 0)\";\n  trainNameLabelLineHeight = 14;\n  trainNameLabelFontSize = 12;\n\n  minHitWidth = 3;\n  pointerWidth = 3;\n  pointerColor = \"rgb(0, 0, 0)\";\n  pointerLabelFontSize = 12;\n  pointerPrecisePixelPerTimeUnit = 5;\n  selectedTrackLabelColor = \"rgb(255, 0, 0)\";\n  selectedTrackLineColor = \"rgb(255, 0, 0)\";\n  selectedTrainPathColor = \"rgb(255, 0, 0)\";\n  selectedTrainPathWidthScale = 1.5;\n  selectedTrainPathMarkerWidth = 5;\n  selectedTrainPathMarkerColor = \"rgb(255, 0, 0)\";\n  unselectedTrainPathOpacity = 0.5;\n  markerLabelMaxDistance = 20;\n  markerLabelColor = \"rgb(255, 0, 0)\";\n  markerLabelFontSize = 12;\n  markerLabelLineHeight = 16;\n  wheelScale = 0.1;\n}\n","import Station from \"./Station\";\nimport StopEvent, { StopEventRange } from \"./StopEvent\";\nimport Track from \"./Track\";\nimport Train from \"./Train\";\nimport TrainSelection from \"./TrainSelection\";\n\nexport default class ViewState {\n  editMode = true;\n  viewWidth = 0;\n  viewHeight = 0;\n  gScale = 1;\n  trainSelections: { [trainId: number]: TrainSelection } = {};\n  pointerScreenX = 0;\n  pointerTime = 0;\n  pointerY = 0;\n  pointerTargetTrainPath: {\n    train: Train;\n    stevRange: StopEventRange;\n  } | null = null;\n  pointerTargetLine: {\n    station: Station;\n    track: Track | null;\n    relY: number;\n  } | null = null;\n  pointerPreciseState: { sx0: number; t0: number } | null = null;\n  drawingState: {\n    train: Train;\n    lastStev: StopEvent;\n    direction: number;\n    stableEnd: StopEvent | null;\n    floating: StopEvent | null;\n  } | null = null;\n  trainPathDragState: {\n    dragging: boolean;\n    targets: { [trainId: number]: TrainSelection };\n    timeShift: number;\n  } | null = null;\n  stationNameInputTarget: Station | null = null;\n  trackNameInputTarget: Track | null = null;\n  trainInfoEditorTarget: {\n    train: Train;\n    x: number;\n    y: number;\n    verticalAlign: \"top\" | \"bottom\";\n  } | null = null;\n  controlKeyPressed = false;\n\n  get busy(): boolean {\n    return (\n      this.drawingState != null ||\n      this.trainPathDragState != null ||\n      this.inputEnabled\n    );\n  }\n\n  get inputEnabled(): boolean {\n    return (\n      this.stationNameInputTarget != null ||\n      this.trackNameInputTarget != null ||\n      this.trainInfoEditorTarget != null\n    );\n  }\n}\n","import HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"./Diagram\";\nimport ViewConfig from \"./ViewConfig\";\nimport ViewState from \"./ViewState\";\n\nexport default class DiagramViewContext {\n  config: ViewConfig = new ViewConfig();\n  state: ViewState = new ViewState();\n  diagram: Diagram = Diagram.fromJSON({ stations: [], trains: [] });\n  history = new HistoryManager(100);\n\n  maxRelY = 0;\n\n  get xPhysScale(): number {\n    return this.state.gScale * this.diagram.config.xScale;\n  }\n  get yPhysScale(): number {\n    return this.state.gScale * this.diagram.config.yScale;\n  }\n  get subScale(): number {\n    return Math.sqrt(this.state.gScale);\n  }\n\n  getYByRelY(relY: number): number {\n    return (\n      relY -\n      this.diagram.config.scrollRelY +\n      this.config.plotPanePadding +\n      this.config.topPaneHeight * this.subScale\n    );\n  }\n  getRelYByY(y: number): number {\n    return (\n      y -\n      this.config.plotPanePadding -\n      this.config.topPaneHeight * this.subScale +\n      this.diagram.config.scrollRelY\n    );\n  }\n  getXByTime(time: number): number {\n    return (\n      (time - this.diagram.config.scrollTime) * this.xPhysScale +\n      this.diagram.config.leftPaneWidth * this.subScale\n    );\n  }\n  getTimeByX(x: number): number {\n    return (\n      (x - this.diagram.config.leftPaneWidth * this.subScale) /\n        this.xPhysScale +\n      this.diagram.config.scrollTime\n    );\n  }\n\n  setDiagram(diagram: Diagram): void {\n    const state0 = this.state;\n    this.state = new ViewState();\n    this.state.editMode = state0.editMode;\n    this.state.viewWidth = state0.viewWidth;\n    this.state.viewHeight = state0.viewHeight;\n\n    this.diagram = diagram;\n    this.updateY();\n  }\n\n  updateY(): void {\n    if (Object.keys(this.diagram.stations).length == 0) {\n      this.maxRelY = 0;\n      return;\n    }\n\n    const stations = this.diagram.getStationsInMileageOrder();\n\n    const initialMileage = stations[0].mileage;\n    for (const s of stations) {\n      s.mileage = s.mileage - initialMileage;\n    }\n\n    let y = 0;\n    let lastMileage = 0;\n    for (const s of stations) {\n      y += (s.mileage - lastMileage) * this.yPhysScale;\n      s.topRelY = y;\n      if (s.expanded) {\n        s.tracks.forEach((t, i) => {\n          t.relY = y + (i + 1) * this.config.trackLineSpan * this.subScale;\n        });\n        s.bottomRelY =\n          y + (s.tracks.length + 1) * this.config.trackLineSpan * this.subScale;\n        y += (s.tracks.length + 1) * this.config.trackLineSpan * this.subScale;\n      } else {\n        Object.values(s.tracks).forEach((t) => (t.relY = y));\n        s.bottomRelY = y;\n      }\n      lastMileage = s.mileage;\n    }\n\n    this.maxRelY = stations[stations.length - 1].bottomRelY;\n  }\n\n  truncateScrollPosition(): void {\n    this.diagram.config.scrollTime = Math.max(\n      this.diagram.config.minPlotTime -\n        this.config.plotPanePadding / this.xPhysScale,\n      Math.min(\n        this.diagram.config.maxPlotTime -\n          (this.state.viewWidth -\n            this.diagram.config.leftPaneWidth * this.subScale -\n            this.config.plotPanePadding) /\n            this.xPhysScale,\n        this.diagram.config.scrollTime\n      )\n    );\n    this.diagram.config.scrollRelY = Math.max(\n      0,\n      Math.min(\n        this.maxRelY -\n          (this.state.viewHeight -\n            this.config.plotPanePadding -\n            (this.config.topPaneHeight + this.config.trackLineSpan) *\n              this.subScale),\n        this.diagram.config.scrollRelY\n      )\n    );\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diagram-view\"},[_c('stage',{staticClass:\"diagram-view-stage\",on:{\"stationNameInputStart\":_vm.onStationNameInputStart,\"trackNameInputStart\":_vm.onTrackNameInputStart,\"trainInfoEditStart\":_vm.onTrainInfoEditStart,\"trainInfoEditEnd\":_vm.onTrainInfoEditEnd}}),_c('div',{staticClass:\"diagram-view-ui\"},[_c('station-name-input',{ref:\"stationNameInput\"}),_c('track-name-input',{ref:\"trackNameInput\"}),_c('train-info-editor',{ref:\"trainInfoEditor\"}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-expand-button',{key:(\"station-expand-button-\" + (s.id)),attrs:{\"station\":s},on:{\"trackNameInputStart\":_vm.onTrackNameInputStart}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-remove-button',{key:(\"station-remove-button-\" + (s.id)),attrs:{\"station\":s}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-add-track-button',{key:(\"station-add-track-button-\" + (s.id)),attrs:{\"station\":s},on:{\"trackNameInputStart\":_vm.onTrackNameInputStart}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _vm._l((s.tracks),function(t){return _c('station-remove-track-button',{key:(\"station-remove-track-button-\" + (s.id) + \"-\" + (t.id)),attrs:{\"station\":s,\"track\":t}})})})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.diagram)?_c('v-stage',{attrs:{\"config\":_vm.stageConfig},on:{\"mousedown\":_vm.onStageMouseDown,\"mousemove\":_vm.onStageMouseMove,\"click\":_vm.onStageClick,\"dblclick\":_vm.onStageDoubleClick,\"wheel\":_vm.onStageMouseWheel,\"contextmenu\":_vm.onContextMenu,\"touchend\":_vm.onTouchEnd}},[_c('back-layer',_vm._g({},_vm.$listeners)),_c('train-path-layer',_vm._g({},_vm.$listeners)),_c('v-layer',[_c('pointer')],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layer',{attrs:{\"id\":\"back-layer\"}},[_vm._l((_vm.timeGridLines),function(t){return _c('v-group',{key:t.key},[_c('v-line',{attrs:{\"config\":t.lineConfig}}),(t.labelConfig)?_c('v-text',{attrs:{\"config\":t.labelConfig}}):_vm._e()],1)}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-group',_vm._g({key:(\"station-\" + (s.id)),attrs:{\"station\":s}},_vm.$listeners))})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[(_vm.isTopLineIntersectingPlotPane)?_c('v-group',[_c('v-line',{attrs:{\"config\":_vm.topLineConfig}}),_vm._l((_vm.labelCharacters),function(c){return _c('v-text',{key:c.key,attrs:{\"config\":c}})}),_c('v-rect',{attrs:{\"config\":_vm.labelRectConfig},on:{\"click\":_vm.onStationLabelClick,\"mousedown\":_vm.onStationLabelMouseDown}})],2):_vm._e(),(_vm.station.expanded && _vm.isBottomLineIntersectingPlotPane)?_c('v-line',{attrs:{\"config\":_vm.bottomLineConfig}}):_vm._e(),(_vm.station.expanded)?_vm._l((_vm.station.tracks),function(t){return _c('track-group',_vm._g({key:(\"track-\" + (_vm.station.id) + \"-\" + (t.id)),attrs:{\"station\":_vm.station,\"track\":t}},_vm.$listeners))}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLineIntersectingPlotPane)?_c('v-group',[_c('v-line',{attrs:{\"config\":_vm.lineConfig}}),_c('v-text',{attrs:{\"config\":_vm.labelConfig},on:{\"click\":_vm.onLabelClick,\"mousedown\":_vm.onLabelMouseDown}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport Track from \"@/data/Track\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\n@Component\nexport default class TrackGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n  @Prop() private station!: Station;\n  @Prop() private track!: Track;\n\n  private dragState: { sy0: number; index0: number; dragging: boolean } | null =\n    null;\n\n  private get lineConfig(): unknown {\n    return {\n      points: [\n        (this.viewConfig.stationLabelLeftMargin +\n          this.viewConfig.trackLabelLeftMargin) *\n          this.context.subScale,\n        this.context.getYByRelY(this.track.relY),\n        this.viewState.viewWidth,\n        this.context.getYByRelY(this.track.relY),\n      ],\n      stroke: this.viewConfig.trackLineColor,\n      strokeWidth: this.viewConfig.trackLineWidth,\n      listening: false,\n    };\n  }\n\n  private get labelConfig(): unknown {\n    return {\n      id: `track-label-${this.station.id}-${this.track.id}`,\n      x:\n        (this.viewConfig.stationLabelLeftMargin +\n          this.viewConfig.trackLabelLeftMargin) *\n        this.context.subScale,\n      y:\n        this.context.getYByRelY(this.track.relY) -\n        this.viewConfig.trackLabelFontSize * this.context.subScale,\n      width:\n        (this.diagram.config.leftPaneWidth -\n          this.viewConfig.stationLabelLeftMargin -\n          this.viewConfig.trackLabelLeftMargin -\n          this.viewConfig.stationLabelRightMargin) *\n        this.context.subScale,\n      height: this.viewConfig.trackLabelFontSize * this.context.subScale,\n      text: this.track.name,\n      fontSize: this.viewConfig.trackLabelFontSize * this.context.subScale,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: this.viewConfig.trackLabelColor,\n      align: \"left\",\n      verticalAlign: \"bottom\",\n    };\n  }\n\n  private get isLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.track.relY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.track.relY) < this.viewState.viewHeight\n    );\n  }\n\n  private onLabelClick(): void {\n    if (\n      this.viewState.editMode &&\n      !this.viewState.busy &&\n      !this.dragState?.dragging\n    ) {\n      this.viewState.trackNameInputTarget = this.track;\n      this.$emit(\"trackNameInputStart\");\n    }\n  }\n\n  private onLabelMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewState.editMode) {\n      this.dragState = {\n        sy0: konvaEvent.evt.screenY,\n        index0: this.station.tracks.indexOf(this.track),\n        dragging: false,\n      };\n      window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    }\n  }\n\n  private onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState) {\n      if (Math.abs(event.screenY - this.dragState.sy0) > 1) {\n        this.dragState.dragging = true;\n      }\n      if (this.dragState.dragging) {\n        this.station.removeTrack(this.track);\n\n        const mouseRelY = this.context.getRelYByY(event.clientY);\n        const newIndex = this.station.tracks.findIndex(\n          (t) => mouseRelY < t.relY\n        );\n        if (newIndex < 0) {\n          this.station.tracks.push(this.track);\n        } else {\n          this.station.tracks.splice(newIndex, 0, this.track);\n        }\n        this.context.updateY();\n      }\n    }\n  }\n\n  private onWindowMouseUp(event: MouseEvent): void {\n    if (this.dragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      this.onWindowMouseMove(event);\n\n      const index0 = this.dragState.index0;\n      const index1 = this.station.tracks.indexOf(this.track);\n      if (index0 != index1) {\n        this.context.history.push({\n          this: this,\n          undo: () => {\n            this.station.removeTrack(this.track);\n            this.station.addNewTrack(this.track, index0);\n          },\n          redo: () => {\n            this.station.removeTrack(this.track);\n            this.station.addNewTrack(this.track, index1);\n          },\n        });\n      }\n\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrackGroup.vue?vue&type=template&id=bf3961c6&scoped=true&\"\nimport script from \"./TrackGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrackGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf3961c6\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport TrackGroup from \"./TrackGroup.vue\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\n@Component({\n  components: {\n    TrackGroup,\n  },\n})\nexport default class StationGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n  @Prop() private station!: Station;\n\n  private dragState: {\n    sy0: number;\n    mileage0: number;\n    dragging: boolean;\n  } | null = null;\n\n  private get topLineConfig(): unknown {\n    return {\n      points: [\n        0,\n        this.context.getYByRelY(this.station.topRelY),\n        this.viewState.viewWidth,\n        this.context.getYByRelY(this.station.topRelY),\n      ],\n      stroke: this.viewConfig.stationLineColor,\n      strokeWidth: this.viewConfig.stationLineWidth,\n      listening: false,\n    };\n  }\n\n  private get bottomLineConfig(): unknown {\n    return {\n      points: [\n        0,\n        this.context.getYByRelY(this.station.bottomRelY),\n        this.viewState.viewWidth,\n        this.context.getYByRelY(this.station.bottomRelY),\n      ],\n      stroke: this.viewConfig.stationLineColor,\n      strokeWidth: this.viewConfig.stationLineWidth,\n      listening: false,\n    };\n  }\n\n  private get labelRectConfig(): unknown {\n    return {\n      id: `station-label-${this.station.id}`,\n      x: this.viewConfig.stationLabelLeftMargin * this.context.subScale,\n      y:\n        this.context.getYByRelY(this.station.topRelY) -\n        this.viewConfig.stationLabelFontSize * this.context.subScale,\n      width:\n        (this.diagram.config.leftPaneWidth -\n          this.viewConfig.stationLabelLeftMargin -\n          this.viewConfig.stationLabelRightMargin) *\n        this.context.subScale,\n      height: this.viewConfig.stationLabelFontSize * this.context.subScale,\n    };\n  }\n\n  private get labelCharacters(): unknown {\n    const widthForChars =\n      this.diagram.config.leftPaneWidth -\n      this.viewConfig.stationLabelLeftMargin -\n      this.viewConfig.stationLabelRightMargin -\n      this.viewConfig.stationLabelFontSize;\n    const stationName = this.station.name;\n    const charSpan =\n      stationName.length > 1 ? widthForChars / (stationName.length - 1) : 0;\n    return Array.from(stationName).map((c, index) => {\n      return {\n        key: `station-label-${this.station.id}-${index}`,\n        x:\n          this.context.subScale *\n          (stationName.length > 1\n            ? this.viewConfig.stationLabelLeftMargin + index * charSpan\n            : this.viewConfig.stationLabelLeftMargin + widthForChars * 0.5),\n        y:\n          this.context.getYByRelY(this.station.topRelY) -\n          this.viewConfig.stationLabelFontSize * this.context.subScale,\n        height: this.viewConfig.stationLabelFontSize * this.context.subScale,\n        text: c,\n        fontSize: this.viewConfig.stationLabelFontSize * this.context.subScale,\n        fontFamily: this.viewConfig.fontFamily,\n        fill: this.viewConfig.stationLabelColor,\n        align: \"left\",\n        verticalAlign: \"bottom\",\n      };\n    });\n  }\n\n  private get isTopLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.station.topRelY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.station.topRelY) < this.viewState.viewHeight\n    );\n  }\n\n  private get isBottomLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.station.bottomRelY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.station.bottomRelY) <\n        this.viewState.viewHeight\n    );\n  }\n\n  private onStationLabelClick(): void {\n    if (\n      this.viewState.editMode &&\n      !this.viewState.busy &&\n      !this.dragState?.dragging\n    ) {\n      this.viewState.stationNameInputTarget = this.station;\n      this.$emit(\"stationNameInputStart\");\n    }\n  }\n\n  private onStationLabelMouseDown(\n    konvaEvent: KonvaEventObject<MouseEvent>\n  ): void {\n    if (this.viewState.editMode && !this.viewState.inputEnabled) {\n      this.dragState = {\n        sy0: konvaEvent.evt.screenY,\n        mileage0: this.station.mileage,\n        dragging: false,\n      };\n      window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    }\n  }\n\n  private onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState) {\n      if (Math.abs(event.screenY - this.dragState.sy0) > 1) {\n        this.dragState.dragging = true;\n      }\n      if (this.dragState.dragging) {\n        this.station.mileage =\n          this.dragState.mileage0 +\n          (event.screenY - this.dragState.sy0) / this.context.yPhysScale;\n        this.context.updateY();\n      }\n    }\n  }\n\n  private onWindowMouseUp(event: MouseEvent): void {\n    if (this.dragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      this.onWindowMouseMove(event);\n\n      if (this.dragState.dragging) {\n        const mileage0 = this.dragState.mileage0;\n        const mileage1 = this.station.mileage;\n        this.context.history.push({\n          this: this,\n          undo: () => {\n            this.station.mileage = mileage0;\n          },\n          redo: () => {\n            this.station.mileage = mileage1;\n          },\n        });\n      }\n\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationGroup.vue?vue&type=template&id=46478552&scoped=true&\"\nimport script from \"./StationGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46478552\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport StationGroup from \"./StationGroup.vue\";\n\n@Component({\n  components: {\n    StationGroup,\n  },\n})\nexport default class BackLayer extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  private get timeGridLines(): unknown {\n    const lines = [];\n    const scrollLeftTime = this.diagram.config.scrollTime;\n    let t =\n      Math.ceil(scrollLeftTime / this.viewConfig.minorMinutelyGridLineSpan) *\n      this.viewConfig.minorMinutelyGridLineSpan;\n    let x = this.context.getXByTime(t);\n    while (x < this.viewState.viewWidth) {\n      lines.push({\n        key: `time-grid-line-${lines.length}`,\n        lineConfig: {\n          points: [\n            x,\n            this.viewConfig.topPaneHeight * this.context.subScale,\n            x,\n            this.viewState.viewHeight,\n          ],\n          stroke:\n            t % 3600 == 0\n              ? this.viewConfig.hourlyGridLineColor\n              : t % this.viewConfig.majorMinutelyGridLineSpan == 0\n              ? this.viewConfig.majorMinutelyGridLineColor\n              : this.viewConfig.minorMinutelyGridLineColor,\n          strokeWidth:\n            t % 3600 == 0\n              ? this.viewConfig.hourlyGridLineWidth\n              : t % this.viewConfig.majorMinutelyGridLineSpan == 0\n              ? this.viewConfig.majorMinutelyGridLineWidth\n              : this.viewConfig.minorMinutelyGridLineWidth,\n          listening: false,\n        },\n        labelConfig:\n          t % 3600 != 0\n            ? null\n            : {\n                x:\n                  x -\n                  this.viewConfig.hourlyLabelFontSize * this.context.subScale,\n                y:\n                  (this.viewConfig.topPaneHeight -\n                    this.viewConfig.hourlyLabelBottomMargin -\n                    this.viewConfig.hourlyLabelFontSize) *\n                  this.context.subScale,\n                width:\n                  this.viewConfig.hourlyLabelFontSize *\n                  this.context.subScale *\n                  2,\n                height:\n                  this.viewConfig.hourlyLabelFontSize * this.context.subScale,\n                text: `${(t / 3600) % 24}`,\n                fontSize:\n                  this.viewConfig.hourlyLabelFontSize * this.context.subScale,\n                fontFamily: this.viewConfig.fontFamily,\n                fill: this.viewConfig.hourlyLabelColor,\n                align: \"center\",\n                verticalAlign: \"bottom\",\n              },\n      });\n      t += this.viewConfig.minorMinutelyGridLineSpan;\n      x = this.context.getXByTime(t);\n    }\n    return lines;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BackLayer.vue?vue&type=template&id=280e7eb1&scoped=true&\"\nimport script from \"./BackLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./BackLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"280e7eb1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.pointerEnabled)?_c('v-group',[_c('v-rect',{attrs:{\"config\":_vm.rectConfig}}),_c('v-text',{attrs:{\"config\":_vm.labelConfig}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getTimeText(time: number, forceSec?: boolean): string {\n  const hStr = `${Math.floor(time / 3600)}`;\n  const mmStr = `${Math.floor(time / 60) % 60}`.padStart(2, \"0\");\n  const ssStr = `${time % 60}`.padStart(2, \"0\");\n  return time % 60 != 0 || forceSec\n    ? `${hStr}:${mmStr}:${ssStr}`\n    : `${hStr}:${mmStr}`;\n}\n\nconst canvas = document.createElement(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\nexport function getTextWidth(\n  text: string,\n  fontFamily: string,\n  fontSize: number\n): number {\n  if (!ctx) return 0;\n  ctx.font = `${fontSize}px ${fontFamily}`;\n  return ctx.measureText(text).width;\n}\n","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport { getTimeText } from \"@/utils\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\n\n@Component\nexport default class TrainPathGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  private get pointerEnabled(): unknown {\n    return (\n      this.viewState.pointerTargetLine &&\n      !this.viewState.pointerTargetTrainPath &&\n      !this.viewState.trainPathDragState &&\n      !this.viewState.drawingState\n    );\n  }\n\n  private get rectConfig(): unknown {\n    const width =\n      this.context.subScale *\n      (this.viewState.drawingState\n        ? this.viewConfig.selectedTrainPathMarkerWidth\n        : this.viewConfig.pointerWidth);\n    return {\n      x: this.context.getXByTime(this.viewState.pointerTime) - width * 0.5,\n      y: this.viewState.pointerY - width * 0.5,\n      width: width,\n      height: width,\n      fill: this.viewConfig.pointerColor,\n      listening: false,\n    };\n  }\n\n  private get labelConfig(): unknown {\n    const time =\n      this.viewState.pointerTime >= 0\n        ? this.viewState.pointerTime\n        : this.viewState.pointerTime +\n          Math.ceil(-this.viewState.pointerTime / 3600) * 3600;\n    return {\n      x: this.context.getXByTime(this.viewState.pointerTime),\n      y:\n        this.viewState.pointerY -\n        this.viewConfig.pointerLabelFontSize * this.context.subScale,\n      height: this.viewConfig.pointerLabelFontSize * this.context.subScale,\n      text: getTimeText(time, this.viewState.pointerPreciseState != null),\n      fontSize: this.viewConfig.pointerLabelFontSize * this.context.subScale,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: this.viewConfig.pointerColor,\n      align: \"left\",\n      verticalAlign: \"bottom\",\n      listening: false,\n    };\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Pointer.vue?vue&type=template&id=336837b2&scoped=true&\"\nimport script from \"./Pointer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Pointer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"336837b2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layer',{ref:\"trainPathLayer\",attrs:{\"id\":\"train-path-layer\",\"config\":_vm.layerConfig}},[_vm._l((Object.values(_vm.diagram.trains).filter(\n      function (t) { return !_vm.viewState.trainSelections[t.id]; }\n    )),function(t){return _c('train-path-group',_vm._g({key:(\"train-\" + (t.id)),attrs:{\"train\":t}},_vm.$listeners))}),_vm._l((Object.values(_vm.diagram.trains).filter(\n      function (t) { return _vm.viewState.trainSelections[t.id]; }\n    )),function(t){return _c('train-path-group',_vm._g({key:(\"train-\" + (t.id)),attrs:{\"train\":t}},_vm.$listeners))})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-text',{ref:\"trainNameLabel\",attrs:{\"config\":_vm.trainNameLabelConfig},on:{\"click\":_vm.onTrainNameLabelClick}}),_c('v-line',{attrs:{\"config\":_vm.regularTrainPathConfig},on:{\"click\":_vm.onTrainPathClick,\"mousemove\":_vm.onTrainPathMouseMove,\"tap\":_vm.onTrainPathTap}}),(_vm.selectedTrainPathEnabled)?[_c('v-line',{attrs:{\"config\":_vm.selectedTrainPathConfig},on:{\"click\":_vm.onSelectedTrainPathClick,\"dblclick\":_vm.onSelectedTrainPathDoubleClick,\"mousedown\":_vm.onSelectedTrainPathMouseDown,\"mousemove\":_vm.onSelectedTrainPathMouseMove}}),_vm._l((_vm.selectedTrainPathNodes),function(n){return _c('train-path-marker',{key:(\"marker-\" + (_vm.train.id) + \"-\" + (n.stev.privateId) + \"-\" + (n.phase)),attrs:{\"trainPathNode\":n},on:{\"click\":_vm.onMarkerClick,\"mousedown\":_vm.onMarkerMouseDown}})})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-rect',{attrs:{\"config\":_vm.rectConfig},on:{\"click\":function($event){return _vm.$emit('click', $event, _vm.trainPathNode)},\"mousemove\":_vm.onRectMouseMove,\"mousedown\":function($event){return _vm.$emit('mousedown', $event, _vm.trainPathNode)},\"dblclick\":_vm.onRectDoubleClick}}),(_vm.labelEnabled)?_c('v-text',{attrs:{\"config\":_vm.labelConfig}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport { getTimeText } from \"@/utils\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport TrainPathNode from \"@/data/TrainPathNode\";\n\n@Component\nexport default class TrainPathMarker extends Vue {\n  @InjectReactive() context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n  @Prop() trainPathNode!: TrainPathNode;\n\n  get rectConfig(): unknown {\n    const width =\n      this.viewConfig.selectedTrainPathMarkerWidth * this.context.subScale;\n    return {\n      x: this.context.getXByTime(this.trainPathNode.time) - width * 0.5,\n      y: this.context.getYByRelY(this.trainPathNode.relY) - width * 0.5,\n      width: width,\n      height: width,\n      fill:\n        this.trainPathNode.stev.train.color || this.viewConfig.trainPathColor,\n    };\n  }\n\n  get labelEnabled(): boolean {\n    const n = this.trainPathNode;\n    return (\n      n.phase != \"track\" ||\n      !(\n        n.stev.station.expanded &&\n        ((n.stev.prev && n.stev.prev.station != n.stev.station) ||\n          (n.stev.next && n.stev.next.station != n.stev.station))\n      )\n    );\n  }\n\n  get labelConfig(): unknown {\n    const labelPosition = this.getLabelPosition();\n    return {\n      x:\n        this.context.getXByTime(this.trainPathNode.time) +\n        labelPosition.x -\n        this.viewConfig.markerLabelFontSize * this.context.subScale * 8,\n      y:\n        this.context.getYByRelY(this.trainPathNode.relY) +\n        labelPosition.y -\n        this.viewConfig.markerLabelLineHeight * this.context.subScale,\n      width: this.viewConfig.markerLabelFontSize * this.context.subScale * 8,\n      height: this.viewConfig.markerLabelLineHeight * this.context.subScale,\n      text: getTimeText(\n        this.trainPathNode.time,\n        this.viewState.pointerPreciseState != null && this.viewState.trainPathDragState != null\n      ),\n      fontSize: this.viewConfig.pointerLabelFontSize * this.context.subScale,\n      fontFamily: this.viewConfig.fontFamily,\n      fill:\n        this.trainPathNode.stev.train.color || this.viewConfig.trainPathColor,\n      align: \"right\",\n      verticalAlign: \"bottom\",\n      listening: false,\n    };\n  }\n\n  getLabelPosition(): { x: number; y: number } {\n    const thisStev = this.trainPathNode.stev;\n    const prevStev = thisStev.prev;\n    const nextStev = thisStev.next;\n    if (\n      prevStev &&\n      prevStev.track != thisStev.track &&\n      (this.trainPathNode.phase == \"arr\" || !nextStev || nextStev.track == thisStev.track)\n    ) {\n      const thisRelY =\n        prevStev.station.mileage < thisStev.station.mileage\n          ? thisStev.station.topRelY\n          : thisStev.station.bottomRelY;\n      const prevRelY =\n        prevStev.station.mileage < thisStev.station.mileage\n          ? prevStev.station.bottomRelY\n          : prevStev.station.topRelY;\n      const x =\n        thisRelY == prevRelY\n          ? 0\n          : (-this.viewConfig.markerLabelLineHeight *\n              ((thisStev.time - prevStev.time) * this.context.xPhysScale)) /\n            Math.abs(thisRelY - prevRelY);\n      return {\n        x: Math.max(x, -this.viewConfig.markerLabelMaxDistance),\n        y:\n          prevStev.station.mileage < thisStev.station.mileage\n            ? 0\n            : this.viewConfig.markerLabelLineHeight * this.context.subScale,\n      };\n    }\n\n    return {\n      x: 0,\n      y:\n        (nextStev && nextStev.station.mileage < thisStev.station.mileage) ||\n        (prevStev && prevStev.station.mileage > thisStev.station.mileage)\n          ? 0\n          : this.viewConfig.markerLabelLineHeight * this.context.subScale,\n    };\n  }\n\n  onRectMouseMove(): void {\n    this.viewState.pointerTargetTrainPath = {\n      train: this.trainPathNode.stev.train,\n      stevRange: { from: this.trainPathNode.stev, to: this.trainPathNode.stev },\n    };\n  }\n\n  onRectDoubleClick(): void {\n    if (this.viewState.editMode) {\n      if (!this.viewState.drawingState) {\n        const n = this.trainPathNode;\n        if (!n.stev.next || !n.stev.prev) {\n          this.viewState.drawingState = {\n            train: n.stev.train,\n            lastStev: n.stev,\n            direction: !n.stev.next && !n.stev.prev ? 0 : !n.stev.next ? 1 : -1,\n            stableEnd: n.stev,\n            floating: null,\n          };\n          this.viewState.trainSelections[n.stev.train.id].stevRange = null;\n        }\n      } else {\n        this.viewState.drawingState = null;\n        this.viewState.trainSelections = {};\n      }\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathMarker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathMarker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathMarker.vue?vue&type=template&id=32a39621&scoped=true&\"\nimport script from \"./TrainPathMarker.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathMarker.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32a39621\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport { getTextWidth } from \"@/utils\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent, { StopEventRange } from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\nimport TrainPathMarker from \"./TrainPathMarker.vue\";\nimport TrainPathNode from \"@/data/TrainPathNode\";\n\n@Component({\n  components: {\n    TrainPathMarker,\n  },\n})\nexport default class TrainPathGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  @Prop() private train!: Train;\n\n  dragState: {\n    t0: number;\n    y0: number;\n    sx0: number;\n    sy0: number;\n    track0: Track | null;\n    minTimeShift: number;\n    maxTimeShift: number;\n    changeTimeTargets: StopEvent[] | null;\n    changeTrackTargets: StopEvent[] | null;\n  } | null = null;\n\n  get trainNameLabelConfig(): unknown {\n    const sel = this.viewState.trainSelections[this.train.id];\n    return {\n      ref: `train-name-label-${this.train.id}`,\n      visible:\n        !this.viewState.trainInfoEditorTarget &&\n        (Object.keys(this.viewState.trainSelections).length == 0 ||\n          (!!sel && !this.viewState.controlKeyPressed)),\n      text: this.trainNameLabelText,\n      ...this.trainNameLabelRect,\n      fontSize: this.viewConfig.trainNameLabelFontSize * this.context.subScale,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: this.train.color || this.viewConfig.trainPathColor,\n    };\n  }\n\n  get trainNameLabelText(): string {\n    return this.train.name || `#${this.train.id}`;\n  }\n\n  get trainNameLabelRect(): {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    rotation: number;\n  } {\n    const text = this.trainNameLabelText;\n    const physFontSize =\n      this.viewConfig.trainNameLabelFontSize * this.context.subScale;\n    const physLineHeight =\n      this.viewConfig.trainNameLabelLineHeight * this.context.subScale;\n    const textWidth = getTextWidth(\n      text,\n      this.viewConfig.fontFamily,\n      physFontSize\n    );\n\n    const nodes =\n      this.viewState.trainPathDragState?.targets[this.train.id] &&\n      this.viewState.controlKeyPressed\n        ? this.selectedTrainPathNodes\n        : this.regularTrainPathNodes;\n    const firstNodeRunning =\n      nodes.find(\n        (n, i) =>\n          i < nodes.length - 1 && nodes[i + 1].stev.station != n.stev.station\n      ) ?? nodes[0];\n    let segDYToDX = NaN;\n    for (const forwardNode of nodes.slice(\n      nodes.indexOf(firstNodeRunning) + 1\n    )) {\n      const dx = forwardNode.x - firstNodeRunning.x;\n      const dy = forwardNode.y - firstNodeRunning.y;\n      const dy2dx = dx != 0 ? dy / dx : Math.sign(dy) * Infinity;\n      if (\n        isNaN(segDYToDX) ||\n        (Math.sign(dy2dx) == Math.sign(segDYToDX) &&\n          Math.abs(dy2dx) < Math.abs(segDYToDX))\n      ) {\n        segDYToDX = dy2dx;\n      }\n      if (Math.hypot(dx, dy) >= textWidth) break;\n    }\n\n    if (!isNaN(segDYToDX)) {\n      const segDXToD = Math.sqrt(1 / (1 + segDYToDX * segDYToDX));\n      const segDYToD = segDXToD != 0 ? segDXToD * segDYToDX : 1;\n      const x =\n        segDYToDX >= 0\n          ? segDYToD * physFontSize + firstNodeRunning.x\n          : -segDYToD * (physLineHeight - physFontSize) + firstNodeRunning.x;\n      const y =\n        segDYToDX >= 0\n          ? -segDXToD * physFontSize + firstNodeRunning.y\n          : segDXToD * (physLineHeight - physFontSize) + firstNodeRunning.y;\n      const rotation = (Math.atan(segDYToDX) / Math.PI) * 180;\n      return {\n        x,\n        y,\n        rotation,\n        width: textWidth,\n        height: physFontSize,\n      };\n    } else {\n      return {\n        x: firstNodeRunning.x,\n        y: firstNodeRunning.y,\n        rotation: 0,\n        width: textWidth,\n        height: physFontSize,\n      };\n    }\n  }\n\n  get regularTrainPathConfig(): unknown {\n    const strokeWidth = this.train.lineWidth ?? this.viewConfig.trainPathWidth;\n    return {\n      points: this.regularTrainPathNodes.flatMap((n) => [n.x, n.y]),\n      stroke: this.train.color || this.viewConfig.trainPathColor,\n      opacity:\n        Object.keys(this.viewState.trainSelections).length > 0\n          ? this.viewConfig.unselectedTrainPathOpacity\n          : 1,\n      strokeWidth,\n      hitStrokeWidth: Math.max(strokeWidth, this.viewConfig.minHitWidth * 2),\n    };\n  }\n\n  get regularTrainPathNodes(): (TrainPathNode & { x: number; y: number })[] {\n    const nodes = this.getTrainPathNodes();\n\n    const dragState = this.viewState.trainPathDragState;\n    const dragTarget = dragState?.targets[this.train.id];\n    if (dragState && dragTarget && !this.viewState.controlKeyPressed) {\n      let inRange = !dragTarget.stevRange;\n      for (const node of nodes) {\n        if (\n          node.stev == dragTarget.stevRange?.from ||\n          node.stev == dragTarget.stevRange?.to\n        )\n          inRange = true;\n        if (inRange) {\n          node.time += dragState.timeShift;\n          node.x = this.context.getXByTime(node.time);\n        }\n        if (node.stev == dragTarget.stevRange?.to) inRange = false;\n      }\n    }\n\n    return nodes;\n  }\n\n  get selectedTrainPathEnabled(): boolean {\n    return this.viewState.trainSelections[this.train.id] != null;\n  }\n\n  get selectedTrainPathConfig(): unknown {\n    const strokeWidth =\n      (this.train.lineWidth ?? this.viewConfig.trainPathWidth) +\n      (this.viewConfig.selectedTrainPathWidthScale - 1);\n    return {\n      points: this.selectedTrainPathNodes.flatMap((n) => [n.x, n.y]),\n      stroke: this.train.color || this.viewConfig.trainPathColor,\n      strokeWidth,\n      hitStrokeWidth: Math.max(strokeWidth, this.viewConfig.minHitWidth * 2),\n    };\n  }\n\n  get selectedTrainPathNodes(): (TrainPathNode & { x: number; y: number })[] {\n    const stevRange =\n      this.viewState.trainPathDragState?.targets[this.train.id]?.stevRange ??\n      this.viewState.trainSelections[this.train.id].stevRange;\n    let inRange = !stevRange;\n    const nodes = this.getTrainPathNodes().filter((n) => {\n      if (n.stev == stevRange?.from || n.stev == stevRange?.to) inRange = true;\n      const nInRange = inRange;\n      if (n.stev == stevRange?.to) inRange = false;\n      return nInRange;\n    });\n\n    if (this.viewState.trainPathDragState) {\n      for (const node of nodes) {\n        node.time += this.viewState.trainPathDragState.timeShift;\n        node.x = this.context.getXByTime(node.time);\n      }\n    }\n\n    return nodes;\n  }\n\n  getTrainPathNodes(): (TrainPathNode & { x: number; y: number })[] {\n    return this.train.getTrainPathNodes().map((n) => {\n      return {\n        ...n,\n        x: this.context.getXByTime(n.time),\n        y: this.context.getYByRelY(n.relY),\n      };\n    });\n  }\n\n  onTrainNameLabelClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      if (\n        this.viewState.editMode &&\n        this.viewState.trainSelections[this.train.id] &&\n        !this.viewState.trainSelections[this.train.id].stevRange\n      ) {\n        this.viewState.trainInfoEditorTarget = {\n          train: this.train,\n          x: this.trainNameLabelRect.x,\n          y: this.trainNameLabelRect.y,\n          verticalAlign:\n            this.trainNameLabelRect.rotation >= 0 ? \"top\" : \"bottom\",\n        };\n        this.$emit(\"trainInfoEditStart\");\n      } else {\n        if (!konvaEvent.evt.shiftKey) {\n          this.viewState.trainSelections = {};\n        }\n        this.$set(this.viewState.trainSelections, this.train.id, {\n          train: this.train,\n          stevRange: null,\n        });\n      }\n    }\n  }\n\n  onTrainPathMouseMove(): void {\n    this.viewState.pointerTargetTrainPath = null;\n  }\n\n  onSelectedTrainPathMouseMove(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    this.viewState.pointerTargetTrainPath = {\n      train: this.train,\n      stevRange: this.getPointedStevRange(\n        konvaEvent.evt.clientX,\n        konvaEvent.evt.clientY\n      ),\n    };\n  }\n\n  onTrainPathClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const clickedStopRange = this.getPointedStevRange(\n      konvaEvent.evt.clientX,\n      konvaEvent.evt.clientY\n    );\n    this.changeTrainSelections(konvaEvent, clickedStopRange, false);\n  }\n\n  onSelectedTrainPathClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const clickedStopRange = this.getPointedStevRange(\n      konvaEvent.evt.clientX,\n      konvaEvent.evt.clientY\n    );\n    this.changeTrainSelections(konvaEvent, clickedStopRange, true);\n  }\n\n  onMarkerClick(\n    konvaEvent: KonvaEventObject<MouseEvent>,\n    trainPathNode: TrainPathNode\n  ): void {\n    const clickedStevRange = {\n      from: trainPathNode.stev,\n      to: trainPathNode.stev,\n    };\n    this.changeTrainSelections(konvaEvent, clickedStevRange, true);\n  }\n\n  changeTrainSelections(\n    konvaEvent: KonvaEventObject<MouseEvent>,\n    clickedStevRange: StopEventRange,\n    clickSelected: boolean\n  ): void {\n    if (\n      !this.viewState.trainPathDragState?.dragging &&\n      !this.viewState.drawingState\n    ) {\n      const sel = this.viewState.trainSelections[this.train.id];\n\n      // Remove other trains if shift not pressed\n      if (!konvaEvent.evt.shiftKey) {\n        this.viewState.trainSelections = sel ? { [this.train.id]: sel } : {};\n      }\n\n      if (!sel) {\n        this.$set(this.viewState.trainSelections, this.train.id, {\n          train: this.train,\n          stevRange: null,\n        });\n      } else {\n        const selectedStevRange = sel.stevRange;\n        if (!selectedStevRange) {\n          sel.stevRange = clickedStevRange;\n        } else if (!konvaEvent.evt.shiftKey) {\n          sel.stevRange = clickSelected ? clickedStevRange : null;\n        } else {\n          let selStart = false,\n            selEnd = false,\n            changed = false;\n          for (const stev of this.train.stevs) {\n            if (!selStart && stev == clickedStevRange.from) {\n              selectedStevRange.from = clickedStevRange.from;\n              changed = true;\n            }\n            if (stev == selectedStevRange.from) selStart = true;\n            if (stev == selectedStevRange.to) selEnd = true;\n            if (selEnd && stev == clickedStevRange.to) {\n              selectedStevRange.to = clickedStevRange.to;\n              changed = true;\n            }\n          }\n          if (!changed) {\n            this.$delete(this.viewState.trainSelections, this.train.id);\n          }\n        }\n      }\n    }\n  }\n\n  onTrainPathTap(): void {\n    this.viewState.trainSelections = {\n      [this.train.id]: { train: this.train, stevRange: null },\n    };\n  }\n\n  getPointedStevRange(x: number, y: number): StopEventRange {\n    if (this.train.stevs.length <= 2) {\n      return {\n        from: this.train.stevs[0],\n        to: this.train.stevs[this.train.stevs.length - 1],\n      };\n    }\n\n    // TODO: more precise detection\n    for (let i = 0; i < this.train.stevs.length - 1; ++i) {\n      const thisStev = this.train.stevs[i];\n      const nextStev = this.train.stevs[i + 1];\n      const leftX =\n        this.context.getXByTime(thisStev.time) - this.viewConfig.minHitWidth;\n      const rightX =\n        this.context.getXByTime(nextStev.time) + this.viewConfig.minHitWidth;\n      const topY =\n        this.context.getYByRelY(\n          Math.min(thisStev.track.relY, nextStev.track.relY)\n        ) - this.viewConfig.minHitWidth;\n      const bottomY =\n        this.context.getYByRelY(\n          Math.max(thisStev.track.relY, nextStev.track.relY)\n        ) + this.viewConfig.minHitWidth;\n      if (leftX < x && x < rightX && topY < y && y < bottomY) {\n        return { from: thisStev, to: nextStev };\n      }\n    }\n    return {\n      from: this.train.stevs[0],\n      to: this.train.stevs[this.train.stevs.length - 1],\n    };\n  }\n\n  onSelectedTrainPathDoubleClick(\n    konvaEvent: KonvaEventObject<MouseEvent>\n  ): void {\n    if (this.viewState.editMode && !this.viewState.drawingState) {\n      const targetTime = this.viewState.pointerTime;\n      const nearestStation = this.getNearestStation(konvaEvent.evt.clientY);\n      const nearestStev = this.getNearestStopEvent(targetTime);\n      if (\n        !(\n          nearestStation == nearestStev.station &&\n          (nearestStev.prev?.track == nearestStev.track ||\n            nearestStev.next?.track == nearestStev.track)\n        )\n      ) {\n        const index = this.train.stevs.findIndex((s) => s.time > targetTime);\n        const newStev = this.train.addNewStopEvent(\n          new StopEvent(this.train, nearestStation.tracks[0], targetTime),\n          index\n        );\n        this.viewState.trainSelections = {\n          [this.train.id]: {\n            train: this.train,\n            stevRange: { from: newStev, to: newStev },\n          },\n        };\n      }\n    }\n  }\n\n  getNearestStation(y: number): Station {\n    const stations = this.diagram.getStationsInMileageOrder();\n    const relY = this.context.getRelYByY(y);\n    let minSta = stations[0];\n    let minDist = Math.abs(relY - minSta.bottomRelY);\n    for (const s of stations) {\n      if (Math.abs(relY - s.topRelY) < minDist) {\n        minSta = s;\n        minDist = Math.abs(relY - s.topRelY);\n      }\n      if (Math.abs(relY - s.bottomRelY) < minDist) {\n        minSta = s;\n        minDist = Math.abs(relY - s.bottomRelY);\n      }\n    }\n    return minSta;\n  }\n\n  getNearestStopEvent(time: number): StopEvent {\n    let minStop = this.train.stevs[0];\n    let minDist = Math.abs(time - minStop.time);\n    for (const s of this.train.stevs) {\n      if (Math.abs(time - s.time) < minDist) {\n        minStop = s;\n        minDist = Math.abs(time - s.time);\n      }\n    }\n    return minStop;\n  }\n\n  onSelectedTrainPathMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (!this.viewState.editMode) {\n      return;\n    }\n\n    let minTimeShift = -86400;\n    let maxTimeShift = 86400;\n    for (const sel of Object.values(this.viewState.trainSelections)) {\n      const stevRange = sel.stevRange;\n      if (stevRange) {\n        if (stevRange.from.prev) {\n          minTimeShift = Math.max(\n            minTimeShift,\n            stevRange.from.prev.time - stevRange.from.time\n          );\n        }\n        if (stevRange.to.next) {\n          maxTimeShift = Math.min(\n            maxTimeShift,\n            stevRange.to.next.time - stevRange.to.time\n          );\n        }\n      }\n    }\n\n    const clickedStevRange = this.getPointedStevRange(\n      konvaEvent.evt.clientX,\n      konvaEvent.evt.clientY\n    );\n    const changeTrackTargets =\n      clickedStevRange.from == clickedStevRange.to\n        ? [clickedStevRange.from]\n        : clickedStevRange.from.track == clickedStevRange.to.track\n        ? [clickedStevRange.from, clickedStevRange.to]\n        : null;\n\n    const firstNode = this.selectedTrainPathNodes[0];\n    this.dragState = {\n      t0: firstNode.time,\n      y0: this.context.getYByRelY(firstNode.relY),\n      sx0: konvaEvent.evt.screenX,\n      sy0: konvaEvent.evt.screenY,\n      track0: changeTrackTargets ? changeTrackTargets[0].track : null,\n      minTimeShift: minTimeShift,\n      maxTimeShift: maxTimeShift,\n      changeTimeTargets: null,\n      changeTrackTargets: changeTrackTargets ?? null,\n    };\n    this.viewState.trainPathDragState = {\n      dragging: false,\n      targets: this.viewState.trainSelections,\n      timeShift: 0,\n    };\n    if (this.viewState.pointerPreciseState) {\n      this.viewState.pointerPreciseState = {\n        sx0: this.viewState.pointerScreenX,\n        t0: firstNode.time,\n      }\n    }\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  onMarkerMouseDown(\n    konvaEvent: KonvaEventObject<MouseEvent>,\n    node: TrainPathNode\n  ): void {\n    if (!this.viewState.editMode) {\n      return;\n    }\n\n    this.dragState = {\n      t0: node.time,\n      y0: this.context.getYByRelY(node.relY),\n      track0: node.stev.track,\n      sx0: konvaEvent.evt.screenX,\n      sy0: konvaEvent.evt.screenY,\n      minTimeShift: node.stev.prev ? node.stev.prev.time - node.time : -86400,\n      maxTimeShift: node.stev.next ? node.stev.next.time - node.time : 86400,\n      changeTimeTargets: [node.stev],\n      changeTrackTargets: [node.stev],\n    };\n    this.viewState.trainPathDragState = {\n      dragging: false,\n      targets: {\n        [node.stev.train.id]: {\n          train: node.stev.train,\n          stevRange: { from: node.stev, to: node.stev },\n        },\n      },\n      timeShift: 0,\n    };\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState && this.viewState.trainPathDragState) {\n      if (\n        !this.viewState.trainPathDragState.dragging &&\n        Math.hypot(\n          event.clientX - this.dragState.sx0,\n          event.clientY - this.dragState.sy0\n        ) > 1\n      ) {\n        this.viewState.trainPathDragState.dragging = true;\n        this.viewState.pointerY = this.dragState.y0;\n      }\n      if (this.viewState.trainPathDragState.dragging) {\n        if (!this.viewState.pointerPreciseState) {\n          this.viewState.pointerTime =\n            this.dragState.t0 +\n            Math.floor(\n              (event.screenX - this.dragState.sx0) /\n                this.context.xPhysScale /\n                60\n            ) *\n              60;\n        }\n        this.viewState.trainPathDragState.timeShift = !this.viewState\n          .controlKeyPressed\n          ? Math.min(\n              this.dragState.maxTimeShift,\n              Math.max(\n                this.dragState.minTimeShift,\n                this.viewState.pointerTime - this.dragState.t0\n              )\n            )\n          : this.viewState.pointerTime - this.dragState.t0;\n        if (this.dragState.changeTrackTargets) {\n          const mouseRelY = this.context.getRelYByY(event.clientY);\n          const targetStation = this.dragState.changeTrackTargets[0].station;\n          const mouseTrack = targetStation.tracks.find(\n            (t) => Math.abs(t.relY - mouseRelY) < this.viewConfig.minHitWidth\n          );\n          if (mouseTrack) {\n            for (const stev of this.dragState.changeTrackTargets) {\n              stev.track = mouseTrack;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  onWindowMouseUp(): void {\n    if (this.dragState && this.viewState.trainPathDragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      if (this.viewState.trainPathDragState.dragging) {\n        if (this.dragState.changeTrackTargets && this.dragState.track0) {\n          const targets = this.dragState.changeTrackTargets;\n          const track0 = this.dragState.track0;\n          const track1 = this.dragState.changeTrackTargets[0].track;\n          if (track0 != track1) {\n            this.context.history.push({\n              this: this,\n              undo: () => {\n                targets.forEach((stev) => (stev.track = track0));\n              },\n              redo: () => {\n                targets.forEach((stev) => (stev.track = track1));\n              },\n            });\n          }\n        }\n\n        const timeShift = this.viewState.trainPathDragState.timeShift;\n        if (timeShift != 0) {\n          if (!this.viewState.controlKeyPressed) {\n            const targets =\n              this.dragState.changeTimeTargets ??\n              Object.values(this.viewState.trainSelections).flatMap((sel) => {\n                return sel.stevRange\n                  ? sel.train.getStopEventsInRange(sel.stevRange)\n                  : sel.train.stevs;\n              });\n            targets.forEach((stev) => (stev.time += timeShift));\n            this.context.history.push({\n              this: this,\n              undo: () => {\n                targets.forEach((stev) => (stev.time -= timeShift));\n              },\n              redo: () => {\n                targets.forEach((stev) => (stev.time += timeShift));\n              },\n            });\n          } else {\n            const newTrains = Object.values(\n              this.viewState.trainPathDragState.targets\n            ).map((sel) => {\n              const srcTrain = sel.train;\n              const srcStevs = sel.stevRange\n                ? srcTrain.getStopEventsInRange(sel.stevRange)\n                : srcTrain.stevs;\n              const newTrain = this.diagram.addNewTrain();\n              newTrain.color = srcTrain.color;\n              newTrain.lineWidth = srcTrain.lineWidth;\n              for (const srcStev of srcStevs) {\n                newTrain.addNewStopEvent(\n                  new StopEvent(\n                    newTrain,\n                    srcStev.track,\n                    srcStev.time + timeShift\n                  )\n                );\n              }\n              this.$delete(this.viewState.trainSelections, sel.train.id);\n              this.$set(this.viewState.trainSelections, newTrain.id, {\n                train: newTrain,\n                stevRange: null,\n              });\n              return newTrain;\n            });\n            this.context.history.push({\n              this: this,\n              undo: () => {\n                newTrains.forEach((train) => this.diagram.removeTrain(train));\n              },\n              redo: () => {\n                newTrains.forEach((train) => this.diagram.addNewTrain(train));\n              },\n            });\n          }\n        }\n      }\n      this.viewState.trainPathDragState = null;\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathGroup.vue?vue&type=template&id=cfc7fef6&scoped=true&\"\nimport script from \"./TrainPathGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cfc7fef6\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport TrainPathGroup from \"./TrainPathGroup.vue\";\n\n@Component({\n  components: {\n    TrainPathGroup,\n  },\n})\nexport default class BackLayer extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  // private mounted(): void {\n  //   const hitCanvas = (this.$refs.trainPathLayer as any).getNode().hitCanvas._canvas;\n  //   document.body.appendChild(hitCanvas);\n  // }\n\n  private get layerConfig(): unknown {\n    return {\n      clip: {\n        x: this.diagram.config.leftPaneWidth * this.context.subScale,\n        y: this.viewConfig.topPaneHeight * this.context.subScale,\n        width:\n          this.viewState.viewWidth -\n          this.diagram.config.leftPaneWidth * this.context.subScale,\n        height:\n          this.viewState.viewHeight -\n          this.viewConfig.topPaneHeight * this.context.subScale,\n      },\n    };\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathLayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathLayer.vue?vue&type=template&id=305d2457&scoped=true&\"\nimport script from \"./TrainPathLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"305d2457\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport Hammer from \"hammerjs\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\nimport BackLayer from \"./BackLayer.vue\";\nimport Pointer from \"./Pointer.vue\";\nimport TrainPathLayer from \"./TrainPathLayer.vue\";\n\n@Component({\n  components: {\n    BackLayer,\n    Pointer,\n    TrainPathLayer,\n  },\n})\nexport default class Stage extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  $el!: HTMLElement;\n\n  private stageDragState: {\n    scrollTime0: number;\n    scrollRelY0: number;\n    x0: number;\n    y0: number;\n    dragging: boolean;\n  } | null = null;\n  private pinchState: { lastScale: number } | null = null;\n\n  private get stageConfig(): unknown {\n    return {\n      width: this.viewState.viewWidth,\n      height: this.viewState.viewHeight,\n    };\n  }\n\n  private get stationsInMileageOrder(): Station[] {\n    return this.diagram.getStationsInMileageOrder();\n  }\n\n  private mounted(): void {\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n\n    const hammer = new Hammer(this.$el);\n    hammer.get(\"pan\").set({ direction: Hammer.DIRECTION_ALL });\n    hammer.get(\"pinch\").set({ enable: true });\n    hammer.on(\"panstart\", this.onPanStart);\n    hammer.on(\"panmove\", this.onPanMove);\n    hammer.on(\"panend\", this.onPanEnd);\n    hammer.on(\"pinchstart\", this.onPinchStart);\n    hammer.on(\"pinchmove\", this.onPinchMove);\n    hammer.on(\"pinchend\", this.onPinchEnd);\n  }\n\n  private unmounted(): void {\n    window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n  }\n\n  private onStageMouseMove(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const event = konvaEvent.evt;\n\n    // Update pointer state\n    this.viewState.pointerScreenX = event.screenX;\n    if (this.viewState.pointerPreciseState) {\n      const dUnit = Math.round(\n        (event.screenX - this.viewState.pointerPreciseState.sx0) /\n          this.viewConfig.pointerPrecisePixelPerTimeUnit\n      );\n      this.viewState.pointerTime =\n        dUnit * this.diagram.config.minimumTimeUnit +\n        this.viewState.pointerPreciseState.t0;\n    } else if (!this.viewState.trainPathDragState?.dragging) {\n      this.viewState.pointerTime =\n        Math.round(this.context.getTimeByX(event.clientX) / 60) * 60;\n      if (\n        event.clientX >=\n        this.diagram.config.leftPaneWidth * this.context.subScale\n      ) {\n        const pointerTargetLine = this.findPointerTargetLine(event.clientY);\n        if (pointerTargetLine) {\n          this.viewState.pointerTargetLine = pointerTargetLine ?? null;\n          this.viewState.pointerY = this.context.getYByRelY(\n            pointerTargetLine.relY\n          );\n        } else {\n          this.viewState.pointerTargetLine = null;\n        }\n      } else {\n        this.viewState.pointerTargetLine = null;\n      }\n    }\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      this.viewState.pointerTargetTrainPath = null;\n    }\n\n    // Update drawing floating\n    const drawingState = this.viewState.drawingState;\n    if (drawingState) {\n      if (drawingState.direction > 0) {\n        this.viewState.pointerTime = Math.max(\n          this.viewState.pointerTime,\n          drawingState.lastStev.time\n        );\n      } else if (drawingState.direction < 0) {\n        this.viewState.pointerTime = Math.min(\n          this.viewState.pointerTime,\n          drawingState.lastStev.time\n        );\n      }\n\n      if (drawingState.floating) {\n        drawingState.train.removeStopEvent(drawingState.floating);\n        drawingState.floating = null;\n      }\n\n      const pointerTargetLine =\n        event.clientX >=\n        this.diagram.config.leftPaneWidth * this.context.subScale\n          ? this.findPointerTargetLine(event.clientY)\n          : undefined;\n      if (pointerTargetLine) {\n        const targetTrack =\n          pointerTargetLine.track ?? pointerTargetLine.station.tracks[0];\n        const newStev = drawingState.train.addNewStopEvent(\n          new StopEvent(\n            drawingState.train,\n            targetTrack,\n            this.viewState.pointerTime\n          ),\n          drawingState.direction > 0 ||\n            (drawingState.direction == 0 &&\n              this.viewState.pointerTime >= drawingState.lastStev.time)\n            ? undefined\n            : 0\n        );\n        drawingState.floating = newStev;\n      }\n    }\n  }\n\n  private findPointerTargetLine(\n    y: number\n  ): { station: Station; track: Track | null; relY: number } | undefined {\n    const stationPointedOnTop = this.stationsInMileageOrder.find(\n      (s) =>\n        Math.abs(this.context.getYByRelY(s.topRelY) - y) <\n        Math.max(\n          this.viewConfig.stationLineWidth * 0.5,\n          this.viewConfig.minHitWidth\n        )\n    );\n    if (stationPointedOnTop) {\n      return {\n        station: stationPointedOnTop,\n        track: null,\n        relY: stationPointedOnTop.topRelY,\n      };\n    }\n\n    const stationPointedOnBottom = this.stationsInMileageOrder.find(\n      (s) =>\n        Math.abs(this.context.getYByRelY(s.bottomRelY) - y) <\n        Math.max(\n          this.viewConfig.stationLineWidth * 0.5,\n          this.viewConfig.minHitWidth\n        )\n    );\n    if (stationPointedOnBottom) {\n      return {\n        station: stationPointedOnBottom,\n        track: null,\n        relY: stationPointedOnBottom.bottomRelY,\n      };\n    }\n\n    const station = this.stationsInMileageOrder.find(\n      (s) =>\n        this.context.getYByRelY(s.topRelY) +\n          this.viewConfig.trackLineSpan -\n          Math.max(\n            this.viewConfig.trackLineWidth * 0.5,\n            this.viewConfig.minHitWidth\n          ) <\n          y &&\n        this.context.getYByRelY(s.bottomRelY) -\n          this.viewConfig.trackLineSpan +\n          Math.max(\n            this.viewConfig.trackLineWidth * 0.5,\n            this.viewConfig.minHitWidth\n          ) >\n          y\n    );\n    if (station) {\n      const pointedTrack = station.tracks.find(\n        (t) =>\n          Math.abs(this.context.getYByRelY(t.relY) - y) <\n          Math.max(\n            this.viewConfig.trackLineWidth * 0.5,\n            this.viewConfig.minHitWidth\n          )\n      );\n      if (pointedTrack) {\n        return { station, track: pointedTrack, relY: pointedTrack.relY };\n      }\n    }\n  }\n\n  private onStageClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const drawingState = this.viewState.drawingState;\n    if (drawingState) {\n      if (konvaEvent.evt.button == 0 && this.viewState.pointerTargetLine) {\n        if (drawingState.direction == 0) {\n          drawingState.direction =\n            this.viewState.pointerTime >= drawingState.lastStev.time ? 1 : -1;\n        }\n        if (drawingState.floating) {\n          const triple =\n            drawingState.floating.track == drawingState.lastStev.track &&\n            ((drawingState.direction > 0 &&\n              drawingState.lastStev.track ==\n                drawingState.lastStev.prev?.track) ||\n              (drawingState.direction < 0 &&\n                drawingState.lastStev.track ==\n                  drawingState.lastStev.next?.track));\n          if (triple) {\n            drawingState.lastStev.time = this.viewState.pointerTime;\n            drawingState.train.removeStopEvent(drawingState.floating);\n          } else {\n            drawingState.lastStev = drawingState.floating;\n          }\n          drawingState.floating = null;\n        }\n      }\n      if (konvaEvent.evt.button == 2) {\n        if (drawingState.lastStev == drawingState.stableEnd) {\n          if (drawingState.floating) {\n            drawingState.train.removeStopEvent(drawingState.floating);\n          }\n          this.viewState.drawingState = null;\n        } else {\n          const newLastStev =\n            drawingState.direction > 0\n              ? drawingState.lastStev.prev\n              : drawingState.lastStev.next;\n          if (newLastStev) {\n            drawingState.train.removeStopEvent(drawingState.lastStev);\n            drawingState.lastStev = newLastStev;\n          } else {\n            this.$delete(this.diagram.trains, drawingState.train.id);\n            this.viewState.drawingState = null;\n          }\n        }\n      }\n    }\n\n    if (konvaEvent.evt.button == 1) {\n      this.setGlobalScale(1, konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    }\n\n    if (\n      konvaEvent.target == konvaEvent.currentTarget &&\n      !konvaEvent.evt.ctrlKey &&\n      !konvaEvent.evt.shiftKey &&\n      !this.stageDragState?.dragging &&\n      !this.viewState.trainPathDragState?.dragging &&\n      !this.viewState.drawingState\n    ) {\n      this.viewState.trainSelections = {};\n    }\n\n    if (\n      this.viewState.trainInfoEditorTarget &&\n      !konvaEvent.target.attrs.ref?.startsWith(\"train-name-label\")\n    ) {\n      this.$emit(\"trainInfoEditEnd\");\n    }\n  }\n\n  private onTouchEnd(konvaEvent: KonvaEventObject<TouchEvent>): void {\n    if (\n      konvaEvent.target == konvaEvent.currentTarget &&\n      !this.stageDragState?.dragging\n    ) {\n      this.viewState.trainSelections = {};\n    }\n    if (this.stageDragState) {\n      this.stageDragState = null;\n    }\n  }\n\n  private onStageDoubleClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (\n      konvaEvent.target == konvaEvent.currentTarget &&\n      this.viewState.drawingState\n    ) {\n      const drawingState = this.viewState.drawingState;\n      if (drawingState.floating) {\n        drawingState.train.removeStopEvent(drawingState.floating);\n      }\n      if (drawingState.train.stevs.length <= 1) {\n        this.$delete(this.diagram.trains, drawingState.train.id);\n      } else {\n        const stableEnd = drawingState.stableEnd;\n        if (stableEnd) {\n          const stableIndex = drawingState.train.stevs.indexOf(stableEnd);\n          const addedStevs =\n            drawingState.direction > 0\n              ? drawingState.train.stevs.filter((e, i) => i > stableIndex)\n              : drawingState.train.stevs.filter((e, i) => i < stableIndex);\n          if (drawingState.direction > 0) {\n            this.context.history.push({\n              this: this,\n              undo: () => {\n                drawingState.train.stevs.splice(stableIndex + 1);\n              },\n              redo: () => {\n                addedStevs.forEach((stev) =>\n                  drawingState.train.stevs.push(stev)\n                );\n              },\n            });\n          } else {\n            this.context.history.push({\n              this: this,\n              undo: () => {\n                drawingState.train.stevs.splice(0, stableIndex);\n              },\n              redo: () => {\n                drawingState.train.stevs = addedStevs.concat(\n                  drawingState.train.stevs\n                );\n              },\n            });\n          }\n        } else {\n          this.context.history.push({\n            this: this,\n            undo: () => {\n              this.$delete(this.diagram.trains, drawingState.train.id);\n            },\n            redo: () => {\n              this.$set(\n                this.diagram.trains,\n                drawingState.train.id,\n                drawingState.train\n              );\n            },\n          });\n        }\n      }\n      this.viewState.drawingState = null;\n      this.viewState.trainSelections = {};\n    } else if (\n      konvaEvent.target == konvaEvent.currentTarget &&\n      this.viewState.editMode\n    ) {\n      if (\n        konvaEvent.evt.clientX >=\n        this.diagram.config.leftPaneWidth * this.context.subScale\n      ) {\n        const targetLine = this.viewState.pointerTargetLine;\n        if (targetLine && (targetLine.track || !targetLine.station.expanded)) {\n          const track = targetLine.track ?? targetLine.station.tracks[0];\n          const train = this.diagram.addNewTrain();\n          train.addNewStopEvent(\n            new StopEvent(train, track, this.viewState.pointerTime)\n          );\n          this.viewState.trainSelections = {\n            [train.id]: { train: train, stevRange: null },\n          };\n          this.viewState.drawingState = {\n            train: this.diagram.trains[train.id],\n            lastStev: this.diagram.trains[train.id].stevs[0],\n            direction: 0,\n            stableEnd: null,\n            floating: null,\n          };\n        }\n      } else {\n        const relY = this.context.getRelYByY(konvaEvent.evt.clientY);\n        const prevSta = this.stationsInMileageOrder\n          .reverse()\n          .find((s) => s.topRelY < relY);\n        const mileage = prevSta\n          ? (relY - prevSta.bottomRelY) / this.context.yPhysScale +\n            prevSta.mileage\n          : relY / this.context.yPhysScale;\n\n        const station = this.diagram.addNewStation();\n        station.mileage = mileage;\n        this.context.updateY();\n\n        this.context.history.push({\n          this: this,\n          undo: () => {\n            this.$delete(this.diagram.stations, station.id);\n            this.context.updateY();\n          },\n          redo: () => {\n            this.$set(this.diagram.stations, station.id, station);\n            this.context.updateY();\n          },\n        });\n\n        this.viewState.stationNameInputTarget = station;\n        this.$emit(\"stationNameInputStart\");\n      }\n    }\n  }\n\n  private onStageMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      this.startDrag(konvaEvent.evt.screenX, konvaEvent.evt.screenY);\n    }\n  }\n\n  private onWindowMouseMove(event: MouseEvent): void {\n    this.moveDrag(event.screenX, event.screenY);\n  }\n\n  private onWindowMouseUp(event: MouseEvent): void {\n    if (this.stageDragState) {\n      this.moveDrag(event.screenX, event.screenY);\n      this.stageDragState = null;\n    }\n  }\n\n  private onPanStart(event: {\n    pointerType: string;\n    center: { x: number; y: number };\n  }): void {\n    if (event.pointerType != \"mouse\") {\n      this.startDrag(event.center.x, event.center.y);\n    }\n  }\n\n  private onPanMove(event: {\n    pointerType: string;\n    center: { x: number; y: number };\n  }): void {\n    if (event.pointerType != \"mouse\") {\n      this.moveDrag(event.center.x, event.center.y);\n    }\n  }\n\n  private onPanEnd(event: {\n    pointerType: string;\n    center: { x: number; y: number };\n  }): void {\n    if (event.pointerType != \"mouse\" && this.stageDragState) {\n      this.moveDrag(event.center.x, event.center.y);\n      // this.stageDragState = null;  // do in touchEnd\n    }\n  }\n\n  private startDrag(x: number, y: number): void {\n    if (!this.viewState.pointerPreciseState) {\n      this.stageDragState = {\n        scrollTime0: this.diagram.config.scrollTime,\n        scrollRelY0: this.diagram.config.scrollRelY,\n        x0: x,\n        y0: y,\n        dragging: false,\n      };\n    }\n  }\n\n  private moveDrag(x: number, y: number): void {\n    if (this.stageDragState) {\n      if (\n        Math.hypot(x - this.stageDragState.x0, y - this.stageDragState.y0) > 1\n      ) {\n        this.stageDragState.dragging = true;\n      }\n      if (this.stageDragState.dragging) {\n        this.diagram.config.scrollTime =\n          this.stageDragState.scrollTime0 -\n          (x - this.stageDragState.x0) / this.context.xPhysScale;\n        this.diagram.config.scrollRelY =\n          this.stageDragState.scrollRelY0 - (y - this.stageDragState.y0);\n        this.context.truncateScrollPosition();\n      }\n    }\n  }\n\n  private onStageMouseWheel(konvaEvent: KonvaEventObject<WheelEvent>): void {\n    // const f = Math.pow(2, -konvaEvent.evt.deltaY * this.viewConfig.wheelScale * 0.001);\n    const f = Math.pow(\n      2,\n      -Math.sign(konvaEvent.evt.deltaY) * this.viewConfig.wheelScale\n    );\n    this.setGlobalScale(\n      this.viewState.gScale * f,\n      konvaEvent.evt.clientX,\n      konvaEvent.evt.clientY\n    );\n    konvaEvent.evt.preventDefault();\n  }\n\n  private onPinchStart(event: { scale: number }): void {\n    this.pinchState = { lastScale: event.scale };\n  }\n\n  private onPinchMove(event: {\n    center: { x: number; y: number };\n    scale: number;\n  }): void {\n    if (this.pinchState) {\n      this.setGlobalScale(\n        (this.viewState.gScale * event.scale) / this.pinchState.lastScale,\n        event.center.x,\n        event.center.y\n      );\n      this.pinchState.lastScale = event.scale;\n    }\n  }\n\n  private onPinchEnd(event: {\n    center: { x: number; y: number };\n    scale: number;\n  }): void {\n    if (this.pinchState) {\n      this.onPinchMove(event);\n      this.pinchState = null;\n    }\n  }\n\n  private setGlobalScale(scale: number, cx: number, cy: number) {\n    const pointedTime = this.context.getTimeByX(cx);\n    const pointedUnscaledRelY =\n      this.context.getRelYByY(cy) / this.viewState.gScale;\n\n    this.viewState.gScale = scale;\n    this.context.updateY();\n\n    this.diagram.config.scrollTime -= this.context.getTimeByX(cx) - pointedTime;\n    this.diagram.config.scrollRelY -=\n      this.context.getRelYByY(cy) - pointedUnscaledRelY * this.viewState.gScale;\n    this.context.truncateScrollPosition();\n  }\n\n  private onKeyDown(event: KeyboardEvent): void {\n    if (!event.repeat) {\n      if (event.key == \"Shift\" || event.key == \"Alt\") {\n        this.viewState.pointerPreciseState = {\n          sx0: this.viewState.pointerScreenX,\n          t0: this.viewState.pointerTime,\n        };\n      }\n      if (event.key == \"Control\") {\n        this.viewState.controlKeyPressed = true;\n      }\n      if (\n        event.key == \"Delete\" &&\n        this.viewState.editMode &&\n        !this.viewState.busy\n      ) {\n        const deletingTrains: Train[] = [];\n        const deletingStevs: { stev: StopEvent; index: number }[] = [];\n        for (const sel of Object.values(this.viewState.trainSelections)) {\n          if (!sel.stevRange) {\n            deletingTrains.push(sel.train);\n          } else {\n            const fromIndex = sel.train.stevs.indexOf(sel.stevRange.from);\n            const toIndex = sel.train.stevs.indexOf(sel.stevRange.to);\n            const size = toIndex - fromIndex + 1;\n            if (size >= sel.train.stevs.length - 1) {\n              deletingTrains.push(sel.train);\n            } else {\n              for (let i = fromIndex; i <= toIndex; ++i) {\n                deletingStevs.push({ stev: sel.train.stevs[i], index: i });\n              }\n            }\n          }\n        }\n        deletingTrains.forEach((train) =>\n          this.$delete(this.diagram.trains, train.id)\n        );\n        deletingStevs.forEach((e) => e.stev.train.removeStopEvent(e.stev));\n        this.context.history.push({\n          this: this,\n          undo: () => {\n            deletingStevs.forEach((e) =>\n              e.stev.train.addNewStopEvent(e.stev, e.index)\n            );\n            deletingTrains.forEach((train) =>\n              this.$set(this.diagram.trains, train.id, train)\n            );\n          },\n          redo: () => {\n            deletingTrains.forEach((train) =>\n              this.$delete(this.diagram.trains, train.id)\n            );\n            deletingStevs.forEach((e) => e.stev.train.removeStopEvent(e.stev));\n          },\n        });\n        this.viewState.trainSelections = {};\n      }\n    }\n  }\n\n  private onKeyUp(event: KeyboardEvent): void {\n    if (event.key == \"Shift\" || event.key == \"Alt\") {\n      this.viewState.pointerPreciseState = null;\n    }\n    if (event.key == \"Control\") {\n      this.viewState.controlKeyPressed = false;\n    }\n  }\n\n  private onContextMenu(konvaEvent: KonvaEventObject<MouseEvent>): boolean {\n    konvaEvent.evt.preventDefault();\n    return false;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Stage.vue?vue&type=template&id=4a38a072&scoped=true&\"\nimport script from \"./Stage.vue?vue&type=script&lang=ts&\"\nexport * from \"./Stage.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a38a072\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (\n    _vm.viewState.editMode && _vm.station.expanded && _vm.isBottomLineIntersectingPlotPane\n  )?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"plus\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\n\n@Component\nexport default class StationAddTrackButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n  @Prop() private station!: Station;\n\n  private get style(): unknown {\n    return {\n      left: `${\n        (this.diagram.config.leftPaneWidth -\n          this.viewConfig.stationLabelRightMargin) *\n        this.context.subScale\n      }px`,\n      top: `${\n        this.context.getYByRelY(this.station.bottomRelY) -\n        this.viewConfig.trackLineSpan\n      }px`,\n      height: `${this.viewConfig.trackLineSpan}px`,\n    };\n  }\n\n  private get isBottomLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.station.bottomRelY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.station.bottomRelY) <\n        this.viewState.viewHeight\n    );\n  }\n\n  private onClick(): void {\n    if (!this.viewState.inputEnabled) {\n      const newTrack = this.station.addNewTrack();\n      this.context.updateY();\n\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          this.station.removeTrack(newTrack);\n          this.context.updateY();\n        },\n        redo: () => {\n          this.station.addNewTrack(newTrack);\n          this.context.updateY();\n        },\n      });\n\n      this.viewState.trackNameInputTarget = newTrack;\n      this.$emit(\"trackNameInputStart\");\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationAddTrackButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationAddTrackButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationAddTrackButton.vue?vue&type=template&id=624f8972&scoped=true&\"\nimport script from \"./StationAddTrackButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationAddTrackButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"624f8972\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isBottomLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":_vm.icon,\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\n\n@Component\nexport default class StationExpandButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n  @Prop() private station!: Station;\n\n  private get icon(): string {\n    return this.station.expanded ? \"chevron-up\" : \"chevron-down\";\n  }\n\n  private get style(): unknown {\n    return {\n      left: `${\n        this.viewConfig.stationLabelLeftMargin * this.context.subScale\n      }px`,\n      top: `${this.context.getYByRelY(this.station.bottomRelY)}px`,\n      height: `${this.viewConfig.trackLineSpan}px`,\n    };\n  }\n\n  private get isBottomLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.station.bottomRelY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.station.bottomRelY) <\n        this.viewState.viewHeight\n    );\n  }\n\n  private onClick(): void {\n    if (!this.viewState.inputEnabled) {\n      this.station.expanded = !this.station.expanded;\n      this.context.updateY();\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationExpandButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationExpandButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationExpandButton.vue?vue&type=template&id=876ffa9c&scoped=true&\"\nimport script from \"./StationExpandButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationExpandButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"876ffa9c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewState.stationNameInputTarget),expression:\"viewState.stationNameInputTarget\"}],style:(_vm.style),domProps:{\"value\":_vm.targetStation.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onComplete}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\n\n@Component\nexport default class StationNameInput extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  $el!: HTMLInputElement;\n\n  private get targetStation(): Station | Record<string, never> {\n    return this.viewState.stationNameInputTarget ?? {};\n  }\n\n  private get style(): unknown {\n    return {\n      left: `${\n        this.viewConfig.stationLabelLeftMargin * this.context.subScale\n      }px`,\n      top: `${\n        this.context.getYByRelY(this.targetStation.topRelY) -\n        this.viewConfig.stationLabelFontSize * this.context.subScale -\n        4\n      }px`,\n      width: `${\n        (this.diagram.config.leftPaneWidth -\n          this.viewConfig.stationLabelLeftMargin -\n          this.viewConfig.stationLabelRightMargin) *\n        this.context.subScale\n      }px`,\n      height: `${\n        this.viewConfig.stationLabelFontSize * this.context.subScale + 4\n      }px`,\n      paddingTop: \"2px\",\n      lineHeight: `${\n        this.viewConfig.stationLabelFontSize * this.context.subScale\n      }px`,\n      border: \"none\",\n      fontSize: `${\n        this.viewConfig.stationLabelFontSize * this.context.subScale\n      }px`,\n    };\n  }\n\n  private onComplete(): void {\n    const targetStation = this.targetStation;\n    const name0 = this.targetStation.name;\n    const name1 = (this.$el as HTMLInputElement).value;\n    if (name0 != name1) {\n      targetStation.name = name1;\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          targetStation.name = name0;\n        },\n        redo: () => {\n          targetStation.name = name1;\n        },\n      });\n    }\n    this.viewState.stationNameInputTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationNameInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationNameInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationNameInput.vue?vue&type=template&id=e1d1587e&scoped=true&\"\nimport script from \"./StationNameInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationNameInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e1d1587e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewState.editMode && _vm.isTopLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"close\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Train from \"@/data/Train\";\n\n@Component\nexport default class StationRemoveButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n  @Prop() private station!: Station;\n\n  private get style(): unknown {\n    return {\n      left: `${\n        (this.diagram.config.leftPaneWidth -\n          this.viewConfig.stationLabelRightMargin) *\n        this.context.subScale\n      }px`,\n      top: `${\n        this.context.getYByRelY(this.station.topRelY) -\n        this.viewConfig.trackLineSpan\n      }px`,\n      height: `${this.viewConfig.trackLineSpan}px`,\n    };\n  }\n\n  private get isTopLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.station.topRelY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.station.topRelY) < this.viewState.viewHeight\n    );\n  }\n\n  private onClick(): void {\n    if (!this.viewState.busy) {\n      const removingTrains: Train[] = [];\n      const removingStevs: { stev: StopEvent; index: number }[] = [];\n      for (const train of Object.values(this.diagram.trains)) {\n        for (let i = 0; i < train.stevs.length; ++i) {\n          const stev = train.stevs[i];\n          if (stev.station == this.station) {\n            removingStevs.push({ stev, index: i });\n            if (train.stevs.length <= 1) {\n              removingTrains.push(train);\n            }\n          }\n        }\n      }\n\n      removingStevs.forEach((e) => e.stev.train.removeStopEvent(e.stev));\n      removingTrains.forEach((train) => this.diagram.removeTrain(train));\n      this.$delete(this.diagram.stations, this.station.id);\n      this.context.updateY();\n\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          this.$set(this.diagram.stations, this.station.id, this.station);\n          removingTrains.forEach((train) => this.diagram.addNewTrain(train));\n          removingStevs.forEach((e) =>\n            e.stev.train.addNewStopEvent(e.stev, e.index)\n          );\n          this.context.updateY();\n        },\n        redo: () => {\n          removingStevs.forEach((e) => e.stev.train.removeStopEvent(e.stev));\n          removingTrains.forEach((train) => this.diagram.removeTrain(train));\n          this.$delete(this.diagram.stations, this.station.id);\n          this.context.updateY();\n        },\n      });\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationRemoveButton.vue?vue&type=template&id=491e6f01&scoped=true&\"\nimport script from \"./StationRemoveButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationRemoveButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"491e6f01\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (\n    _vm.viewState.editMode &&\n    _vm.station.expanded &&\n    Object.values(_vm.station.tracks).length > 1 &&\n    _vm.isLineIntersectingPlotPane\n  )?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"close\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\n\n@Component\nexport default class StationRemoveTrackButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  @Prop() private station!: Station;\n  @Prop() private track!: Track;\n\n  private get style(): unknown {\n    return {\n      left: `${\n        (this.diagram.config.leftPaneWidth -\n          this.viewConfig.stationLabelRightMargin) *\n        this.context.subScale\n      }px`,\n      top: `${\n        this.context.getYByRelY(this.track.relY) - this.viewConfig.trackLineSpan\n      }px`,\n      height: `${this.viewConfig.trackLineSpan}px`,\n    };\n  }\n\n  private get isLineIntersectingPlotPane(): boolean {\n    return (\n      this.context.getYByRelY(this.track.relY) >=\n        this.viewConfig.topPaneHeight * this.context.subScale &&\n      this.context.getYByRelY(this.track.relY) < this.viewState.viewHeight\n    );\n  }\n\n  private onClick(): void {\n    if (!this.viewState.busy) {\n      const removingTrains: Train[] = [];\n      const removingStevs: { stev: StopEvent; index: number }[] = [];\n      for (const train of Object.values(this.diagram.trains)) {\n        for (let i = 0; i < train.stevs.length; ++i) {\n          const stev = train.stevs[i];\n          if (stev.track == this.track) {\n            removingStevs.push({ stev, index: i });\n            if (train.stevs.length <= 1) {\n              removingTrains.push(train);\n            }\n          }\n        }\n      }\n      const trackIndex = this.station.tracks.indexOf(this.track);\n\n      removingStevs.forEach((e) => e.stev.train.removeStopEvent(e.stev));\n      removingTrains.forEach((train) => this.diagram.removeTrain(train));\n      this.station.removeTrack(this.track);\n      this.context.updateY();\n\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          this.station.addNewTrack(this.track, trackIndex);\n          removingTrains.forEach((train) => this.diagram.addNewTrain(train));\n          removingStevs.forEach((e) =>\n            e.stev.train.addNewStopEvent(e.stev, e.index)\n          );\n          this.context.updateY();\n        },\n        redo: () => {\n          removingStevs.forEach((e) => e.stev.train.removeStopEvent(e.stev));\n          removingTrains.forEach((train) => this.diagram.removeTrain(train));\n          this.station.removeTrack(this.track);\n          this.context.updateY();\n        },\n      });\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationRemoveTrackButton.vue?vue&type=template&id=5b79c832&scoped=true&\"\nimport script from \"./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b79c832\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewState.trackNameInputTarget),expression:\"viewState.trackNameInputTarget\"}],style:(_vm.style),domProps:{\"value\":_vm.targetTrack.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onComplete}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Track from \"@/data/Track\";\n\n@Component\nexport default class TrackNameInput extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  $el!: HTMLInputElement;\n\n  private get targetTrack(): Track | Record<string, never> {\n    return this.viewState.trackNameInputTarget ?? {};\n  }\n\n  private get style(): unknown {\n    return this.viewState.trackNameInputTarget\n      ? {\n          left: `${\n            (this.viewConfig.stationLabelLeftMargin +\n              this.viewConfig.trackLabelLeftMargin) *\n            this.context.subScale\n          }px`,\n          top: `${\n            this.context.getYByRelY(this.targetTrack.relY) -\n            this.viewConfig.stationLabelFontSize * this.context.subScale -\n            4\n          }px`,\n          width: `${\n            (this.diagram.config.leftPaneWidth -\n              this.viewConfig.stationLabelLeftMargin -\n              this.viewConfig.trackLabelLeftMargin -\n              this.viewConfig.stationLabelRightMargin) *\n            this.context.subScale\n          }px`,\n          height: `${\n            this.viewConfig.stationLabelFontSize * this.context.subScale + 4\n          }px`,\n          paddingTop: \"2px\",\n          lineHeight: `${\n            this.viewConfig.stationLabelFontSize * this.context.subScale\n          }px`,\n          border: \"none\",\n          fontSize: `${\n            this.viewConfig.stationLabelFontSize * this.context.subScale\n          }px`,\n        }\n      : {};\n  }\n\n  private onComplete(): void {\n    const targetTrack = this.targetTrack;\n    const name0 = targetTrack.name;\n    const name1 = (this.$el as HTMLInputElement).value;\n    if (name0 != name1) {\n      targetTrack.name = name1;\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          targetTrack.name = name0;\n        },\n        redo: () => {\n          targetTrack.name = name1;\n        },\n      });\n    }\n    this.viewState.trackNameInputTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackNameInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackNameInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrackNameInput.vue?vue&type=template&id=7dff0a42&scoped=true&\"\nimport script from \"./TrackNameInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrackNameInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7dff0a42\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"train-info-editor-group\"},[_c('div',{ref:\"trainInfoEditorBox\",staticClass:\"train-info-editor-box box\",style:(_vm.trainInfoEditorBoxStyle)},[_c('input',{ref:\"trainNameInput\",staticClass:\"train-name-input\",style:(_vm.trainNameInputStyle),domProps:{\"value\":_vm.targetTrain.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onBlur}}),_c('span',{ref:\"colorPickerTrigger\",staticClass:\"color-picker picker\",style:({ background: _vm.targetTrain.color || _vm.viewConfig.trainPathColor }),on:{\"click\":_vm.onColorPickerTriggerClick}}),_c('span',{ref:\"lineWidthPickerTrigger\",staticClass:\"line-width-picker picker\",on:{\"click\":_vm.onLineWidthPickerTriggerClick}},[_c('span',{staticClass:\"line-width-picker-preview\",style:({\n          background: _vm.targetTrain.color || _vm.viewConfig.trainPathColor,\n          height: ((_vm.getDispLineWidthByValue(\n            _vm.targetTrain.lineWidth || _vm.viewConfig.trainPathWidth\n          )) + \"px\"),\n        })})])]),_c('div',{staticClass:\"color-picker-box picker-box box\",style:(_vm.colorPickerBoxStyle)},[_c('div',[_c('span',{staticClass:\"color-picker picker\",staticStyle:{\"background\":\"#000\"},on:{\"click\":function($event){return _vm.onColorPickerClick('#000')}}})]),_c('div',_vm._l((_vm.colorPickerColors),function(c,i){return _c('span',{key:(\"train-path-color-picker-\" + i),staticClass:\"color-picker picker\",style:({ background: c }),on:{\"click\":function($event){return _vm.onColorPickerClick(c)}}})}),0)]),_c('div',{staticClass:\"line-width-picker-box picker-box box\",style:(_vm.lineWidthPickerBoxStyle)},[_c('div',_vm._l((_vm.lineWidthPickerValues),function(w,i){return _c('span',{key:(\"train-path-line-width-picker-\" + i),staticClass:\"line-width-picker picker\",on:{\"click\":function($event){return _vm.onLineWidthPickerClick(w.value)}}},[_c('span',{staticClass:\"line-width-picker-preview\",style:({\n            background: _vm.targetTrain.color || _vm.viewConfig.trainPathColor,\n            height: ((w.disp) + \"px\"),\n          })})])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Train from \"@/data/Train\";\n\n@Component\nexport default class TrackNameInput extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  $refs!: {\n    trainInfoEditorBox: HTMLElement;\n    trainNameInput: HTMLInputElement;\n    colorPickerTrigger: HTMLElement;\n    lineWidthPickerTrigger: HTMLElement;\n  };\n\n  private pickerMode: \"none\" | \"color\" | \"lineWidth\" = \"none\";\n\n  private get targetTrain(): Train | Record<string, never> {\n    return this.viewState.trainInfoEditorTarget?.train ?? {};\n  }\n\n  private get trainInfoEditorBoxTop(): number {\n    const state = this.viewState.trainInfoEditorTarget;\n    return state\n      ? state.y +\n          (state.verticalAlign == \"bottom\"\n            ? -this.$refs.trainInfoEditorBox.clientHeight ?? 0\n            : 0)\n      : this.viewState.viewHeight;\n  }\n\n  private get trainInfoEditorBoxStyle(): unknown {\n    const state = this.viewState.trainInfoEditorTarget;\n    return state\n      ? {\n          left: `${state.x}px`,\n          top: `${this.trainInfoEditorBoxTop}px`,\n        }\n      : {\n          top: `${this.viewState.viewHeight}px`,\n        };\n  }\n\n  private get trainNameInputStyle(): unknown {\n    return this.viewState.trainInfoEditorTarget\n      ? {\n          lineHeight: `${this.viewConfig.stationLabelFontSize}px`,\n          fontSize: `${this.viewConfig.stationLabelFontSize}px`,\n        }\n      : {};\n  }\n\n  private get colorPickerBoxStyle(): unknown {\n    const state = this.viewState.trainInfoEditorTarget;\n    return state && this.pickerMode == \"color\"\n      ? {\n          left: `calc(${\n            state.x + this.$refs.colorPickerTrigger.offsetLeft\n          }px - 0.5rem)`,\n          top: `${\n            this.trainInfoEditorBoxTop +\n            this.$refs.trainInfoEditorBox.clientHeight\n          }px`,\n        }\n      : {\n          top: `${this.viewState.viewHeight}px`,\n        };\n  }\n\n  private get colorPickerColors() {\n    return [\"#ce1a34\", \"#dd7d15\", \"#ceae0f\", \"#298e30\", \"#2d75bc\", \"#790894\"];\n  }\n\n  private get lineWidthPickerBoxStyle(): unknown {\n    const state = this.viewState.trainInfoEditorTarget;\n    return state && this.pickerMode == \"lineWidth\"\n      ? {\n          left: `calc(${\n            state.x + this.$refs.lineWidthPickerTrigger.offsetLeft\n          }px - 0.5rem)`,\n          top: `${\n            this.trainInfoEditorBoxTop +\n            this.$refs.trainInfoEditorBox.clientHeight\n          }px`,\n        }\n      : {\n          top: `${this.viewState.viewHeight}px`,\n        };\n  }\n\n  private getDispLineWidthByValue(value: number) {\n    return (\n      this.lineWidthPickerValues.find((e) => e.value == value)?.disp ?? value\n    );\n  }\n\n  private get lineWidthPickerValues() {\n    return [\n      { value: 1, disp: 0.75 },\n      { value: 2, disp: 2.25 },\n    ];\n  }\n\n  onComplete(): void {\n    this.onBlur();\n    this.viewState.trainInfoEditorTarget = null;\n    this.pickerMode = \"none\";\n  }\n\n  private onBlur(): void {\n    const state = this.viewState.trainInfoEditorTarget;\n    if (state) {\n      const targetTrain = this.targetTrain;\n      const name0 = state.train.name;\n      const name = this.$refs.trainNameInput.value;\n      if (name != name0) {\n        state.train.name = name;\n        this.context.history.push({\n          this: this,\n          undo: () => {\n            targetTrain.name = name0;\n          },\n          redo: () => {\n            targetTrain.name = name;\n          },\n        });\n      }\n    }\n  }\n\n  private onColorPickerTriggerClick(): void {\n    this.pickerMode = this.pickerMode == \"color\" ? \"none\" : \"color\";\n  }\n\n  private onLineWidthPickerTriggerClick(): void {\n    this.pickerMode = this.pickerMode == \"lineWidth\" ? \"none\" : \"lineWidth\";\n  }\n\n  private onColorPickerClick(color: string): void {\n    const targetTrain = this.targetTrain;\n    const color0 = targetTrain.color;\n    targetTrain.color = color;\n    this.context.history.push({\n      this: this,\n      undo: () => {\n        targetTrain.color = color0;\n      },\n      redo: () => {\n        targetTrain.color = color;\n      },\n    });\n  }\n\n  private onLineWidthPickerClick(lineWidth: number): void {\n    const targetTrain = this.targetTrain;\n    const lineWidth0 = targetTrain.lineWidth;\n    targetTrain.lineWidth = lineWidth;\n    this.context.history.push({\n      this: this,\n      undo: () => {\n        targetTrain.lineWidth = lineWidth0;\n      },\n      redo: () => {\n        targetTrain.lineWidth = lineWidth;\n      },\n    });\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainInfoEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainInfoEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainInfoEditor.vue?vue&type=template&id=29c65084&scoped=true&\"\nimport script from \"./TrainInfoEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainInfoEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TrainInfoEditor.vue?vue&type=style&index=0&id=29c65084&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29c65084\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, ProvideReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Stage from \"./Stage.vue\";\nimport StationAddTrackButton from \"./StationAddTrackButton.vue\";\nimport StationExpandButton from \"./StationExpandButton.vue\";\nimport StationNameInput from \"./StationNameInput.vue\";\nimport StationRemoveButton from \"./StationRemoveButton.vue\";\nimport StationRemoveTrackButton from \"./StationRemoveTrackButton.vue\";\nimport TrackNameInput from \"./TrackNameInput.vue\";\nimport TrainInfoEditor from \"./TrainInfoEditor.vue\";\n\n@Component({\n  components: {\n    Stage,\n    StationAddTrackButton,\n    StationExpandButton,\n    StationNameInput,\n    StationRemoveButton,\n    StationRemoveTrackButton,\n    TrackNameInput,\n    TrainInfoEditor,\n  },\n})\nexport default class DiagramView extends Vue {\n  @Prop({ default: new DiagramViewContext() })\n  @ProvideReactive()\n  private context!: DiagramViewContext;\n  private get diagram() {\n    return this.context.diagram;\n  }\n  private get viewConfig() {\n    return this.context.config;\n  }\n  private get viewState() {\n    return this.context.state;\n  }\n\n  $refs!: {\n    stationNameInput: StationNameInput;\n    trackNameInput: TrackNameInput;\n    trainInfoEditor: TrainInfoEditor;\n  };\n\n  private mounted(): void {\n    const resizeObserver = new ResizeObserver(this.updateViewSize);\n    resizeObserver.observe(this.$el);\n  }\n\n  private onStationNameInputStart(): void {\n    this.$nextTick(() => this.$refs.stationNameInput.$el.focus());\n  }\n\n  private onTrackNameInputStart(): void {\n    this.$nextTick(() => this.$refs.trackNameInput.$el.focus());\n  }\n\n  private onTrainInfoEditStart(): void {\n    this.$nextTick(() =>\n      this.$refs.trainInfoEditor.$refs.trainNameInput.focus()\n    );\n  }\n\n  private onTrainInfoEditEnd(): void {\n    this.$refs.trainInfoEditor.onComplete();\n  }\n\n  private updateViewSize(): void {\n    if (this.$el) {\n      this.viewState.viewWidth = this.$el.clientWidth;\n      this.viewState.viewHeight = this.$el.clientHeight;\n      this.context.truncateScrollPosition();\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DiagramView.vue?vue&type=template&id=1d818f47&scoped=true&\"\nimport script from \"./DiagramView.vue?vue&type=script&lang=ts&\"\nexport * from \"./DiagramView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DiagramView.vue?vue&type=style&index=0&id=1d818f47&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d818f47\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-carousel',{attrs:{\"autoplay\":false,\"indicator-inside\":false}},[_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_add_new_station.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewStationTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewStationBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_add_new_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_select_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.selectTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.selectTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_edit_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_edit_time.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTimeTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTimeBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_tips.png\")}}),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.tipsTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.tipsBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.contactTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.contactBody'))}})])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class HelpPane extends Vue {}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HelpView.vue?vue&type=template&id=6afc7d96&scoped=true&\"\nimport script from \"./HelpView.vue?vue&type=script&lang=ts&\"\nexport * from \"./HelpView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HelpView.vue?vue&type=style&index=0&id=6afc7d96&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6afc7d96\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"./data/DiagramViewContext\";\nimport Diagram from \"./data/Diagram\";\nimport DiagramView from \"./components/DiagramView.vue\";\nimport HelpView from \"./components/HelpView.vue\";\n\n@Component({\n  components: {\n    DiagramView,\n    HelpView,\n  },\n})\nexport default class App extends Vue {\n  private context = new DiagramViewContext();\n\n  private diagramFileName = \"diagram.json\";\n  private enableSwitchEditMode = window.screen.width >= 640;\n  private subView: \"none\" | \"help\" = \"none\";\n\n  private mounted(): void {\n    this.context.state.editMode = this.enableSwitchEditMode;\n    fetch(\"sample-diagram.json\").then(async (result) => {\n      const json = await result.json();\n      this.context.setDiagram(Diagram.fromJSON(json));\n      this.diagramFileName = \"sample-diagram.json\";\n    });\n  }\n\n  private onEditButtonClick(): void {\n    this.context.state.editMode = !this.context.state.editMode;\n  }\n\n  private onUndoButtonClick(): void {\n    this.context.history.undo();\n  }\n\n  private onRedoButtonClick(): void {\n    this.context.history.redo();\n  }\n\n  private onVanishButtonClick(): void {\n    if (Object.keys(this.context.diagram.trains).length > 0) {\n      const trains = this.context.diagram.trains;\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          this.context.diagram.trains = trains;\n        },\n        redo: () => {\n          this.context.diagram.trains = {};\n        },\n      });\n      this.context.diagram.trains = {};\n    } else {\n      const diagram = this.context.diagram;\n      this.context.history.push({\n        this: this,\n        undo: () => {\n          this.context.setDiagram(diagram);\n        },\n        redo: () => {\n          this.context.setDiagram(\n            Diagram.fromJSON({ stations: {}, trains: {} })\n          );\n        },\n      });\n      this.context.setDiagram(Diagram.fromJSON({ stations: {}, trains: {} }));\n    }\n  }\n\n  private onUploadButtonClick(): void {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json, application/json\";\n    input.onchange = () => {\n      const reader = new FileReader();\n      if (input.files && input.files.length > 0) {\n        const file = input.files[0];\n        reader.readAsText(file);\n        reader.onload = () => {\n          if (typeof reader.result == \"string\") {\n            try {\n              const data = JSON.parse(reader.result);\n              this.context.setDiagram(Diagram.fromJSON(data));\n              this.diagramFileName = file.name;\n              this.context.history.clear();\n            } catch (e) {\n              this.$buefy.notification.open({\n                type: \"is-danger\",\n                message: `${this.$t(\n                  \"message.failedToLoadJSON\"\n                ).toString()}<br>${file.name}`,\n              });\n            }\n          }\n        };\n      }\n    };\n    input.click();\n  }\n\n  private onDownloadButtonClick(): void {\n    const json = JSON.stringify(this.context.diagram);\n    const blob = new Blob([json], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = this.diagramFileName;\n    a.click();\n  }\n\n  private onHelpButtonClick(): void {\n    this.subView = this.subView == \"help\" ? \"none\" : \"help\";\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5e5b2f28&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n  ja: {\n    message: {\n      failedToLoadJSON: \"ファイルの読み込みに失敗しました。\",\n      editButtonTooltip: \"編集モード\",\n      undoButtonTooltip: \"元に戻す\",\n      redoButtonTooltip: \"やり直す\",\n      vanishTrainsButtonTooltip: \"列車をクリア\",\n      vanishStationsButtonTooltip: \"駅をクリア\",\n      uploadButtonTooltip: \"ダイヤファイルを読み込む\",\n      downloadButtonTooltip: \"ダイヤファイルを保存する\",\n      helpButtonTooltip: \"操作方法\",\n      help: {\n        addNewStationTitle: \"駅を追加する\",\n        addNewStationBody:\n          \"<p>左側の駅名エリアをダブルクリックすると、新しい駅を追加できます。</p>\" +\n          \"<ul><li>駅名をドラッグすると、駅線の位置を調整できます。\" +\n          \"<li>駅名をクリックすると、駅名を編集できます。\" +\n          \"<li>駅右側の<i class='mdi mdi-close'></i>アイコンをクリックすると、駅を削除できます。</ul>\",\n        addNewTrainTitle: \"列車を追加する\",\n        addNewTrainBody:\n          \"<p>駅線の上でダブルクリックすると、新しい列車を追加できます。駅線を続けてクリックして、停車駅を順に追加できます。</p>\" +\n          \"<ul><li>列車線の編集を終了するには、もう一度ダブルクリックします。\" +\n          \"<li>Shiftキーを押しながらカーソルを動かすと、秒単位で時刻を指定できます。\" +\n          \"<li>右クリックすると、追加した停車駅を順に削除します。</ul>\",\n        selectTrainTitle: \"列車を選択する\",\n        selectTrainBody:\n          \"<p>列車線をクリックすると、列車を選択できます。</p>\" +\n          \"<ul><li>Shiftキーを押しながら別の列車線をクリックすると、複数列車を選択できます。\" +\n          \"<li>列車を選択した状態でさらにクリックすると、特定の駅または駅間を選択できます。<br>Shiftキーを押しながらクリックすると、複数駅間を選択できます。</ul>\",\n        editTrainTitle: \"列車を編集する\",\n        editTrainBody:\n          \"<p>列車を選択した状態では、さまざまな方法で列車を編集できます。</p>\" +\n          \"<ul><li>列車線と駅線の交点をダブルクリックすると、停車駅を追加できます。\" +\n          \"<li>列車線の始端・終端をダブルクリックすると、列車線を延長できます。\" +\n          \"<li>Deleteキーを押すと、選択した区間の列車線を削除できます。</ul>\",\n        editTimeTitle: \"着発時刻を変更する\",\n        editTimeBody:\n          \"<p>列車を選択した状態で列車線をドラッグすると、着発時刻を変更できます。</p>\" +\n          \"<ul><li>Shiftキーを押しながらカーソルを動かすと、秒単位で時刻を指定できます。\" +\n          \"<li>番線線上の列車線をドラッグすると、着発番線を変更できます。\" +\n          \"<li>Ctrlキーを押しながらドラッグすると、着発時刻を変更する代わりに、<br>列車線をコピーして新しい列車を作成できます。</ul>\",\n        tipsTitle: \"アイコンメニュー\",\n        tipsBody:\n          \"<ul><li><i class='mdi mdi-undo'></i><i class='mdi mdi-redo'></i>ボタンで、操作の取り消し・やり直しができます。\" +\n          \"<li><i class='mdi mdi-vanish'></i>ボタンで、列車・駅の一括削除ができます。\" +\n          \"<li><i class='mdi mdi-upload'></i><i class='mdi mdi-download'></i>ボタンで、データの読み込み・保存ができます。</ul>\",\n        contactTitle: \"不明点・不具合などを見つけたら\",\n        contactBody:\n          \"<p>不明点・不具合などがありましたら、<a href='https://twitter.com/nosrithe'>@nosrithe</a> までお知らせください。</p>\" +\n          \"<ul><li>お問い合わせの際は、操作の目的や再現手順を具体的にお伝えください。\" +\n          \"<li>不具合などの修正は <a href='https://github.com/nosrith/diafreaks/issues'>GitHub プロジェクト</a> で管理しています。<br>既知の不具合についてはこちらをご確認ください。</ul>\",\n      },\n    },\n  },\n};\n","import Vue from \"vue\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\nimport VueI18n from \"vue-i18n\";\nimport VueKonva from \"vue-konva\";\nimport App from \"./App.vue\";\nimport messages from \"./messages\";\n\nVue.config.productionTip = false;\nVue.use(Buefy, {\n  defaultNotificationDuration: 5000,\n  defaultNotificationPosition: \"is-bottom-right\",\n});\nVue.use(VueI18n);\nVue.use(VueKonva);\n\nconst i18n = new VueI18n({\n  locale: \"ja\",\n  messages,\n});\n\nnew Vue({\n  render: (h) => h(App),\n  i18n,\n}).$mount(\"#app\");\n"],"sourceRoot":""}