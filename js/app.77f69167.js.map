{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/help_edit_train.png","webpack:///./src/assets/help_select_train.png","webpack:///./src/App.vue?c650","webpack:///./src/assets/help_tips.png","webpack:///./src/components/HelpPane.vue?cfbd","webpack:///./src/assets/help_edit_time.png","webpack:///./src/components/DiagramView.vue?8ddd","webpack:///./src/assets/help_add_new_train.png","webpack:///./src/assets/help_add_new_station.png","webpack:///./src/App.vue?8bcb","webpack:///./src/HistoryManager.ts","webpack:///./src/data/DiagramConfig.ts","webpack:///./src/data/Track.ts","webpack:///./src/data/Station.ts","webpack:///./src/data/StopEvent.ts","webpack:///./src/data/Train.ts","webpack:///./src/data/Diagram.ts","webpack:///./src/data/ViewConfig.ts","webpack:///./src/components/DiagramView.vue?b386","webpack:///./src/data/ViewState.ts","webpack:///./src/components/Stage.vue?9e42","webpack:///./src/components/BackLayer.vue?286b","webpack:///./src/components/StationGroup.vue?57a1","webpack:///./src/components/TrackGroup.vue?111c","webpack:///./src/components/TrackGroup.vue","webpack:///./src/components/TrackGroup.vue?80ea","webpack:///./src/components/TrackGroup.vue?a194","webpack:///./src/components/StationGroup.vue","webpack:///./src/components/StationGroup.vue?f322","webpack:///./src/components/StationGroup.vue?1b58","webpack:///./src/components/BackLayer.vue","webpack:///./src/components/BackLayer.vue?3b1f","webpack:///./src/components/BackLayer.vue?c43c","webpack:///./src/components/Pointer.vue?bd5f","webpack:///./src/utils.ts","webpack:///./src/components/Pointer.vue","webpack:///./src/components/Pointer.vue?63e5","webpack:///./src/components/Pointer.vue?a4a9","webpack:///./src/components/TrainPathLayer.vue?8ae7","webpack:///./src/components/TrainPathGroup.vue?42b9","webpack:///./src/components/TrainPathMarker.vue?21b2","webpack:///./src/components/TrainPathMarker.vue","webpack:///./src/components/TrainPathMarker.vue?ce7d","webpack:///./src/components/TrainPathMarker.vue?a47c","webpack:///./src/components/TrainPathGroup.vue","webpack:///./src/components/TrainPathGroup.vue?c604","webpack:///./src/components/TrainPathGroup.vue?fe26","webpack:///./src/components/TrainPathLayer.vue","webpack:///./src/components/TrainPathLayer.vue?75af","webpack:///./src/components/TrainPathLayer.vue?44a2","webpack:///./src/components/Stage.vue","webpack:///./src/components/Stage.vue?091d","webpack:///./src/components/Stage.vue?d206","webpack:///./src/components/StationAddTrackButton.vue?1af8","webpack:///./src/components/StationAddTrackButton.vue","webpack:///./src/components/StationAddTrackButton.vue?f328","webpack:///./src/components/StationAddTrackButton.vue?b738","webpack:///./src/components/StationExpandButton.vue?1e99","webpack:///./src/components/StationExpandButton.vue","webpack:///./src/components/StationExpandButton.vue?8892","webpack:///./src/components/StationExpandButton.vue?e10d","webpack:///./src/components/StationNameInput.vue?d281","webpack:///./src/components/StationNameInput.vue","webpack:///./src/components/StationNameInput.vue?fcac","webpack:///./src/components/StationNameInput.vue?9ce9","webpack:///./src/components/StationRemoveButton.vue?5956","webpack:///./src/components/StationRemoveButton.vue","webpack:///./src/components/StationRemoveButton.vue?6092","webpack:///./src/components/StationRemoveButton.vue?7287","webpack:///./src/components/StationRemoveTrackButton.vue?37d2","webpack:///./src/components/StationRemoveTrackButton.vue","webpack:///./src/components/StationRemoveTrackButton.vue?2de7","webpack:///./src/components/StationRemoveTrackButton.vue?c700","webpack:///./src/components/TrackNameInput.vue?8c2f","webpack:///./src/components/TrackNameInput.vue","webpack:///./src/components/TrackNameInput.vue?2a59","webpack:///./src/components/TrackNameInput.vue?4243","webpack:///./src/components/DiagramView.vue","webpack:///./src/components/DiagramView.vue?0f5f","webpack:///./src/components/DiagramView.vue?613b","webpack:///./src/components/HelpPane.vue?d118","webpack:///./src/components/HelpPane.vue","webpack:///./src/components/HelpPane.vue?3172","webpack:///./src/components/HelpPane.vue?a5ad","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/messages.ts","webpack:///./src/main.ts","webpack:///./src/assets/logo.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","diagram","viewConfig","historyManager","_e","_m","staticClass","$t","class","editMode","on","onEditButtonClick","directives","rawName","expression","undoable","onUndoButtonClick","redoable","onRedoButtonClick","keys","trains","onVanishButtonClick","onUploadButtonClick","onDownloadButtonClick","helpPaneVisible","onHelpButtonClick","staticRenderFns","capacity","undos","redos","elem","pop","undo","redo","minimumTimeUnit","fontFamily","topPaneHeight","hourlyLabelBottomMargin","hourlyLabelFontSize","hourlyLabelColor","hourlyGridLineWidth","hourlyGridLineColor","majorMinutelyGridLineSpan","majorMinutelyGridLineWidth","majorMinutelyGridLineColor","minorMinutelyGridLineSpan","minorMinutelyGridLineWidth","minorMinutelyGridLineColor","leftPaneWidth","stationLabelLeftMargin","stationLabelRightMargin","stationLabelFontSize","stationLabelColor","stationLineWidth","stationLineColor","plotPaneVerticalPadding","trackLabelLeftMargin","trackLabelFontSize","trackLabelColor","trackLineWidth","trackLineColor","trackLineSpan","scrollX","scrollY","xScale","yScale","trainPathWidth","trainPathColor","dc","DiagramConfig","assign","station","id","relY","Track","mileage","expanded","topRelY","bottomRelY","tracks","track","index","indexOf","Array","isArray","Station","map","fromJSON","forEach","train","time","privateId","StopEvent","maxPrivateId","stevs","undefined","stations","stationId","trackId","arrTime","depTime","find","stev","stevRange","inRange","from","to","stops","lastStop","Train","flatMap","fromJSONStop","config","maxId","maxRelY","y","x","values","sort","a","b","set","delete","getStationsInMileageOrder","initialMileage","lastMileage","fromEntries","Diagram","Math","max","updateY","minHitWidth","pointerWidth","pointerColor","pointerLabelFontSize","pointerPrecisePixelPerTimeUnit","selectedTrackLabelColor","selectedTrackLineColor","selectedTrainPathColor","selectedTrainPathWidthScale","selectedTrainPathMarkerWidth","selectedTrainPathMarkerColor","unselectedTrainPathOpacity","markerLabelMaxDistance","markerLabelColor","markerLabelFontSize","markerLabelLineHeight","wheelScale","onStationNameInputStart","onTrackNameInputStart","ref","_l","viewWidth","viewHeight","trainSelections","pointerScreenX","pointerTime","pointerY","pointerTargetTrainPath","pointerTargetLine","pointerPreciseState","drawingState","trainPathDragState","stationNameInputTarget","trackNameInputTarget","controlKeyPressed","inputEnabled","stageConfig","onStageMouseDown","onStageMouseMove","onStageClick","onStageDoubleClick","onStageMouseWheel","onContextMenu","_g","$listeners","lineConfig","labelConfig","topLineConfig","labelRectConfig","onStationLabelClick","onStationLabelMouseDown","isBottomLineIntersectingPlotPane","bottomLineConfig","onLabelClick","onLabelMouseDown","dragState","points","getYByRelY","viewState","stroke","strokeWidth","listening","width","height","text","fontSize","fill","align","verticalAlign","busy","$emit","konvaEvent","sy0","evt","screenY","index0","dragging","addEventListener","onWindowMouseMove","onWindowMouseUp","event","abs","currentIndex","findIndex","mouseRelY","getRelYByY","clientY","newIndex","removeEventListener","index1","removeTrack","addNewTrack","component","widthForChars","charSpan","mileage0","mileage1","components","TrackGroup","lines","scrollLeftTime","ceil","StationGroup","rectConfig","getTimeText","forceSec","hStr","floor","mmStr","padStart","ssStr","getXByTime","layerConfig","filter","regularTrainPathConfig","onTrainPathClick","onTrainPathMouseMove","selectedTrainPathConfig","onSelectedTrainPathClick","onSelectedTrainPathDoubleClick","onSelectedTrainPathMouseDown","onSelectedTrainPathMouseMove","onMarkerClick","onMarkerMouseDown","$event","trainPathNode","onRectMouseMove","onRectDoubleClick","phase","labelPosition","getLabelPosition","thisStev","prevStev","prev","nextStev","next","thisRelY","prevRelY","lastStev","direction","stableEnd","floating","regularTrainPathNodes","opacity","hitStrokeWidth","getTrainPathNodes","selectedTrainPathNodes","sel","getStopEventsInRange","shiftEnabled","targets","shiftTime","timeShift","shiftRange","inShiftRange","getPointedStevRange","clientX","clickedStopRange","changeTrainSelections","clickedStevRange","clickSelected","ctrlKey","selectedStevRange","selStart","selEnd","changed","$delete","$set","leftX","rightX","topY","min","bottomY","targetTime","nearestStation","getNearestStation","nearestStev","getNearestStopEvent","newStev","addNewStopEvent","minSta","minDist","minStop","minTimeShift","maxTimeShift","changeTrackTargets","firstNode","t0","y0","sx0","screenX","track0","changeTimeTargets","node","hypot","targetStation","mouseTrack","track1","newTrains","srcTrain","srcStevs","newTrain","addNewTrain","genId","srcStev","trainId","removeTrain","TrainPathMarker","clip","TrainPathGroup","stageDragState","pinchState","document","onKeyDown","onKeyUp","hammer","$el","DIRECTION_ALL","enable","onPanStart","onPanMove","onPanEnd","onPinchStart","onPinchMove","onPinchEnd","dUnit","round","getTimeByX","findPointerTargetLine","target","currentTarget","targetTrack","stationPointedOnTop","stationsInMileageOrder","stationPointedOnBottom","pointedTrack","button","sign","triple","newLastStev","stableIndex","addedStevs","e","concat","targetLine","prevSta","reverse","startDrag","moveDrag","endDrag","center","scrollX0","scrollY0","x0","f","pow","deltaY","preventDefault","lastScale","scale","repeat","deletingTrains","deletingStevs","fromIndex","toIndex","size","removeStopEvent","BackLayer","Pointer","TrainPathLayer","style","nativeOn","onClick","left","top","newTrack","icon","domProps","type","_k","keyCode","onComplete","paddingTop","lineHeight","border","name0","name1","isTopLineIntersectingPlotPane","removingTrains","removingStevs","isLineIntersectingPlotPane","trackIndex","resizeObserver","ResizeObserver","updateViewSize","observe","$nextTick","$refs","stationNameInput","focus","trackNameInput","clientWidth","clientHeight","default","Stage","StationAddTrackButton","StationExpandButton","StationNameInput","StationRemoveButton","StationRemoveTrackButton","TrackNameInput","_s","diagramFileName","body","fetch","then","json","input","createElement","accept","onchange","reader","FileReader","files","file","readAsText","onload","JSON","parse","clear","$buefy","notification","open","message","toString","click","stringify","blob","Blob","url","URL","createObjectURL","href","download","DiagramView","HelpPane","ja","confirmRemoveStationRefered","confirmRemoveTrackRefered","failedToLoadJSON","editButtonTooltip","undoButtonTooltip","redoButtonTooltip","vanishTrainsButtonTooltip","vanishStationsButtonTooltip","uploadButtonTooltip","downloadButtonTooltip","helpButtonTooltip","help","addNewStationTitle","addNewStationBody","addNewTrainTitle","addNewTrainBody","selectTrainTitle","selectTrainBody","editTrainTitle","editTrainBody","editTimeTitle","editTimeBody","tipsTitle","tipsBody","productionTip","use","defaultNotificationDuration","defaultNotificationPosition","i18n","locale","messages","render","h","$mount"],"mappings":"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","file":"js/app.77f69167.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/help_edit_train.67395182.png\";","module.exports = __webpack_public_path__ + \"img/help_select_train.6cd1d819.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/help_tips.12f4142e.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpPane.vue?vue&type=style&index=0&id=da68d834&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/help_edit_time.25aa545d.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=style&index=0&id=d5ac33d8&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/help_add_new_train.0fab88c8.png\";","module.exports = __webpack_public_path__ + \"img/help_add_new_station.d55b6e32.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('diagram-view',{attrs:{\"id\":\"diagram-view\",\"diagram\":_vm.diagram,\"viewConfig\":_vm.viewConfig,\"historyManager\":_vm.historyManager}}),(_vm.helpPaneVisible)?_c('help-pane',{attrs:{\"id\":\"help-pane\"}}):_vm._e(),_c('div',{attrs:{\"id\":\"nav-pane\"}},[_vm._m(0),_c('span',{attrs:{\"id\":\"nav-pane-buttons\"}},[_c('span',{attrs:{\"id\":\"nav-pane-buttons-left\"}},[_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.editButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{class:_vm.viewConfig.editMode ? 'is-selected': '',attrs:{\"icon-left\":\"pencil-outline\",\"size\":\"medium\"},on:{\"click\":_vm.onEditButtonClick}})],1)],1),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewConfig.editMode),expression:\"viewConfig.editMode\"}],staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.undoButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"undo\",\"size\":\"medium\",\"disabled\":!_vm.historyManager.undoable},on:{\"click\":_vm.onUndoButtonClick}})],1)],1),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewConfig.editMode),expression:\"viewConfig.editMode\"}],staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.redoButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"redo\",\"size\":\"medium\",\"disabled\":!_vm.historyManager.redoable},on:{\"click\":_vm.onRedoButtonClick}})],1)],1),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewConfig.editMode),expression:\"viewConfig.editMode\"}],staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":Object.keys(_vm.diagram.trains).length > 0 ? _vm.$t('message.vanishTrainsButtonTooltip') : _vm.$t('message.vanishStationsButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"vanish\",\"size\":\"medium\"},on:{\"click\":_vm.onVanishButtonClick}})],1)],1),_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.uploadButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"upload\",\"size\":\"medium\"},on:{\"click\":_vm.onUploadButtonClick}})],1)],1),_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.downloadButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"download\",\"size\":\"medium\"},on:{\"click\":_vm.onDownloadButtonClick}})],1)],1)]),_c('span',{attrs:{\"id\":\"nav-pane-buttons-spacer\"}}),_c('span',{attrs:{\"id\":\"nav-pane-buttons-right\"}},[_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.helpButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{class:_vm.helpPaneVisible ? 'is-selected': '',attrs:{\"icon-left\":\"help\",\"size\":\"medium\"},on:{\"click\":_vm.onHelpButtonClick}})],1)],1)])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"nav-pane-item\",attrs:{\"id\":\"nav-pane-logo\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/logo.png\")}})])}]\n\nexport { render, staticRenderFns }","interface HistoryElement {\n    undo: () => void;\n    redo: () => void;\n}\n\nexport default class HistoryManager {\n    constructor(public capacity: number) {}\n    private undos: HistoryElement[] = [];\n    private redos: HistoryElement[] = [];\n\n    get undoable(): boolean { return this.undos.length > 0; }\n    get redoable(): boolean { return this.redos.length > 0; }\n\n    push(elem: HistoryElement): void {\n        if (this.undos.length >= this.capacity) {\n            this.undos.splice(0, this.undos.length - this.capacity + 1);\n        }\n        this.undos.push(elem);\n        this.redos.splice(0);\n    }\n\n    clear(): void {\n        this.undos.splice(0);\n        this.redos.splice(0);\n    }\n\n    undo(): void {\n        const elem = this.undos.pop();\n        if (elem) {\n            this.redos.push(elem);\n            elem.undo();\n        }\n    }\n\n    redo(): void {\n        const elem = this.redos.pop();\n        if (elem) {\n            this.undos.push(elem);\n            elem.redo();\n        }\n    }\n}\n","export default class DiagramConfig {\n    minimumTimeUnit = 5;\n    fontFamily = \"Verdana, sans-serif\";\n    topPaneHeight = 32;\n    hourlyLabelBottomMargin = 4;\n    hourlyLabelFontSize = 16;\n    hourlyLabelColor = \"rgb(128, 192, 128)\";\n    hourlyGridLineWidth = 2.25;\n    hourlyGridLineColor = \"rgb(128, 192, 128)\";\n    majorMinutelyGridLineSpan = 10 * 60;\n    majorMinutelyGridLineWidth = 1.5;\n    majorMinutelyGridLineColor = \"rgb(128, 192, 128)\";\n    minorMinutelyGridLineSpan = 2 * 60;\n    minorMinutelyGridLineWidth = 0.75;\n    minorMinutelyGridLineColor = \"rgb(128, 192, 128)\";\n    leftPaneWidth = 160;\n    stationLabelLeftMargin = 16;\n    stationLabelRightMargin = 16;\n    stationLabelFontSize = 16;\n    stationLabelColor = \"rgb(128, 192, 128)\";\n    stationLineWidth = 1;\n    stationLineColor = \"rgb(128, 192, 128)\";\n    plotPaneVerticalPadding = 4;\n    trackLabelLeftMargin = 10;\n    trackLabelFontSize = 12;\n    trackLabelColor = \"rgb(128, 192, 128)\";\n    trackLineWidth = 0.75;\n    trackLineColor = \"rgb(128, 192, 128)\";\n    trackLineSpan = 12;\n    scrollX = 6 * 3600 * 0.08;\n    scrollY = 0;\n    xScale = 0.08;\n    yScale = 10;\n    trainPathWidth = 1;\n    trainPathColor = \"rgb(0, 0, 0)\";\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any): DiagramConfig {\n        if (!(o && typeof o == \"object\")) {\n            throw \"Invalid JSON\";\n        }\n        const dc = new DiagramConfig();\n        Object.assign(dc, o);\n        return dc;\n    }\n}","import Station from \"./Station\";\n\nexport default class Track {\n    constructor(\n        public readonly station: Station,\n        public readonly id: number, \n        public name: string,\n        public relY = 0,\n    ) {}\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any, station: Station): Track {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.id != null)) {\n            throw \"Invalid JSON @ Track\";\n        }\n        return new Track(station, o.id, o.name, o.relY);\n    }\n\n    toJSON(): unknown {\n        return {\n            id: this.id,\n            name: this.name,\n        };\n    }\n}","import Track from \"./Track\";\n\nexport default class Station {\n    constructor(\n        public readonly id: number, \n        public name: string,\n        public mileage: number,\n        public expanded = false,\n        public topRelY = 0,\n        public bottomRelY = 0\n    ) {}\n    readonly tracks: Track[] = [];\n\n    addNewTrack(track: Track, index: number = this.tracks.length): Track {\n        this.tracks.splice(index, 0, track);\n        return this.tracks[index];\n    }\n\n    removeTrack(t: Track): void {\n        const index = this.tracks.indexOf(t);\n        if (index >= 0) this.tracks.splice(index, 1);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any): Station {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.id != null && o.name != null && o.mileage != null && Array.isArray(o.tracks))) {\n            throw \"Invalid JSON @ Station\"\n        }\n        const station = new Station(o.id, o.name, o.mileage, o.expanded);\n        (o.tracks as any[]).map((t: any) => Track.fromJSON(t, station))\n            .forEach(t => station.tracks.push(t));\n        return station;\n    }\n\n    toJSON(): unknown {\n        return {\n            id: this.id,\n            name: this.name,\n            mileage: this.mileage,\n            tracks: this.tracks,\n            expanded: this.expanded,\n        };\n    }\n}\n","import Station from \"./Station\";\nimport Track from \"./Track\";\nimport Train from \"./Train\";\n\nexport default class StopEvent {\n    constructor(\n        public readonly train: Train,\n        public track: Track,\n        public time: number\n    ) {}\n    privateId: number = ++StopEvent.maxPrivateId;\n    static maxPrivateId = 0;\n\n    get station(): Station {\n        return this.track.station;\n    }\n    get next(): StopEvent | undefined {\n        const index = this.train.stevs.indexOf(this);\n        return index >= 0 ? this.train.stevs[index + 1] : undefined;\n    }\n    get prev(): StopEvent | undefined {\n        const index = this.train.stevs.indexOf(this);\n        return index >= 0 ? this.train.stevs[index - 1] : undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSONStop(o: any, train: Train, stations: { [id: number]: Station }): StopEvent[] {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.stationId != null && o.trackId != null && o.arrTime != null && o.depTime != null)) {\n            throw \"Invalid JSON @ Stop\";\n        }\n        const station = stations[o.stationId];\n        const track = station && station.tracks.find(t => t.id == o.trackId);\n        if (!(station && track)) {\n            throw \"Invalid data @ Stop\";\n        }\n        return o.arrTime == o.depTime ?\n            [ new StopEvent(train, track, o.arrTime) ] :\n            [ new StopEvent(train, track, o.arrTime), new StopEvent(train, track, o.depTime) ];\n    }\n}\n\nexport interface StopEventRange {\n    from: StopEvent;\n    to: StopEvent;\n}\n","import Station from \"./Station\";\nimport StopEvent, { StopEventRange } from \"./StopEvent\";\n\nexport default class Train {\n    constructor(\n        public readonly id: number, \n        public name: string,\n    ) {}\n    stevs: StopEvent[] = [];\n\n    addNewStopEvent(stev: StopEvent, index: number = this.stevs.length): StopEvent {\n        this.stevs.splice(index, 0, stev);\n        return this.stevs[index];\n    }\n\n    removeStopEvent(stev: StopEvent): void {\n        const index = this.stevs.indexOf(stev);\n        if (index >= 0) this.stevs.splice(index, 1);\n    }\n\n    getStopEventsInRange(stevRange: StopEventRange): StopEvent[] {\n        const result = [];\n        let inRange = false;\n        for (const stev of this.stevs) {\n            if (stev == stevRange.from) inRange = true;\n            if (inRange) result.push(stev);\n            if (stev == stevRange.to) inRange = false;\n        }\n        return result;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any, stations: { [id: number]: Station }): Train {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.id != null && o.name != null && Array.isArray(o.stops))) {\n            throw \"Invalid JSON @ Train\";\n        }\n        const train = new Train(o.id, o.name);\n        (o.stops as any[]).flatMap((s: any) => StopEvent.fromJSONStop(s, train, stations))\n            .forEach(stev => train.stevs.push(stev));\n        return train;\n    }\n\n    toJSON(): unknown {\n        const stops: { stationId: number, trackId: number, arrTime: number, depTime: number }[] = [];\n        for (const stev of this.stevs) {\n            const lastStop = stops[stops.length - 1];\n            if (lastStop && lastStop.trackId == stev.track.id && lastStop.arrTime == lastStop.depTime) {\n                lastStop.depTime = stev.time;\n            } else {\n                stops.push({ \n                    stationId: stev.station.id, \n                    trackId: stev.track.id, \n                    arrTime: stev.time, \n                    depTime: stev.time \n                });\n            }\n        }\n        return {\n            id: this.id,\n            name: this.name,\n            stops: stops\n        };\n    }\n}\n","import Vue from \"vue\";\nimport DiagramConfig from \"./DiagramConfig\";\nimport Station from \"./Station\";\nimport Train from \"./Train\";\n\nexport default class Diagram {\n    constructor(\n        public config: DiagramConfig,\n        public stations: { [id: number]: Station },\n        public trains: { [id: number]: Train },\n    ) {}\n    maxId = 0;\n    maxRelY = 0;\n    \n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any): Diagram {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && typeof o.stations == \"object\" && typeof o.trains == \"object\")) {\n            throw \"Invalid JSON\";\n        }\n        const config = DiagramConfig.fromJSON(o.config || {});\n        const stations: { [id: number]: Station } = Object.fromEntries(Object.values(o.stations).map((s: any) => [ s.id, Station.fromJSON(s) ]));\n        const trains: { [id: number]: Train } = Object.fromEntries(Object.values(o.trains).map((t: any) => [ t.id, Train.fromJSON(t, stations) ]));\n        const diagram = new Diagram(config, stations, trains);\n\n        let maxId = o.maxId ? Math.max(o.maxId, 0) : 0;\n        for (const s of Object.values(stations)) {\n            maxId = Math.max(s.id, maxId);\n            for (const t of s.tracks) {\n                maxId = Math.max(t.id, maxId);\n            }\n        }\n        for (const t of Object.values(trains)) {\n            maxId = Math.max(t.id, maxId);\n        }\n        diagram.maxId = maxId;\n\n        diagram.updateY();\n\n        return diagram;\n    }\n\n    getYByRelY(relY: number): number {\n        return relY + this.config.topPaneHeight - this.config.scrollY;\n    }\n    getRelYByY(y: number): number {\n        return y - this.config.topPaneHeight + this.config.scrollY;\n    }\n    getXByTime(time: number): number {\n        return time * this.config.xScale + this.config.leftPaneWidth - this.config.scrollX;\n    }\n    getTimeByX(x: number): number {\n        return (x - this.config.leftPaneWidth + this.config.scrollX) / this.config.xScale;\n    }\n\n    getStationsInMileageOrder(): Station[] {\n        return Object.values(this.stations).sort((a, b) => a.mileage - b.mileage);\n    }\n\n    genId(): number {\n        return ++this.maxId;\n    }\n    releaseId(id: number): void {\n        if (id == this.maxId) --this.maxId;\n    }\n\n    addNewStation(station: Station): Station {\n        return Vue.set(this.stations, station.id, station);\n    }\n    removeStation(station: Station): void {\n        Vue.delete(this.stations, station.id);\n    }\n    addNewTrain(train: Train): Train {\n        return Vue.set(this.trains, train.id, train);\n    }\n    removeTrain(train: Train): void {\n        Vue.delete(this.trains, train.id);\n    }\n\n    updateY(): void {\n        if (Object.keys(this.stations).length == 0) {\n            this.maxRelY = 0;\n            return;\n        }\n\n        const stations = this.getStationsInMileageOrder();\n    \n        const initialMileage = stations[0].mileage;\n        for (const s of stations) {\n          s.mileage = s.mileage - initialMileage;\n        }\n    \n        let y = this.config.plotPaneVerticalPadding;\n        let lastMileage = 0;\n        for (const s of stations) {\n          y += (s.mileage - lastMileage) * this.config.yScale;\n          s.topRelY = y;\n          if (s.expanded) {\n            s.tracks.forEach((t, i) => {\n              t.relY = y + (i + 1) * this.config.trackLineSpan;\n            });\n            s.bottomRelY = y + (s.tracks.length + 1) * this.config.trackLineSpan;\n            y += (s.tracks.length + 1) * this.config.trackLineSpan;\n          } else {\n            Object.values(s.tracks).forEach(t => t.relY = y);\n            s.bottomRelY = y;\n          }\n          lastMileage = s.mileage;\n        }\n    \n        this.maxRelY = stations[stations.length - 1].bottomRelY + this.config.plotPaneVerticalPadding;\n      }\n    \n    toJSON(): unknown {\n        return {\n            config: this.config,\n            stations: this.stations,\n            trains: this.trains,\n        };\n    }\n}","export default class ViewConfig {\n    minHitWidth = 3;\n    pointerWidth = 3;\n    pointerColor = \"rgb(0, 0, 0)\";\n    pointerLabelFontSize = 12;\n    pointerPrecisePixelPerTimeUnit = 5;\n    selectedTrackLabelColor = \"rgb(255, 0, 0)\";\n    selectedTrackLineColor = \"rgb(255, 0, 0)\";\n    selectedTrainPathColor = \"rgb(255, 0, 0)\";\n    selectedTrainPathWidthScale = 1.5;\n    selectedTrainPathMarkerWidth = 5;\n    selectedTrainPathMarkerColor = \"rgb(255, 0, 0)\";\n    unselectedTrainPathOpacity = 0.5;\n    markerLabelMaxDistance = 20;\n    markerLabelColor = \"rgb(255, 0, 0)\";\n    markerLabelFontSize = 12;\n    markerLabelLineHeight = 16;\n    wheelScale = 0.1;\n    editMode = true;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diagram-view\"},[_c('stage',{staticClass:\"diagram-view-stage\",on:{\"updateY\":_vm.updateY,\"stationNameInputStart\":_vm.onStationNameInputStart,\"trackNameInputStart\":_vm.onTrackNameInputStart}}),_c('div',{staticClass:\"diagram-view-ui\"},[_c('station-name-input',{ref:\"stationNameInput\"}),_c('track-name-input',{ref:\"trackNameInput\"}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-expand-button',{key:(\"station-expand-button-\" + (s.id)),attrs:{\"station\":s},on:{\"updateY\":_vm.updateY,\"trackNameInputStart\":_vm.onTrackNameInputStart}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-remove-button',{key:(\"station-remove-button-\" + (s.id)),attrs:{\"station\":s},on:{\"updateY\":_vm.updateY}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-add-track-button',{key:(\"station-add-track-button-\" + (s.id)),attrs:{\"station\":s},on:{\"updateY\":_vm.updateY,\"trackNameInputStart\":_vm.onTrackNameInputStart}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _vm._l((s.tracks),function(t){return _c('station-remove-track-button',{key:(\"station-remove-track-button-\" + (s.id) + \"-\" + (t.id)),attrs:{\"station\":s,\"track\":t},on:{\"updateY\":_vm.updateY}})})})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Station from \"./Station\";\nimport StopEvent, { StopEventRange } from \"./StopEvent\";\nimport Track from \"./Track\";\nimport Train from \"./Train\";\n\nexport interface TrainSelectionState {\n    train: Train;\n    stevRange: StopEventRange | null;\n}\n\nexport default class ViewState {\n    viewWidth = 0;\n    viewHeight = 0;\n    trainSelections: { [trainId: number]: TrainSelectionState } = {};\n    pointerScreenX = 0;\n    pointerTime = 0;\n    pointerY = 0;\n    pointerTargetTrainPath: { train: Train, stevRange: StopEventRange } | null = null;\n    pointerTargetLine: { station: Station, track: Track | null, relY: number } | null = null;\n    pointerPreciseState: { sx0: number, t0: number } | null = null;\n    drawingState: {\n        train: Train,\n        lastStev: StopEvent,\n        direction: number,\n        stableEnd: StopEvent | null,\n        floating: StopEvent | null\n    } | null = null;\n    trainPathDragState: { \n        dragging: boolean,\n        targets: { [trainId: number]: TrainSelectionState },\n        timeShift: number \n    } | null = null;\n    stationNameInputTarget: Station | null = null;\n    trackNameInputTarget: Track | null = null;\n    controlKeyPressed = false;\n\n    get busy(): boolean {\n        return this.drawingState != null || \n            this.trainPathDragState != null ||\n            this.inputEnabled;\n    }\n\n    get inputEnabled(): boolean {\n        return this.stationNameInputTarget != null || this.trackNameInputTarget != null;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.diagram)?_c('v-stage',{attrs:{\"config\":_vm.stageConfig},on:{\"mousedown\":_vm.onStageMouseDown,\"mousemove\":_vm.onStageMouseMove,\"click\":_vm.onStageClick,\"dblclick\":_vm.onStageDoubleClick,\"wheel\":_vm.onStageMouseWheel,\"contextmenu\":_vm.onContextMenu}},[_c('back-layer',_vm._g({},_vm.$listeners)),_c('train-path-layer'),_c('v-layer',[_c('pointer')],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layer',{attrs:{\"id\":\"back-layer\"}},[_vm._l((_vm.timeGridLines),function(t){return _c('v-group',{key:t.key},[_c('v-line',{attrs:{\"config\":t.lineConfig}}),(t.labelConfig)?_c('v-text',{attrs:{\"config\":t.labelConfig}}):_vm._e()],1)}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-group',_vm._g({key:(\"station-\" + (s.id)),attrs:{\"station\":s}},_vm.$listeners))})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[(_vm.isTopLineIntersectingPlotPane)?_c('v-group',[_c('v-line',{attrs:{\"config\":_vm.topLineConfig}}),_vm._l((_vm.labelCharacters),function(c){return _c('v-text',{key:c.key,attrs:{\"config\":c}})}),_c('v-rect',{attrs:{\"config\":_vm.labelRectConfig},on:{\"click\":_vm.onStationLabelClick,\"mousedown\":_vm.onStationLabelMouseDown}})],2):_vm._e(),(_vm.station.expanded && _vm.isBottomLineIntersectingPlotPane)?_c('v-line',{attrs:{\"config\":_vm.bottomLineConfig}}):_vm._e(),(_vm.station.expanded)?_vm._l((_vm.station.tracks),function(t){return _c('track-group',_vm._g({key:(\"track-\" + (_vm.station.id) + \"-\" + (t.id)),attrs:{\"station\":_vm.station,\"track\":t}},_vm.$listeners))}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLineIntersectingPlotPane)?_c('v-group',[_c('v-line',{attrs:{\"config\":_vm.lineConfig}}),_c('v-text',{attrs:{\"config\":_vm.labelConfig},on:{\"click\":_vm.onLabelClick,\"mousedown\":_vm.onLabelMouseDown}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, Inject, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\nimport Station from \"@/data/Station\";\nimport Track from \"@/data/Track\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\n@Component\nexport default class TrackGroup extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n  @Prop() station!: Station;\n  @Prop() track!: Track;\n\n  dragState: { sy0: number, index0: number, dragging: boolean } | null = null;\n\n  get lineConfig(): unknown {\n    return {\n      points: [\n        this.diagram.config.stationLabelLeftMargin + this.diagram.config.trackLabelLeftMargin, \n        this.diagram.getYByRelY(this.track.relY), \n        this.viewState.viewWidth, \n        this.diagram.getYByRelY(this.track.relY)\n      ],\n      stroke: this.diagram.config.trackLineColor,\n      strokeWidth: this.diagram.config.trackLineWidth,\n      listening: false,\n    }\n  }\n\n  get labelConfig(): unknown {\n    return {\n      id: `track-label-${this.station.id}-${this.track.id}`,\n      x: this.diagram.config.stationLabelLeftMargin + this.diagram.config.trackLabelLeftMargin,\n      y: this.diagram.getYByRelY(this.track.relY) - this.diagram.config.trackLabelFontSize,\n      width: this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelLeftMargin - this.diagram.config.trackLabelLeftMargin - this.diagram.config.stationLabelRightMargin,\n      height: this.diagram.config.trackLabelFontSize,\n      text: this.track.name,\n      fontSize: this.diagram.config.trackLabelFontSize,\n      fontFamily: this.diagram.config.fontFamily,\n      fill: this.diagram.config.trackLabelColor,\n      align: \"left\",\n      verticalAlign: \"bottom\",\n    }\n  }\n\n  get isLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.track.relY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.track.relY) < this.viewState.viewHeight;\n  }\n\n  onLabelClick(): void {\n    if (this.viewConfig.editMode && !this.viewState.busy) {\n      this.viewState.trackNameInputTarget = this.track;\n      this.$emit(\"trackNameInputStart\");\n    }\n  }\n\n  onLabelMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewConfig.editMode) {\n      this.dragState = { \n        sy0: konvaEvent.evt.screenY, \n        index0: this.station.tracks.indexOf(this.track), \n        dragging: false \n      };\n      window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    }\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState) {\n      if (Math.abs(event.screenY - this.dragState.sy0) > 1) {\n        this.dragState.dragging = true;\n      }\n      if (this.dragState.dragging) {\n        const currentIndex = this.station.tracks.findIndex(t => t.id == this.track.id);\n        this.station.tracks.splice(currentIndex, 1);\n\n        const mouseRelY = this.diagram.getRelYByY(event.clientY);\n        const newIndex = this.station.tracks.findIndex(t => mouseRelY < t.relY);\n        if (newIndex < 0) {\n          this.station.tracks.push(this.track);\n        } else {\n          this.station.tracks.splice(newIndex, 0, this.track);\n        }\n        this.$emit(\"updateY\");\n      }\n    }\n  }\n\n  onWindowMouseUp(event: MouseEvent): void {\n    if (this.dragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      this.onWindowMouseMove(event);\n\n      const index0 = this.dragState.index0;\n      const index1 = this.station.tracks.indexOf(this.track);\n      if (index0 != index1) {\n        this.historyManager.push({\n          undo: () => { \n            this.station.removeTrack(this.track); \n            this.station.addNewTrack(this.track, index0); \n          },\n          redo: () => {\n            this.station.removeTrack(this.track); \n            this.station.addNewTrack(this.track, index1); \n          }\n        });\n      }\n\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrackGroup.vue?vue&type=template&id=04365208&scoped=true&\"\nimport script from \"./TrackGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrackGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04365208\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Inject, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\nimport TrackGroup from \"./TrackGroup.vue\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\n@Component({\n  components: {\n    TrackGroup\n  },\n})\nexport default class StationGroup extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n  @Prop() station!: Station;\n\n  dragState: { sy0: number, mileage0: number, dragging: boolean } | null = null;\n\n  get topLineConfig(): unknown {\n    return {\n      points: [\n        0, \n        this.diagram.getYByRelY(this.station.topRelY), \n        this.viewState.viewWidth, \n        this.diagram.getYByRelY(this.station.topRelY)\n      ],\n      stroke: this.diagram.config.stationLineColor,\n      strokeWidth: this.diagram.config.stationLineWidth,\n      listening: false,\n    }\n  }\n\n  get bottomLineConfig(): unknown {\n    return {\n      points: [\n        0, \n        this.diagram.getYByRelY(this.station.bottomRelY), \n        this.viewState.viewWidth, \n        this.diagram.getYByRelY(this.station.bottomRelY)\n      ],\n      stroke: this.diagram.config.stationLineColor,\n      strokeWidth: this.diagram.config.stationLineWidth,\n      listening: false,\n    }\n  }\n\n  get labelRectConfig(): unknown {\n    return {\n      id: `station-label-${this.station.id}`,\n      x: this.diagram.config.stationLabelLeftMargin,\n      y: this.diagram.getYByRelY(this.station.topRelY) - this.diagram.config.stationLabelFontSize,\n      width: this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelLeftMargin - this.diagram.config.stationLabelRightMargin,\n      height: this.diagram.config.stationLabelFontSize,\n    };\n  }\n\n  get labelCharacters(): unknown {\n    const widthForChars = this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelLeftMargin - this.diagram.config.stationLabelRightMargin - this.diagram.config.stationLabelFontSize;\n    const charSpan = this.station.name.length > 1 ? widthForChars / (this.station.name.length - 1) : 0;\n    return Array.from(this.station.name).map((c, index) => {\n      return {\n        key: `station-label-${this.station.id}-${index}`,\n        x: this.station.name.length > 1 ? \n            this.diagram.config.stationLabelLeftMargin + index * charSpan :\n            this.diagram.config.stationLabelLeftMargin + widthForChars * 0.5,\n        y: this.diagram.getYByRelY(this.station.topRelY) - this.diagram.config.stationLabelFontSize,\n        height: this.diagram.config.stationLabelFontSize,\n        text: c,\n        fontSize: this.diagram.config.stationLabelFontSize,\n        fontFamily: this.diagram.config.fontFamily,\n        fill: this.diagram.config.stationLabelColor,\n        align: \"left\",\n        verticalAlign: \"bottom\",\n      }\n    });\n  }\n\n  get isTopLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.station.topRelY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.station.topRelY) < this.viewState.viewHeight;\n  }\n\n  get isBottomLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.station.bottomRelY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.station.bottomRelY) < this.viewState.viewHeight;\n  }\n\n  onStationLabelClick(): void {\n    if (this.viewConfig.editMode && !this.viewState.busy) {\n      this.viewState.stationNameInputTarget = this.station;\n      this.$emit(\"stationNameInputStart\");\n    }\n  }\n\n  onStationLabelMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewConfig.editMode && !this.viewState.inputEnabled) {\n      this.dragState = {\n        sy0: konvaEvent.evt.screenY,\n        mileage0: this.station.mileage,\n        dragging: false,\n      };\n      window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    }\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState) {\n      if (Math.abs(event.screenY - this.dragState.sy0) > 1) {\n        this.dragState.dragging = true;\n      }\n      if (this.dragState.dragging) {\n        this.station.mileage = this.dragState.mileage0 + (event.screenY - this.dragState.sy0) / this.diagram.config.yScale;\n        this.$emit(\"updateY\");\n      }\n    }\n  }\n\n  onWindowMouseUp(event: MouseEvent): void {\n    if (this.dragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      this.onWindowMouseMove(event);\n\n      if (this.dragState.dragging) {\n        const mileage0 = this.dragState.mileage0;\n        const mileage1 = this.station.mileage;\n        this.historyManager.push({\n          undo: () => { this.station.mileage = mileage0; },\n          redo: () => { this.station.mileage = mileage1; }\n        });\n      }\n\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationGroup.vue?vue&type=template&id=73c79956&scoped=true&\"\nimport script from \"./StationGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73c79956\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport Diagram from \"@/data/Diagram\";\nimport ViewState from \"@/data/ViewState\";\nimport StationGroup from \"./StationGroup.vue\";\n\n@Component({\n  components: {\n    StationGroup\n  },\n})\nexport default class BackLayer extends Vue {\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n\n  get timeGridLines(): unknown {\n    const lines = [];\n    const scrollLeftTime = this.diagram.config.scrollX / this.diagram.config.xScale;\n    let t = Math.ceil(scrollLeftTime / this.diagram.config.minorMinutelyGridLineSpan) * this.diagram.config.minorMinutelyGridLineSpan;\n    let x = t * this.diagram.config.xScale - this.diagram.config.scrollX + this.diagram.config.leftPaneWidth;\n    while (x < this.viewState.viewWidth) {\n      lines.push({\n        key: `time-grid-line-${lines.length}`,\n        lineConfig: {\n          points: [\n            x,\n            this.diagram.config.topPaneHeight,\n            x,\n            this.viewState.viewHeight\n          ],\n          stroke:\n            t % 3600 == 0 ? this.diagram.config.hourlyGridLineColor :\n            t % this.diagram.config.majorMinutelyGridLineSpan == 0 ? this.diagram.config.majorMinutelyGridLineColor :\n            this.diagram.config.minorMinutelyGridLineColor,\n          strokeWidth: \n            t % 3600 == 0 ? this.diagram.config.hourlyGridLineWidth :\n            t % this.diagram.config.majorMinutelyGridLineSpan == 0 ? this.diagram.config.majorMinutelyGridLineWidth :\n            this.diagram.config.minorMinutelyGridLineWidth,\n          listening: false,\n        },\n        labelConfig: t % 3600 != 0 ? null : {\n          x: x - this.diagram.config.hourlyLabelFontSize,\n          y: this.diagram.config.topPaneHeight - this.diagram.config.hourlyLabelBottomMargin - this.diagram.config.hourlyLabelFontSize,\n          width: this.diagram.config.hourlyLabelFontSize * 2,\n          height: this.diagram.config.hourlyLabelFontSize,\n          text: `${ t / 3600 % 24 }`,\n          fontSize: this.diagram.config.hourlyLabelFontSize,\n          fontFamily: this.diagram.config.fontFamily,\n          fill: this.diagram.config.hourlyLabelColor,\n          align: \"center\",\n          verticalAlign: \"bottom\",\n        }\n      });\n      t += this.diagram.config.minorMinutelyGridLineSpan;\n      x = t * this.diagram.config.xScale - this.diagram.config.scrollX + this.diagram.config.leftPaneWidth;\n    }\n    return lines;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BackLayer.vue?vue&type=template&id=654ee79b&scoped=true&\"\nimport script from \"./BackLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./BackLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"654ee79b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.pointerEnabled)?_c('v-group',[_c('v-rect',{attrs:{\"config\":_vm.rectConfig}}),_c('v-text',{attrs:{\"config\":_vm.labelConfig}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getTimeText(time: number, forceSec?: boolean): string {\n    const hStr = `${Math.floor(time / 3600)}`;\n    const mmStr = `${Math.floor(time / 60) % 60}`.padStart(2, \"0\");\n    const ssStr = `${time % 60}`.padStart(2, \"0\");\n    return time % 60 != 0 || forceSec ? `${hStr}:${mmStr}:${ssStr}` : `${hStr}:${mmStr}`;\n}\n","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport { getTimeText } from \"@/utils\";\nimport Diagram from \"@/data/Diagram\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class TrainPathGroup extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n\n  get pointerEnabled(): unknown {\n    return this.viewState.pointerTargetLine && !this.viewState.pointerTargetTrainPath &&\n      !this.viewState.trainPathDragState && !this.viewState.drawingState;\n  }\n\n  get rectConfig(): unknown {\n    const width = this.viewState.drawingState ? this.viewConfig.selectedTrainPathMarkerWidth : this.viewConfig.pointerWidth;\n    return {\n      x: this.diagram.getXByTime(this.viewState.pointerTime) - width * 0.5,\n      y: this.viewState.pointerY - width * 0.5,\n      width: width,\n      height: width,\n      fill: this.viewConfig.pointerColor,\n      listening: false,\n    };\n  }\n\n  get labelConfig(): unknown {\n    const time = this.viewState.pointerTime >= 0 ? \n      this.viewState.pointerTime : \n      this.viewState.pointerTime + Math.ceil(-this.viewState.pointerTime / 3600) * 3600;\n    return {\n      x: this.diagram.getXByTime(this.viewState.pointerTime),\n      y: this.viewState.pointerY - this.viewConfig.pointerLabelFontSize,\n      height: this.viewConfig.pointerLabelFontSize,\n      text: getTimeText(time, this.viewState.pointerPreciseState != null),\n      fontSize: this.viewConfig.pointerLabelFontSize,\n      fontFamily: this.diagram.config.fontFamily,\n      fill: this.viewConfig.pointerColor,\n      align: \"left\",\n      verticalAlign: \"bottom\",\n      listening: false,\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Pointer.vue?vue&type=template&id=3766b4d0&scoped=true&\"\nimport script from \"./Pointer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Pointer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3766b4d0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layer',{ref:\"trainPathLayer\",attrs:{\"id\":\"train-path-layer\",\"config\":_vm.layerConfig}},[_vm._l((Object.values(_vm.diagram.trains).filter(function (t) { return !_vm.viewState.trainSelections[t.id]; })),function(t){return _c('train-path-group',{key:(\"train-\" + (t.id)),attrs:{\"train\":t}})}),_vm._l((Object.values(_vm.diagram.trains).filter(function (t) { return _vm.viewState.trainSelections[t.id]; })),function(t){return _c('train-path-group',{key:(\"train-\" + (t.id)),attrs:{\"train\":t}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-line',{attrs:{\"config\":_vm.regularTrainPathConfig},on:{\"click\":_vm.onTrainPathClick,\"mousemove\":_vm.onTrainPathMouseMove}}),(_vm.selectedTrainPathEnabled)?[_c('v-line',{attrs:{\"config\":_vm.selectedTrainPathConfig},on:{\"click\":_vm.onSelectedTrainPathClick,\"dblclick\":_vm.onSelectedTrainPathDoubleClick,\"mousedown\":_vm.onSelectedTrainPathMouseDown,\"mousemove\":_vm.onSelectedTrainPathMouseMove}}),_vm._l((_vm.selectedTrainPathNodes),function(n){return _c('train-path-marker',{key:(\"marker-\" + (_vm.train.id) + \"-\" + (n.stev.privateId) + \"-\" + (n.phase)),attrs:{\"trainPathNode\":n},on:{\"click\":_vm.onMarkerClick,\"mousedown\":_vm.onMarkerMouseDown}})})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-rect',{attrs:{\"config\":_vm.rectConfig},on:{\"click\":function($event){return _vm.$emit('click', $event, _vm.trainPathNode)},\"mousemove\":_vm.onRectMouseMove,\"mousedown\":function($event){return _vm.$emit('mousedown', $event, _vm.trainPathNode)},\"dblclick\":_vm.onRectDoubleClick}}),(_vm.labelEnabled)?_c('v-text',{attrs:{\"config\":_vm.labelConfig}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport { getTimeText } from \"@/utils\";\nimport Diagram from \"@/data/Diagram\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\nimport TrainPathNode from \"@/data/TrainPathNode\";\n\n@Component\nexport default class TrainPathMarker extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Prop() trainPathNode!: TrainPathNode;\n\n  get rectConfig(): unknown {\n    return {\n      x: this.diagram.getXByTime(this.trainPathNode.time) - this.viewConfig.selectedTrainPathMarkerWidth * 0.5,\n      y: this.diagram.getYByRelY(this.trainPathNode.relY) - this.viewConfig.selectedTrainPathMarkerWidth * 0.5,\n      width: this.viewConfig.selectedTrainPathMarkerWidth,\n      height: this.viewConfig.selectedTrainPathMarkerWidth,\n      fill: this.viewConfig.selectedTrainPathMarkerColor,\n    };\n  }\n\n  get labelEnabled(): boolean {\n    return this.trainPathNode.phase == \"track\";\n  }\n\n  get labelConfig(): unknown {\n    const labelPosition = this.getLabelPosition();\n    return {\n      x: this.diagram.getXByTime(this.trainPathNode.time) + labelPosition.x - this.viewConfig.markerLabelFontSize * 8,\n      y: this.diagram.getYByRelY(this.trainPathNode.relY) + labelPosition.y - this.viewConfig.markerLabelLineHeight,\n      width: this.viewConfig.markerLabelFontSize * 8,\n      height: this.viewConfig.markerLabelLineHeight,\n      text: getTimeText(this.trainPathNode.time, this.viewState.pointerPreciseState != null),\n      fontSize: this.viewConfig.pointerLabelFontSize,\n      fontFamily: this.diagram.config.fontFamily,\n      fill: this.viewConfig.markerLabelColor,\n      align: \"right\",\n      verticalAlign: \"bottom\",\n      listening: false,\n    }\n  }\n\n  getLabelPosition(): { x: number, y: number } {\n    const thisStev = this.trainPathNode.stev;\n    const prevStev = thisStev.prev;\n    const nextStev = thisStev.next;\n    if (prevStev && prevStev.track != thisStev.track && (!nextStev || nextStev.track == thisStev.track)) {\n      const thisRelY = prevStev.station.mileage < thisStev.station.mileage ? thisStev.station.topRelY : thisStev.station.bottomRelY;\n      const prevRelY = prevStev.station.mileage < thisStev.station.mileage ? prevStev.station.bottomRelY : prevStev.station.topRelY;\n      const x = thisRelY == prevRelY ? 0:\n        -this.viewConfig.markerLabelLineHeight *\n        ((thisStev.time - prevStev.time) * this.diagram.config.xScale) /\n        Math.abs(thisRelY - prevRelY);\n      return {\n        x: Math.max(x, -this.viewConfig.markerLabelMaxDistance),\n        y: prevStev.station.mileage < thisStev.station.mileage ? 0 : this.viewConfig.markerLabelLineHeight\n      };\n    }\n\n    return {\n      x: 0,\n      y: nextStev && nextStev.station.mileage < thisStev.station.mileage || prevStev && prevStev.station.mileage > thisStev.station.mileage ? 0 : this.viewConfig.markerLabelLineHeight,\n    };\n  }\n\n  onRectMouseMove(): void {\n    this.viewState.pointerTargetTrainPath = {\n      train: this.trainPathNode.stev.train,\n      stevRange: { from: this.trainPathNode.stev, to: this.trainPathNode.stev }\n    };\n  }\n\n  onRectDoubleClick(): void {\n    if (this.viewConfig.editMode) {\n      if (!this.viewState.drawingState) {\n        const n = this.trainPathNode;\n        if (!n.stev.prev) {\n          this.viewState.drawingState = {\n            train: n.stev.train,\n            lastStev: n.stev,\n            direction: -1,\n            stableEnd: n.stev,\n            floating: null\n          };\n          this.viewState.trainSelections[n.stev.train.id].stevRange = null;\n        } else if (!n.stev.next) {\n          this.viewState.drawingState = {\n            train: n.stev.train,\n            lastStev: n.stev,\n            direction: 1,\n            stableEnd: n.stev,\n            floating: null\n          };\n          this.viewState.trainSelections[n.stev.train.id].stevRange = null;\n        }\n      } else {\n        this.viewState.drawingState = null;\n        this.viewState.trainSelections = {};\n      }\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathMarker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathMarker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathMarker.vue?vue&type=template&id=40df1b93&scoped=true&\"\nimport script from \"./TrainPathMarker.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathMarker.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40df1b93\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Inject, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport StopEvent, { StopEventRange } from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport TrainPathNode from \"@/data/TrainPathNode\";\nimport Train from \"@/data/Train\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\nimport TrainPathMarker from \"./TrainPathMarker.vue\";\n\n@Component({\n  components: {\n    TrainPathMarker\n  },\n})\nexport default class TrainPathGroup extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n  @Prop() train!: Train;\n\n  dragState: { \n    t0: number, \n    y0: number,\n    sx0: number, \n    sy0: number,\n    track0: Track | null,\n    minTimeShift: number,\n    maxTimeShift: number,\n    changeTimeTargets: StopEvent[] | null,\n    changeTrackTargets: StopEvent[] | null,\n  } | null = null;\n\n  get regularTrainPathConfig(): unknown {\n    return {\n      points: this.regularTrainPathNodes.flatMap(n => [this.diagram.getXByTime(n.time), this.diagram.getYByRelY(n.relY)]),\n      stroke: this.diagram.config.trainPathColor,\n      opacity: Object.keys(this.viewState.trainSelections).length > 0 ? this.viewConfig.unselectedTrainPathOpacity : 1,\n      strokeWidth: this.diagram.config.trainPathWidth,\n      hitStrokeWidth: Math.max(this.diagram.config.trainPathWidth, this.viewConfig.minHitWidth * 2),\n    }\n  }\n\n  get regularTrainPathNodes(): TrainPathNode[] {\n    return this.getTrainPathNodes(\"regular\");\n  }\n\n  get selectedTrainPathEnabled(): boolean {\n    return this.viewState.trainSelections[this.train.id] != null;\n  }\n\n  get selectedTrainPathConfig(): unknown {\n    return {\n      points: this.selectedTrainPathNodes.flatMap(n => [this.diagram.getXByTime(n.time), this.diagram.getYByRelY(n.relY)]),\n      stroke: this.viewConfig.selectedTrainPathColor,\n      strokeWidth: this.diagram.config.trainPathWidth * this.viewConfig.selectedTrainPathWidthScale,\n      hitStrokeWidth: Math.max(this.diagram.config.trainPathWidth * this.viewConfig.selectedTrainPathWidthScale, this.viewConfig.minHitWidth * 2)\n    };\n  }\n\n  get selectedTrainPathNodes(): TrainPathNode[] {\n    return this.getTrainPathNodes(\"selected\");\n  }\n\n  getTrainPathNodes(mode: \"regular\" | \"selected\"): TrainPathNode[] {\n    const sel = this.viewState.trainSelections[this.train.id];\n    const stevs = mode == \"selected\" && sel.stevRange != null ? \n      this.train.getStopEventsInRange(sel.stevRange) : this.train.stevs;\n\n    const shiftEnabled = this.viewState.trainPathDragState?.targets[this.train.id] && (mode == \"selected\" || !this.viewState.controlKeyPressed);\n    const shiftTime = this.viewState.trainPathDragState?.timeShift ?? 0;\n    const shiftRange = this.viewState.trainPathDragState?.targets[this.train.id]?.stevRange;\n    let inShiftRange = shiftEnabled && !shiftRange;\n\n    const result: TrainPathNode[] = [];\n    for (const stev of stevs) {\n      if (shiftEnabled && stev == shiftRange?.from) inShiftRange = true;\n      const time = inShiftRange ? stev.time + shiftTime : stev.time;\n      if (stev.station.expanded && stev.prev && stev.prev.station != stev.station) {\n        result.push({ \n          stev, \n          phase: \"arr\",\n          time, \n          relY: stev.prev.station.mileage < stev.station.mileage ? stev.station.topRelY : stev.station.bottomRelY\n        });\n      }\n      result.push({\n        stev,\n        phase: \"track\",\n        time,\n        relY: stev.track.relY\n      });\n      if (stev.station.expanded && stev.next && stev.next.station != stev.station) {\n        result.push({ \n          stev, \n          phase: \"dep\",\n          time, \n          relY: stev.next.station.mileage < stev.station.mileage ? stev.station.topRelY : stev.station.bottomRelY\n        });\n      }\n      if (shiftEnabled && stev == shiftRange?.to) inShiftRange = false;\n    }\n    return result;\n  }\n\n  onTrainPathMouseMove(): void {\n    this.viewState.pointerTargetTrainPath = null;\n  }\n\n  onSelectedTrainPathMouseMove(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    this.viewState.pointerTargetTrainPath = { \n      train: this.train, \n      stevRange: this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY)\n    };\n  }\n\n  onTrainPathClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const clickedStopRange = this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    this.changeTrainSelections(konvaEvent, clickedStopRange, false);\n  }\n\n  onSelectedTrainPathClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const clickedStopRange = this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    this.changeTrainSelections(konvaEvent, clickedStopRange, true);\n  }\n\n  onMarkerClick(konvaEvent: KonvaEventObject<MouseEvent>, trainPathNode: TrainPathNode): void {\n    const clickedStevRange = { from: trainPathNode.stev, to: trainPathNode.stev };\n    this.changeTrainSelections(konvaEvent, clickedStevRange, true);\n  }\n\n  changeTrainSelections(konvaEvent: KonvaEventObject<MouseEvent>, clickedStevRange: StopEventRange, clickSelected: boolean): void {\n    if (!this.viewState.trainPathDragState?.dragging && !this.viewState.drawingState) {\n      const sel = this.viewState.trainSelections[this.train.id];\n\n      // Remove other trains if ctrl not pressed\n      if (!konvaEvent.evt.ctrlKey) {\n        this.viewState.trainSelections = sel ? { [this.train.id]: sel } : {};\n      }\n\n      if (!sel) {\n        this.$set(this.viewState.trainSelections, this.train.id, { train: this.train, stevRange: null });\n      } else {\n        const selectedStevRange = sel.stevRange;\n        if (!selectedStevRange) {\n          sel.stevRange = clickedStevRange;\n        } else if (!konvaEvent.evt.ctrlKey) {\n          sel.stevRange = clickSelected ? clickedStevRange : null;\n        } else {\n          let selStart = false, selEnd = false, changed = false;\n          for (const stev of this.train.stevs) {\n            if (!selStart && stev == clickedStevRange.from) {\n              selectedStevRange.from = clickedStevRange.from;\n              changed = true;\n            }\n            if (stev == selectedStevRange.from) selStart = true;\n            if (stev == selectedStevRange.to) selEnd = true;\n            if (selEnd && stev == clickedStevRange.to) {\n              selectedStevRange.to = clickedStevRange.to;\n              changed = true;\n            }\n          }\n          if (!changed) {\n            this.$delete(this.viewState.trainSelections, this.train.id);\n          }\n        }\n      }\n    }\n  }\n\n  getPointedStevRange(x: number, y: number): StopEventRange {\n    if (this.train.stevs.length <= 2) {\n      return { from: this.train.stevs[0], to: this.train.stevs[this.train.stevs.length - 1] };\n    }\n\n    // TODO: more precise detection\n    for (let i = 0; i < this.train.stevs.length - 1; ++i) {\n      const thisStev = this.train.stevs[i];\n      const nextStev = this.train.stevs[i + 1];\n      const leftX = this.diagram.getXByTime(thisStev.time) - this.viewConfig.minHitWidth;\n      const rightX = this.diagram.getXByTime(nextStev.time) + this.viewConfig.minHitWidth;\n      const topY = this.diagram.getYByRelY(Math.min(thisStev.track.relY, nextStev.track.relY)) - this.viewConfig.minHitWidth;\n      const bottomY = this.diagram.getYByRelY(Math.max(thisStev.track.relY, nextStev.track.relY)) + this.viewConfig.minHitWidth;\n      if (leftX < x && x < rightX && topY < y && y < bottomY) {\n        return { from: thisStev, to: nextStev };\n      }\n    }\n    return { from: this.train.stevs[0], to: this.train.stevs[this.train.stevs.length - 1] };\n  }\n\n  onSelectedTrainPathDoubleClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewConfig.editMode && !this.viewState.drawingState) {\n      const targetTime = this.viewState.pointerTime;\n      const nearestStation = this.getNearestStation(konvaEvent.evt.clientY);\n      const nearestStev = this.getNearestStopEvent(targetTime);\n      if (!(nearestStation == nearestStev.station && (nearestStev.prev?.track == nearestStev.track || nearestStev.next?.track == nearestStev.track))) {\n        const index = this.train.stevs.findIndex(s => s.time > targetTime);\n        const newStev = this.train.addNewStopEvent(new StopEvent(this.train, nearestStation.tracks[0], targetTime), index);\n        this.viewState.trainSelections = { \n          [this.train.id]: {\n            train: this.train,\n            stevRange: { from: newStev, to: newStev }\n          } \n        };\n      }\n    }\n  }\n\n  getNearestStation(y: number): Station {\n    const stations = this.diagram.getStationsInMileageOrder();\n    const relY = this.diagram.getRelYByY(y);\n    let minSta = stations[0];\n    let minDist = Math.abs(relY - minSta.bottomRelY);\n    for (const s of stations) {\n      if (Math.abs(relY - s.topRelY) < minDist) {\n        minSta = s;\n        minDist = Math.abs(relY - s.topRelY);\n      }\n      if (Math.abs(relY - s.bottomRelY) < minDist) {\n        minSta = s;\n        minDist = Math.abs(relY - s.bottomRelY);\n      }\n    }\n    return minSta;\n  }\n\n  getNearestStopEvent(time: number): StopEvent {\n    let minStop = this.train.stevs[0];\n    let minDist = Math.abs(time - minStop.time);\n    for (const s of this.train.stevs) {\n      if (Math.abs(time - s.time) < minDist) {\n        minStop = s;\n        minDist = Math.abs(time - s.time);\n      }\n    }\n    return minStop;\n  }\n\n  onSelectedTrainPathMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (!this.viewConfig.editMode) {\n      return;\n    }\n\n    let minTimeShift = -86400;\n    let maxTimeShift = 86400;\n    for (const sel of Object.values(this.viewState.trainSelections)) {\n      const stevRange = sel.stevRange;\n      if (stevRange) {\n        if (stevRange.from.prev) {\n          minTimeShift = Math.max(minTimeShift, stevRange.from.prev.time - stevRange.from.time);\n        }\n        if (stevRange.to.next) {\n          maxTimeShift = Math.min(maxTimeShift, stevRange.to.next.time - stevRange.to.time);\n        }\n      }\n    }\n\n    const clickedStevRange = this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    const changeTrackTargets = \n      clickedStevRange.from == clickedStevRange.to ? [ clickedStevRange.from ] : \n      clickedStevRange.from.track == clickedStevRange.to.track ? [ clickedStevRange.from, clickedStevRange.to ] :\n      null;\n\n    const firstNode = this.selectedTrainPathNodes[0];\n    this.dragState = { \n      t0: firstNode.time, \n      y0: this.diagram.getYByRelY(firstNode.relY),\n      sx0: konvaEvent.evt.screenX, \n      sy0: konvaEvent.evt.screenY,\n      track0: changeTrackTargets ? changeTrackTargets[0].track : null,\n      minTimeShift: minTimeShift,\n      maxTimeShift: maxTimeShift,\n      changeTimeTargets: null,\n      changeTrackTargets: changeTrackTargets ?? null\n    };\n    this.viewState.trainPathDragState = {\n      dragging: false,\n      targets: this.viewState.trainSelections,\n      timeShift: 0\n    };\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  onMarkerMouseDown(konvaEvent: KonvaEventObject<MouseEvent>, node: TrainPathNode): void {\n    if (!this.viewConfig.editMode) {\n      return;\n    }\n\n    this.dragState = {\n      t0: node.time,\n      y0: this.diagram.getYByRelY(node.relY),\n      track0: node.stev.track,\n      sx0: konvaEvent.evt.screenX,\n      sy0: konvaEvent.evt.screenY,\n      minTimeShift: node.stev.prev ? node.stev.prev.time - node.time : -86400,\n      maxTimeShift: node.stev.next ? node.stev.next.time - node.time : 86400,\n      changeTimeTargets: [ node.stev ],\n      changeTrackTargets: [ node.stev ]\n    };\n    this.viewState.trainPathDragState = {\n      dragging: false,\n      targets: { [node.stev.train.id]: { train: node.stev.train, stevRange: { from: node.stev, to: node.stev } } },\n      timeShift: 0\n    };\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState && this.viewState.trainPathDragState) {\n      if (!this.viewState.trainPathDragState.dragging && Math.hypot(event.clientX - this.dragState.sx0, event.clientY - this.dragState.sy0) > 1) {\n        this.viewState.trainPathDragState.dragging = true;\n        this.viewState.pointerY = this.dragState.y0;\n      }\n      if (this.viewState.trainPathDragState.dragging) {\n        if (!this.viewState.pointerPreciseState) {\n          this.viewState.pointerTime = this.dragState.t0 + Math.floor((event.screenX - this.dragState.sx0) / this.diagram.config.xScale / 60) * 60;\n        }\n        this.viewState.trainPathDragState.timeShift = \n          !this.viewState.controlKeyPressed ?\n            Math.min(this.dragState.maxTimeShift, Math.max(this.dragState.minTimeShift, this.viewState.pointerTime - this.dragState.t0)) :\n            this.viewState.pointerTime - this.dragState.t0;\n        if (this.dragState.changeTrackTargets) {\n          const mouseRelY = this.diagram.getRelYByY(event.clientY);\n          const targetStation = this.dragState.changeTrackTargets[0].station;\n          const mouseTrack = targetStation.tracks.find(t => Math.abs(t.relY - mouseRelY) < this.viewConfig.minHitWidth);\n          if (mouseTrack) {\n            for (const stev of this.dragState.changeTrackTargets) {\n              stev.track = mouseTrack;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  onWindowMouseUp(): void {\n    if (this.dragState && this.viewState.trainPathDragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      if (this.viewState.trainPathDragState.dragging) {\n        if (this.dragState.changeTrackTargets && this.dragState.track0) {\n          const targets = this.dragState.changeTrackTargets;\n          const track0 = this.dragState.track0;\n          const track1 = this.dragState.changeTrackTargets[0].track;\n          if (track0 != track1) {\n            this.historyManager.push({\n              undo: () => { targets.forEach(stev => stev.track = track0); },\n              redo: () => { targets.forEach(stev => stev.track = track1); }\n            });\n          }\n        }\n\n        const timeShift = this.viewState.trainPathDragState.timeShift;\n        if (timeShift != 0) {\n          if (!this.viewState.controlKeyPressed) {\n            const targets = \n              this.dragState.changeTimeTargets ??\n              Object.values(this.viewState.trainSelections).flatMap(sel => {\n                return sel.stevRange ? sel.train.getStopEventsInRange(sel.stevRange) : sel.train.stevs;\n              });\n            targets.forEach(stev => stev.time += timeShift);\n            this.historyManager.push({\n              undo: () => { targets.forEach(stev => stev.time -= timeShift); },\n              redo: () => { targets.forEach(stev => stev.time += timeShift); }\n            });\n          } else {\n            const newTrains = Object.values(this.viewState.trainSelections).map(sel => {\n              const srcTrain = sel.train;\n              const srcStevs = sel.stevRange ? srcTrain.getStopEventsInRange(sel.stevRange) : srcTrain.stevs;\n              const newTrain = this.diagram.addNewTrain(new Train(this.diagram.genId(), \"\"));\n              for (const srcStev of srcStevs) {\n                newTrain.addNewStopEvent(new StopEvent(newTrain, srcStev.track, srcStev.time + timeShift));\n              }\n              this.$delete(this.viewState.trainSelections, sel.train.id);\n              this.$set(this.viewState.trainSelections, newTrain.id, { trainId: newTrain.id, stevRange: null });\n              return newTrain;\n            });\n            this.historyManager.push({\n              undo: () => { newTrains.forEach(train => this.diagram.removeTrain(train)); },\n              redo: () => { newTrains.forEach(train => this.diagram.addNewTrain(train)); }\n            });\n          }\n        }\n      }\n      this.viewState.trainPathDragState = null;\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathGroup.vue?vue&type=template&id=b89abab4&scoped=true&\"\nimport script from \"./TrainPathGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b89abab4\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport Diagram from \"@/data/Diagram\";\nimport ViewState from \"@/data/ViewState\";\nimport TrainPathGroup from \"./TrainPathGroup.vue\";\n\n@Component({\n  components: {\n    TrainPathGroup\n  },\n})\nexport default class BackLayer extends Vue {\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n\n  // mounted(): void {\n  //   const hitCanvas = (this.$refs.trainPathLayer as any).getNode().hitCanvas._canvas;\n  //   document.body.appendChild(hitCanvas);\n  // }\n\n  get layerConfig(): unknown {\n    return {\n      clip: {\n        x: this.diagram.config.leftPaneWidth,\n        y: this.diagram.config.topPaneHeight,\n        width: this.viewState.viewWidth - this.diagram.config.leftPaneWidth,\n        height: this.viewState.viewHeight - this.diagram.config.topPaneHeight,\n      }\n    };\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathLayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathLayer.vue?vue&type=template&id=2f6cdf07&scoped=true&\"\nimport script from \"./TrainPathLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f6cdf07\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Inject, InjectReactive, Vue } from \"vue-property-decorator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport Hammer from \"hammerjs\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\nimport BackLayer from \"./BackLayer.vue\";\nimport Pointer from \"./Pointer.vue\";\nimport TrainPathLayer from \"./TrainPathLayer.vue\";\n\n@Component({\n  components: {\n    BackLayer, Pointer, TrainPathLayer\n  },\n})\nexport default class Stage extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n\n  $el!: HTMLElement;\n\n  stageDragState: { scrollX0: number, scrollY0: number, x0: number, y0: number, dragging: boolean } | null = null;\n  pinchState: { lastScale: number } | null = null;\n\n  get stageConfig(): unknown {\n    return {\n      width: this.viewState.viewWidth,\n      height: this.viewState.viewHeight\n    };\n  }\n\n  get stationsInMileageOrder(): Station[] {\n    return this.diagram.getStationsInMileageOrder();\n  }\n\n  mounted(): void {\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n\n    const hammer = new Hammer(this.$el);\n    hammer.get(\"pan\").set({ direction: Hammer.DIRECTION_ALL });\n    hammer.get(\"pinch\").set({ enable: true, direction: Hammer.DIRECTION_ALL });\n    hammer.on(\"panstart\", this.onPanStart);\n    hammer.on(\"panmove\", this.onPanMove);\n    hammer.on(\"panend\", this.onPanEnd);\n    hammer.on(\"pinchstart\", this.onPinchStart);\n    hammer.on(\"pinchmove\", this.onPinchMove);\n    hammer.on(\"pinchend\", this.onPinchEnd);\n  }\n\n  unmounted(): void {\n    window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n  }\n\n  onStageMouseMove(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const event = konvaEvent.evt;\n\n    // Update pointer state\n    this.viewState.pointerScreenX = event.screenX;\n    if (this.viewState.pointerPreciseState) {\n      const dUnit = Math.round((event.screenX - this.viewState.pointerPreciseState.sx0) / this.viewConfig.pointerPrecisePixelPerTimeUnit);\n      this.viewState.pointerTime = dUnit * this.diagram.config.minimumTimeUnit + this.viewState.pointerPreciseState.t0;\n    } else if (!this.viewState.trainPathDragState?.dragging) {\n      this.viewState.pointerTime = Math.round(this.diagram.getTimeByX(event.clientX) / 60) * 60;\n      if (event.clientX >= this.diagram.config.leftPaneWidth) {\n        const pointerTargetLine = this.findPointerTargetLine(event.clientY);\n        if (pointerTargetLine) {\n          this.viewState.pointerTargetLine = pointerTargetLine ?? null;\n          this.viewState.pointerY = this.diagram.getYByRelY(pointerTargetLine.relY);\n        } else {\n          this.viewState.pointerTargetLine = null;\n        }\n      } else {\n        this.viewState.pointerTargetLine = null;\n      }\n    }\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      this.viewState.pointerTargetTrainPath = null;\n    }\n\n    // Update drawing floating\n    const drawingState = this.viewState.drawingState;\n    if (drawingState) {\n      if (drawingState.direction > 0) {\n        this.viewState.pointerTime = Math.max(this.viewState.pointerTime, drawingState.lastStev.time);\n      } else if (drawingState.direction < 0) {\n        this.viewState.pointerTime = Math.min(this.viewState.pointerTime, drawingState.lastStev.time);\n      }\n\n      if (drawingState.floating) {\n        drawingState.train.stevs.splice(drawingState.train.stevs.indexOf(drawingState.floating), 1);\n        drawingState.floating = null;\n      }\n\n      const pointerTargetLine = event.clientX >= this.diagram.config.leftPaneWidth ?\n        this.findPointerTargetLine(event.clientY) : undefined;\n      if (pointerTargetLine) {\n        const targetTrack = pointerTargetLine.track ?? pointerTargetLine.station.tracks[0];\n        const newStev = drawingState.train.addNewStopEvent(\n          new StopEvent(\n            drawingState.train,\n            targetTrack,\n            this.viewState.pointerTime\n          ),\n          drawingState.direction > 0 || (drawingState.direction == 0 && this.viewState.pointerTime >= drawingState.lastStev.time) ? undefined : 0\n        );\n        drawingState.floating = newStev;\n      }\n    }\n  }\n\n  findPointerTargetLine(y: number): { station: Station, track: Track | null, relY: number } | undefined {\n    const stationPointedOnTop = this.stationsInMileageOrder.find(s => \n      Math.abs(this.diagram.getYByRelY(s.topRelY) - y) < Math.max(this.diagram.config.stationLineWidth * 0.5, this.viewConfig.minHitWidth));\n    if (stationPointedOnTop) {\n      return { station: stationPointedOnTop, track: null, relY: stationPointedOnTop.topRelY };\n    }\n\n    const stationPointedOnBottom = this.stationsInMileageOrder.find(s =>\n      Math.abs(this.diagram.getYByRelY(s.bottomRelY) - y) < Math.max(this.diagram.config.stationLineWidth * 0.5, this.viewConfig.minHitWidth));\n    if (stationPointedOnBottom) {\n      return { station: stationPointedOnBottom, track: null, relY: stationPointedOnBottom.bottomRelY };\n    }\n\n    const station = this.stationsInMileageOrder.find(s => \n      this.diagram.getYByRelY(s.topRelY) + this.diagram.config.trackLineSpan - Math.max(this.diagram.config.trackLineWidth * 0.5, this.viewConfig.minHitWidth) < y &&\n      this.diagram.getYByRelY(s.bottomRelY) - this.diagram.config.trackLineSpan + Math.max(this.diagram.config.trackLineWidth * 0.5, this.viewConfig.minHitWidth) > y\n    );\n    if (station) {\n      const pointedTrack = station.tracks.find(t => Math.abs(this.diagram.getYByRelY(t.relY) - y) < Math.max(this.diagram.config.trackLineWidth * 0.5, this.viewConfig.minHitWidth));\n      if (pointedTrack) {\n        return { station, track: pointedTrack, relY: pointedTrack.relY };\n      }\n    }\n  }\n\n  onStageClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const drawingState = this.viewState.drawingState;\n    if (drawingState) {\n      if (konvaEvent.evt.button == 0 && this.viewState.pointerTargetLine) {\n        if (drawingState.direction == 0) {\n          drawingState.direction = Math.sign(this.viewState.pointerTime - drawingState.lastStev.time);\n        }\n        if (drawingState.floating){\n          const triple = drawingState.floating.track == drawingState.lastStev.track && (\n            drawingState.direction > 0 && drawingState.lastStev.track == drawingState.lastStev.prev?.track ||\n            drawingState.direction < 0 && drawingState.lastStev.track == drawingState.lastStev.next?.track\n          );\n          if (triple) {\n            drawingState.lastStev.time = this.viewState.pointerTime;\n            drawingState.train.stevs.splice(drawingState.train.stevs.indexOf(drawingState.floating), 1);\n          } else {\n            drawingState.lastStev = drawingState.floating;\n          }\n          drawingState.floating = null;\n        }\n      }\n      if (konvaEvent.evt.button == 2) {\n        if (drawingState.lastStev == drawingState.stableEnd) {\n          if (drawingState.floating) {\n            drawingState.train.stevs.splice(drawingState.train.stevs.indexOf(drawingState.floating), 1);\n          }\n          this.viewState.drawingState = null;\n        } else {\n          const newLastStev = drawingState.direction > 0 ? drawingState.lastStev.prev : drawingState.lastStev.next;\n          if (newLastStev) {\n            drawingState.train.stevs.splice(drawingState.train.stevs.indexOf(drawingState.lastStev), 1);\n            drawingState.lastStev = newLastStev;\n          } else {\n            this.$delete(this.diagram.trains, drawingState.train.id);\n            this.viewState.drawingState = null;\n          }\n        }\n      }\n    }\n\n    if (konvaEvent.target == konvaEvent.currentTarget && \n        !konvaEvent.evt.ctrlKey && \n        !this.stageDragState?.dragging && \n        !this.viewState.trainPathDragState?.dragging && \n        !this.viewState.drawingState) {\n      this.viewState.trainSelections = {};\n    }\n  }\n\n  onStageDoubleClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget && this.viewState.drawingState) {\n      const drawingState = this.viewState.drawingState;\n      if (drawingState.floating) {\n        drawingState.train.stevs.splice(drawingState.train.stevs.indexOf(drawingState.floating), 1);\n      }\n      if (drawingState.train.stevs.length <= 1) {\n        this.$delete(this.diagram.trains, drawingState.train.id);\n      } else {\n        const stableEnd = drawingState.stableEnd;\n        if (stableEnd) {\n          const stableIndex = drawingState.train.stevs.indexOf(stableEnd);\n          const addedStevs = drawingState.direction > 0 ? \n            drawingState.train.stevs.filter((e, i) => i > stableIndex) : drawingState.train.stevs.filter((e, i) => i < stableIndex);\n          if (drawingState.direction > 0) {\n            this.historyManager.push({\n              undo: () => { drawingState.train.stevs.splice(stableIndex + 1); },\n              redo: () => { addedStevs.forEach(stev => drawingState.train.stevs.push(stev)); }\n            });\n          } else {\n            this.historyManager.push({\n              undo: () => { drawingState.train.stevs.splice(0, stableIndex); },\n              redo: () => { drawingState.train.stevs = addedStevs.concat(drawingState.train.stevs); }\n            });\n          }\n        } else {\n          this.historyManager.push({\n            undo: () => { this.$delete(this.diagram.trains, drawingState.train.id); },\n            redo: () => { this.$set(this.diagram.trains, drawingState.train.id, drawingState.train) }\n          });\n        }\n      }\n      this.viewState.drawingState = null;\n      this.viewState.trainSelections = {};\n    } else if (konvaEvent.target == konvaEvent.currentTarget && this.viewConfig.editMode) {\n      if (konvaEvent.evt.clientX >= this.diagram.config.leftPaneWidth) {\n        const targetLine = this.viewState.pointerTargetLine;\n        if (targetLine && (targetLine.track || !targetLine.station.expanded)) {\n          const track = targetLine.track ?? targetLine.station.tracks[0];\n          const train = this.diagram.addNewTrain(new Train(this.diagram.genId(), \"\"));\n          train.addNewStopEvent(new StopEvent(train, track, this.viewState.pointerTime));\n          this.viewState.trainSelections = { [train.id]: { train: train, stevRange: null } };\n          this.viewState.drawingState = {\n            train: this.diagram.trains[train.id],\n            lastStev: this.diagram.trains[train.id].stevs[0],\n            direction: 0,\n            stableEnd: null,\n            floating: null\n          };\n        }\n      } else {\n        const relY = this.diagram.getRelYByY(konvaEvent.evt.clientY);\n        const prevSta = this.stationsInMileageOrder.reverse().find(s => s.topRelY < relY);\n        const mileage = prevSta ?\n          (relY - prevSta.bottomRelY) / this.diagram.config.yScale + prevSta.mileage :\n          relY / this.diagram.config.yScale;\n        const station = Station.fromJSON({\n          id: this.diagram.genId(),\n          name: \"\",\n          mileage,\n          tracks: [ { id: this.diagram.genId(), name: \"\" } ],\n        });\n        this.$set(this.diagram.stations, station.id, station);\n        this.historyManager.push({\n          undo: () => { this.$delete(this.diagram.stations, station.id) },\n          redo: () => { this.$set(this.diagram.stations, station.id, station) }\n        });\n        this.$emit(\"updateY\");\n\n        this.viewState.stationNameInputTarget = station;\n        this.$emit(\"stationNameInputStart\");\n      }\n    }\n  }\n\n  onStageMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      this.startDrag(konvaEvent.evt.screenX, konvaEvent.evt.screenY);\n    }\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    this.moveDrag(event.screenX, event.screenY);\n  }\n\n  onWindowMouseUp(event: MouseEvent): void {\n    this.endDrag(event.screenX, event.screenY);\n  }\n\n  onPanStart(event: { center: { x: number, y: number } }): void {\n    this.startDrag(event.center.x, event.center.y);\n  }\n\n  onPanMove(event: { center: { x: number, y: number } }): void {\n    this.moveDrag(event.center.x, event.center.y);\n  }\n\n  onPanEnd(event: { center: { x: number, y: number } }): void {\n    this.endDrag(event.center.x, event.center.y);\n  }\n\n  startDrag(x: number, y: number): void {\n    this.stageDragState = {\n      scrollX0: this.diagram.config.scrollX,\n      scrollY0: this.diagram.config.scrollY,\n      x0: x,\n      y0: y,\n      dragging: false,\n    };\n  }\n\n  moveDrag(x: number, y: number): void {\n    if (this.stageDragState) {\n      if (Math.hypot(x - this.stageDragState.x0, y - this.stageDragState.y0) > 1) {\n        this.stageDragState.dragging = true;\n      }\n      if (this.stageDragState.dragging) {\n        this.stageDragState.dragging = true;\n        this.diagram.config.scrollX = this.stageDragState.scrollX0 - (x - this.stageDragState.x0);\n        this.diagram.config.scrollY = \n          Math.max(0, Math.min(this.diagram.maxRelY + this.diagram.config.topPaneHeight - this.viewState.viewHeight, \n            this.stageDragState.scrollY0 - (y - this.stageDragState.y0)));\n      }\n    }\n  }\n\n  endDrag(x: number, y: number): void {\n    if (this.stageDragState) {\n      this.moveDrag(x, y);\n      this.stageDragState = null;\n    }\n  }\n\n  onStageMouseWheel(konvaEvent: KonvaEventObject<WheelEvent>): void {\n    // const f = Math.pow(2, -konvaEvent.evt.deltaY * this.viewConfig.wheelScale * 0.001);\n    const f = Math.pow(2, -Math.sign(konvaEvent.evt.deltaY) * this.viewConfig.wheelScale);\n    this.diagram.config.scrollX += (f - 1) * (konvaEvent.evt.clientX - this.diagram.config.leftPaneWidth + this.diagram.config.scrollX);\n    this.diagram.config.scrollY = \n      Math.max(0, Math.min(this.diagram.maxRelY + this.diagram.config.topPaneHeight - this.viewState.viewHeight,\n      this.diagram.config.scrollY + (f - 1) * (konvaEvent.evt.clientY - this.diagram.config.topPaneHeight + this.diagram.config.scrollY)));\n    this.diagram.config.xScale *= f;\n    this.diagram.config.yScale *= f;\n    this.$emit(\"updateY\");\n    konvaEvent.evt.preventDefault();\n  }\n\n  onPinchStart(event: { scale: number }): void {\n    this.pinchState = { lastScale: event.scale };\n  }\n\n  onPinchMove(event: { center: { x: number, y: number }, scale: number }): void {\n    if (this.pinchState) {\n      this.diagram.config.scrollX += (event.scale / this.pinchState.lastScale - 1) * (event.center.x - this.diagram.config.leftPaneWidth + this.diagram.config.scrollX);\n      this.diagram.config.scrollY = \n        Math.max(0, Math.min(this.diagram.maxRelY + this.diagram.config.topPaneHeight - this.viewState.viewHeight,\n        this.diagram.config.scrollY + (event.scale / this.pinchState.lastScale - 1) * (event.center.y - this.diagram.config.topPaneHeight + this.diagram.config.scrollY)));\n      this.diagram.config.xScale *= event.scale / this.pinchState.lastScale;\n      this.diagram.config.yScale *= event.scale / this.pinchState.lastScale;\n      this.pinchState.lastScale = event.scale;\n    }\n  }\n\n  onPinchEnd(event: { center: { x: number, y: number }, scale: number }): void {\n    if (this.pinchState) {\n      this.onPinchMove(event);\n      this.pinchState = null;\n    }\n  }\n\n  onKeyDown(event: KeyboardEvent): void {\n    if (!event.repeat) {\n      if (event.key == \"Shift\") {\n        this.viewState.pointerPreciseState = {\n          sx0: this.viewState.pointerScreenX,\n          t0: this.viewState.pointerTime\n        };\n      }\n      if (event.key == \"Control\") {\n        this.viewState.controlKeyPressed = true;\n      }\n      if (event.key == \"Delete\" && this.viewConfig.editMode && !this.viewState.busy) {\n        const deletingTrains: Train[] = [];\n        const deletingStevs: { stev: StopEvent, index: number }[] = [];\n        for (const sel of Object.values(this.viewState.trainSelections)) {\n          if (!sel.stevRange) {\n            deletingTrains.push(sel.train);\n          } else {\n            const fromIndex = sel.train.stevs.indexOf(sel.stevRange.from);\n            const toIndex = sel.train.stevs.indexOf(sel.stevRange.to);\n            const size = toIndex - fromIndex + 1;\n            if (size >= sel.train.stevs.length - 1) {\n              deletingTrains.push(sel.train);\n            } else {\n              for (let i = fromIndex; i <= toIndex; ++i) {\n                deletingStevs.push({ stev: sel.train.stevs[i], index: i });\n              }\n            }\n          }\n        }\n        deletingTrains.forEach(train => this.$delete(this.diagram.trains, train.id));\n        deletingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n        this.historyManager.push({\n          undo: () => {\n            deletingStevs.forEach(e => e.stev.train.addNewStopEvent(e.stev, e.index));\n            deletingTrains.forEach(train => this.$set(this.diagram.trains, train.id, train));\n          },\n          redo: () => {\n            deletingTrains.forEach(train => this.$delete(this.diagram.trains, train.id));\n            deletingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n          }\n        });\n        this.viewState.trainSelections = {};\n      }\n    }\n  }\n\n  onKeyUp(event: KeyboardEvent): void {\n    if (event.key == \"Shift\") {\n      this.viewState.pointerPreciseState = null;\n    }\n    if (event.key == \"Control\") {\n      this.viewState.controlKeyPressed = false;\n    }\n  }\n\n  onContextMenu(konvaEvent: KonvaEventObject<MouseEvent>): boolean {\n    konvaEvent.evt.preventDefault();\n    return false;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Stage.vue?vue&type=template&id=1a5cc074&scoped=true&\"\nimport script from \"./Stage.vue?vue&type=script&lang=ts&\"\nexport * from \"./Stage.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a5cc074\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewConfig.editMode && _vm.station.expanded && _vm.isBottomLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"plus\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Inject, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport Track from \"@/data/Track\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class StationAddTrackButton extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n  @Prop() station!: Station;\n\n  get style(): unknown {\n    return {\n      left: `${this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelRightMargin}px`,\n      top: `${this.diagram.getYByRelY(this.station.bottomRelY) - this.diagram.config.trackLineSpan}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  get isBottomLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.station.bottomRelY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.station.bottomRelY) < this.viewState.viewHeight;\n  }\n\n  onClick(): void {\n    if (!this.viewState.inputEnabled) {\n      const newTrack = this.station.addNewTrack(new Track(this.station, this.diagram.genId(), \"\"));\n      this.historyManager.push({\n        undo: () => { this.station.removeTrack(newTrack); },\n        redo: () => { this.station.addNewTrack(newTrack); }\n      });\n      this.$emit(\"updateY\");\n\n      this.viewState.trackNameInputTarget = newTrack;\n      this.$emit(\"trackNameInputStart\");\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationAddTrackButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationAddTrackButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationAddTrackButton.vue?vue&type=template&id=5b8586aa&scoped=true&\"\nimport script from \"./StationAddTrackButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationAddTrackButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b8586aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isBottomLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":_vm.icon,\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class StationExpandButton extends Vue {\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Prop() station!: Station;\n\n  get icon(): string {\n    return this.station.expanded ? \"chevron-up\" : \"chevron-down\";\n  }\n\n  get style(): unknown {\n    return {\n      left: `${this.diagram.config.stationLabelLeftMargin}px`,\n      top: `${this.diagram.getYByRelY(this.station.bottomRelY)}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  get isBottomLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.station.bottomRelY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.station.bottomRelY) < this.viewState.viewHeight;\n  }\n\n  onClick(): void {\n    if (!this.viewState.inputEnabled) {\n      this.$set(this.station, \"expanded\", !this.station.expanded);\n      this.$emit(\"updateY\");\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationExpandButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationExpandButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationExpandButton.vue?vue&type=template&id=154aa5d4&scoped=true&\"\nimport script from \"./StationExpandButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationExpandButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"154aa5d4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewState.stationNameInputTarget),expression:\"viewState.stationNameInputTarget\"}],style:(_vm.style),domProps:{\"value\":_vm.targetStation.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onComplete}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Inject, InjectReactive, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class StationNameInput extends Vue {\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n\n  get targetStation(): Station | Record<string, never> {\n    return this.viewState.stationNameInputTarget ?? {};\n  }\n\n  get style(): unknown {\n    return {\n      left: `${this.diagram.config.stationLabelLeftMargin}px`,\n      top: `${this.diagram.getYByRelY(this.targetStation.topRelY) - this.diagram.config.stationLabelFontSize - 4}px`,\n      width: `${this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelLeftMargin - this.diagram.config.stationLabelRightMargin}px`,\n      height: `${this.diagram.config.stationLabelFontSize + 4}px`,\n      paddingTop: \"2px\",\n      lineHeight: `${this.diagram.config.stationLabelFontSize}px`,\n      border: \"none\",\n      fontSize: `${this.diagram.config.stationLabelFontSize}px`,\n    };\n  }\n\n  onComplete(): void {\n    const targetStation = this.targetStation;\n    const name0 = this.targetStation.name;\n    const name1 = (this.$el as HTMLInputElement).value;\n    targetStation.name = name1;\n    this.historyManager.push({\n      undo: () => { targetStation.name = name0; },\n      redo: () => { targetStation.name = name1; }\n    });\n    this.viewState.stationNameInputTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationNameInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationNameInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationNameInput.vue?vue&type=template&id=9f0b4232&scoped=true&\"\nimport script from \"./StationNameInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationNameInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9f0b4232\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewConfig.editMode && _vm.isTopLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"close\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Inject, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Train from \"@/data/Train\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class StationRemoveButton extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n  @Prop() station!: Station;\n\n  get style(): unknown {\n    return {\n      left: `${this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelRightMargin}px`,\n      top: `${this.diagram.getYByRelY(this.station.topRelY) - this.diagram.config.trackLineSpan}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  get isTopLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.station.topRelY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.station.topRelY) < this.viewState.viewHeight;\n  }\n\n  onClick(): void {\n    if (!this.viewState.busy) {\n      const removingTrains: Train[] = [];\n      const removingStevs: { stev: StopEvent, index: number }[] = [];\n      for (const train of Object.values(this.diagram.trains)) {\n        for (let i = train.stevs.length - 1; i >= 0; --i) {\n          const stev = train.stevs[i];\n          if (stev.station == this.station) {\n            train.removeStopEvent(stev);\n            removingStevs.push({ stev, index: i });\n            if (train.stevs.length <= 1) {\n              this.diagram.removeTrain(train);\n              removingTrains.push(train);\n            }\n          }\n        }\n      }\n\n      this.$delete(this.diagram.stations, this.station.id);\n\n      this.historyManager.push({\n        undo: () => { \n          this.$set(this.diagram.stations, this.station.id, this.station);\n          removingTrains.forEach(train => this.diagram.addNewTrain(train)); \n          removingStevs.forEach(e => e.stev.train.addNewStopEvent(e.stev, e.index));\n        },\n        redo: () => { \n          removingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n          removingTrains.forEach(train => this.diagram.removeTrain(train)); \n          this.$delete(this.diagram.stations, this.station.id); \n        }\n      });\n      this.$emit(\"updateY\");\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationRemoveButton.vue?vue&type=template&id=234953ee&scoped=true&\"\nimport script from \"./StationRemoveButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationRemoveButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"234953ee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewConfig.editMode && _vm.station.expanded && Object.values(_vm.station.tracks).length > 1 && _vm.isLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"close\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Inject, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class StationRemoveTrackButton extends Vue {\n  @InjectReactive() viewConfig!: ViewConfig;\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n  @Prop() station!: Station;\n  @Prop() track!: Track;\n\n  get style(): unknown {\n    return {\n      left: `${this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelRightMargin}px`,\n      top: `${this.diagram.getYByRelY(this.track.relY) - this.diagram.config.trackLineSpan}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  get isLineIntersectingPlotPane(): boolean {\n    return this.diagram.getYByRelY(this.track.relY) >= this.diagram.config.topPaneHeight && \n      this.diagram.getYByRelY(this.track.relY) < this.viewState.viewHeight;\n  }\n\n  onClick(): void {\n    if (!this.viewState.busy) {\n      const removingTrains: Train[] = [];\n      const removingStevs: { stev: StopEvent, index: number }[] = [];\n      for (const train of Object.values(this.diagram.trains)) {\n        for (let i = train.stevs.length - 1; i >= 0; --i) {\n          const stev = train.stevs[i];\n          if (stev.track == this.track) {\n            train.removeStopEvent(stev);\n            removingStevs.push({ stev, index: i });\n            if (train.stevs.length <= 1) {\n              this.diagram.removeTrain(train);\n              removingTrains.push(train);\n            }\n          }\n        }\n      }\n      removingStevs.reverse();\n      const trackIndex = this.station.tracks.indexOf(this.track);\n\n      this.station.removeTrack(this.track);\n\n      this.historyManager.push({\n        undo: () => { \n          this.station.addNewTrack(this.track, trackIndex); \n          removingTrains.forEach(train => this.diagram.addNewTrain(train)); \n          removingStevs.forEach(e => e.stev.train.addNewStopEvent(e.stev, e.index));\n        },\n        redo: () => { \n          removingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n          removingTrains.forEach(train => this.diagram.removeTrain(train)); \n          this.station.removeTrack(this.track);\n        }\n      });\n      this.$emit(\"updateY\");\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationRemoveTrackButton.vue?vue&type=template&id=457c01f8&scoped=true&\"\nimport script from \"./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"457c01f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewState.trackNameInputTarget),expression:\"viewState.trackNameInputTarget\"}],style:(_vm.style),domProps:{\"value\":_vm.targetTrack.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onComplete}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Inject, InjectReactive, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport Track from \"@/data/Track\";\nimport ViewState from \"@/data/ViewState\";\n\n@Component\nexport default class TrackNameInput extends Vue {\n  @InjectReactive() viewState!: ViewState;\n  @InjectReactive() diagram!: Diagram;\n  @Inject() historyManager!: HistoryManager;\n\n  get targetTrack(): Track | Record<string, never> {\n    return this.viewState.trackNameInputTarget ?? {};\n  }\n\n  get style(): unknown {\n    return this.viewState.trackNameInputTarget ?\n      {\n        left: `${this.diagram.config.stationLabelLeftMargin + this.diagram.config.trackLabelLeftMargin}px`,\n        top: `${this.diagram.getYByRelY(this.targetTrack.relY) - this.diagram.config.stationLabelFontSize - 4}px`,\n        width: `${this.diagram.config.leftPaneWidth - this.diagram.config.stationLabelLeftMargin - this.diagram.config.trackLabelLeftMargin - this.diagram.config.stationLabelRightMargin}px`,\n        height: `${this.diagram.config.stationLabelFontSize + 4}px`,\n        paddingTop: \"2px\",\n        lineHeight: `${this.diagram.config.stationLabelFontSize}px`,\n        border: \"none\",\n        fontSize: `${this.diagram.config.stationLabelFontSize}px`,\n      } : {};\n  }\n\n  onComplete(): void {\n    const targetTrack = this.targetTrack;\n    const name0 = targetTrack.name;\n    const name1 = (this.$el as HTMLInputElement).value;\n    targetTrack.name = name1;\n    this.historyManager.push({\n      undo: () => { targetTrack.name = name0; },\n      redo: () => { targetTrack.name = name1; }\n    });\n    this.viewState.trackNameInputTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackNameInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackNameInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrackNameInput.vue?vue&type=template&id=652c3fab&scoped=true&\"\nimport script from \"./TrackNameInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrackNameInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"652c3fab\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Provide, ProvideReactive, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"@/data/Diagram\";\nimport ViewConfig from \"@/data/ViewConfig\";\nimport ViewState from \"@/data/ViewState\";\nimport Stage from \"./Stage.vue\";\nimport StationAddTrackButton from \"./StationAddTrackButton.vue\";\nimport StationExpandButton from \"./StationExpandButton.vue\";\nimport StationNameInput from \"./StationNameInput.vue\";\nimport StationRemoveButton from \"./StationRemoveButton.vue\";\nimport StationRemoveTrackButton from \"./StationRemoveTrackButton.vue\";\nimport TrackNameInput from \"./TrackNameInput.vue\";\n\n@Component({\n  components: {\n    Stage, StationAddTrackButton, StationExpandButton, StationNameInput, StationRemoveButton, StationRemoveTrackButton, TrackNameInput\n  },\n})\nexport default class DiagramView extends Vue {\n  @Prop({ default: () => Diagram.fromJSON({ stations: [], trains: [] }) }) @ProvideReactive() diagram!: Diagram;\n  @Prop({ default: new ViewConfig() }) @ProvideReactive() viewConfig!: ViewConfig;\n  @Prop() @Provide() historyManager!: HistoryManager;\n  @ProvideReactive() viewState = new ViewState();\n\n  mounted(): void {\n    const resizeObserver = new ResizeObserver(this.updateViewSize);\n    resizeObserver.observe(this.$el);\n  }\n\n  onStationNameInputStart(): void {\n    this.$nextTick(() => ((this.$refs.stationNameInput as Vue).$el as HTMLInputElement).focus());\n  }\n\n  onTrackNameInputStart(): void {\n    this.$nextTick(() => ((this.$refs.trackNameInput as Vue).$el as HTMLInputElement).focus());\n  }\n\n  updateViewSize(): void {\n    if (this.$el) {\n      this.viewState.viewWidth = this.$el.clientWidth;\n      this.viewState.viewHeight = this.$el.clientHeight;\n    }\n  }\n\n  updateY(): void {\n    this.diagram.updateY();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DiagramView.vue?vue&type=template&id=d5ac33d8&scoped=true&\"\nimport script from \"./DiagramView.vue?vue&type=script&lang=ts&\"\nexport * from \"./DiagramView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DiagramView.vue?vue&type=style&index=0&id=d5ac33d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d5ac33d8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-carousel',{attrs:{\"autoplay\":false,\"indicator-inside\":false}},[_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_add_new_station.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewStationTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewStationBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_add_new_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_select_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.selectTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.selectTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_edit_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_edit_time.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTimeTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTimeBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_tips.png\")}}),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.tipsTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.tipsBody'))}})])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class HelpPane extends Vue {\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpPane.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpPane.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HelpPane.vue?vue&type=template&id=da68d834&scoped=true&\"\nimport script from \"./HelpPane.vue?vue&type=script&lang=ts&\"\nexport * from \"./HelpPane.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HelpPane.vue?vue&type=style&index=0&id=da68d834&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da68d834\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport HistoryManager from \"./HistoryManager\";\nimport Diagram from \"./data/Diagram\";\nimport ViewConfig from \"./data/ViewConfig\";\nimport DiagramView from \"./components/DiagramView.vue\";\nimport HelpPane from \"./components/HelpPane.vue\";\n\n@Component({\n  components: {\n    DiagramView, HelpPane \n  },\n})\nexport default class App extends Vue {\n  diagramFileName = \"diagram.json\";\n  diagram = Diagram.fromJSON({ stations: [], trains: [] });\n  viewConfig = new ViewConfig();\n  historyManager = new HistoryManager(100);\n  helpPaneVisible = false;\n\n  mounted(): void {\n    this.viewConfig.editMode = document.body.clientWidth >= 600;\n    fetch(\"sample-diagram.json\").then(async result => {\n      const json = await result.json();\n      this.diagram = Diagram.fromJSON(json);\n      this.diagramFileName = \"sample-diagram.json\";\n    });\n  }\n\n  onEditButtonClick(): void {\n    this.viewConfig.editMode = !this.viewConfig.editMode;\n  }\n\n  onUndoButtonClick(): void {\n    this.historyManager.undo();\n  }\n\n  onRedoButtonClick(): void {\n    this.historyManager.redo();\n  }\n\n  onVanishButtonClick(): void {\n    if (Object.keys(this.diagram.trains).length > 0) {\n      const trains = this.diagram.trains;\n      this.historyManager.push({\n        undo: () => { this.diagram.trains = trains; },\n        redo: () => { this.diagram.trains = {}; }\n      });\n      this.diagram.trains = {}; \n    } else {\n      const diagram = this.diagram;\n      this.historyManager.push({\n        undo: () => { this.diagram = diagram; },\n        redo: () => { this.diagram = Diagram.fromJSON({ stations: {}, trains: {} }); }\n      });\n      this.diagram = Diagram.fromJSON({ stations: {}, trains: {} }); \n    }\n  }\n\n  onUploadButtonClick(): void {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json, application/json\";\n    input.onchange = () => {\n      const reader = new FileReader();\n      if (input.files && input.files.length > 0) {\n        const file = input.files[0];\n        reader.readAsText(file);\n        reader.onload = () => {\n          if (typeof(reader.result) == \"string\") {\n            try {\n              const data = JSON.parse(reader.result);\n              this.diagram = Diagram.fromJSON(data);\n              this.diagramFileName = file.name;\n              this.historyManager.clear();\n            } catch (e) {\n              this.$buefy.notification.open({\n                type: \"is-danger\",\n                message: `${this.$t(\"message.failedToLoadJSON\").toString()}<br>${file.name}`,\n              });\n            }\n          }\n        };\n      }\n    };\n    input.click();\n  }\n\n  onDownloadButtonClick(): void {\n    const json = JSON.stringify(this.diagram);\n    const blob = new Blob([ json ], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = this.diagramFileName;\n    a.click();\n  }\n\n  onHelpButtonClick(): void {\n    this.helpPaneVisible = !this.helpPaneVisible;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=9d5808c0&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n    ja: {\n        message: {\n            confirmRemoveStationRefered: \"この駅を使用している列車があります。駅を削除すると、列車の時刻情報も削除されます。よろしいですか？\",\n            confirmRemoveTrackRefered: \"この番線を使用している列車があります。番線を削除すると、列車の時刻情報も削除されます。よろしいですか？\",\n            failedToLoadJSON: \"ファイルの読み込みに失敗しました。\",\n            editButtonTooltip: \"編集モード\",\n            undoButtonTooltip: \"元に戻す\",\n            redoButtonTooltip: \"やり直す\",\n            vanishTrainsButtonTooltip: \"列車をクリア\",\n            vanishStationsButtonTooltip: \"駅をクリア\",\n            uploadButtonTooltip: \"ダイヤファイルを読み込む\",\n            downloadButtonTooltip: \"ダイヤファイルを保存する\",\n            helpButtonTooltip: \"操作方法\",\n            help: {\n                addNewStationTitle: \"駅を追加する\",\n                addNewStationBody: \n                    \"<p>左側の駅名エリアをダブルクリックすると、新しい駅を追加できます。</p>\" +\n                    \"<ul><li>駅名をドラッグすると、駅線の位置を調整できます。\" +\n                    \"<li>駅名をクリックすると、駅名を編集できます。\" +\n                    \"<li>駅右側の<i class='mdi mdi-close'></i>アイコンをクリックすると、駅を削除できます。</ul>\",\n                addNewTrainTitle: \"列車を追加する\",\n                addNewTrainBody:\n                    \"<p>駅線の上でダブルクリックすると、新しい列車を追加できます。駅線を続けてクリックして、停車駅を順に追加できます。</p>\" +\n                    \"<ul><li>列車線の編集を終了するには、もう一度ダブルクリックします。\" +\n                    \"<li>Shiftキーを押しながらカーソルを動かすと、秒単位で時刻を指定できます。\" +\n                    \"<li>右クリックすると、追加した停車駅を順に削除します。</ul>\",\n                selectTrainTitle: \"列車を選択する\",\n                selectTrainBody:\n                    \"<p>列車線をクリックすると、列車を選択できます。</p>\" +\n                    \"<ul><li>Ctrlキーを押しながら別の列車線クリックすると、複数列車を選択できます。\" +\n                    \"<li>列車を選択した状態でさらにクリックすると、特定の駅または駅間を選択できます。<br>Ctrlキーを押しながらクリックすると、複数駅間を選択できます。</ul>\",\n                editTrainTitle: \"列車を編集する\",\n                editTrainBody:\n                    \"<p>列車を選択した状態では、さまざまな方法で列車を編集できます。</p>\" +\n                    \"<ul><li>列車線と駅線の交点をダブルクリックすると、停車駅を追加できます。\" +\n                    \"<li>列車線の始端・終端をダブルクリックすると、列車を延長できます。\" +\n                    \"<li>Deleteキーを押すと、選択した区間を削除できます。</ul>\",\n                editTimeTitle: \"着発時刻を編集する\",\n                editTimeBody: \n                    \"<p>列車を選択した状態では、さまざまな方法で時刻を編集できます。</p>\" +\n                    \"<ul><li>列車線をドラッグすると、選択した区間の時刻を変更できます。\" +\n                    \"<li>Shiftキーを押しながらカーソルを動かすと、秒単位で時刻を指定できます。\" +\n                    \"<li>番線を開いた状態でドラッグすることで、着発番線を変更できます。\",\n                tipsTitle: \"便利な機能\",\n                tipsBody: \n                    \"<p>その他にも、さまざまな便利な機能があります。</p>\" +\n                    \"<ul><li>列車線を選択した状態でCtrlキーを押しながらドラッグすると、列車線をコピーできます。\" +\n                    \"<li><i class='mdi mdi-upload'></i>ボタンを押すと、ローカルファイルのダイヤデータをロードできます。\" +\n                    \"<li><i class='mdi mdi-download'></i>ボタンを押すと、ダイヤデータをローカルファイルに保存できます。\"\n            },\n        },\n    },\n};\n","import Vue from \"vue\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\nimport VueI18n from \"vue-i18n\";\nimport VueKonva from \"vue-konva\";\nimport App from \"./App.vue\";\nimport messages from \"./messages\";\n\nVue.config.productionTip = false\nVue.use(Buefy, {\n  defaultNotificationDuration: 5000,\n  defaultNotificationPosition: \"is-bottom-right\",\n});\nVue.use(VueI18n);\nVue.use(VueKonva);\n\nconst i18n = new VueI18n({\n  locale: \"ja\",\n  messages,\n});\n\nnew Vue({\n  render: h => h(App),\n  i18n,\n}).$mount(\"#app\");\n","module.exports = __webpack_public_path__ + \"img/logo.b1deff45.png\";"],"sourceRoot":""}