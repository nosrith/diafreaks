{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/help_edit_train.png","webpack:///./src/assets/help_select_train.png","webpack:///./src/components/TrainInfoEditor.vue?665d","webpack:///./src/App.vue?c650","webpack:///./src/assets/help_tips.png","webpack:///./src/components/DiagramView.vue?87cf","webpack:///./src/assets/help_edit_time.png","webpack:///./src/assets/diafreaks_logo.png","webpack:///./src/assets/help_add_new_train.png","webpack:///./src/assets/help_add_new_station.png","webpack:///./src/App.vue?3644","webpack:///./src/HistoryManager.ts","webpack:///./src/data/DiagramConfig.ts","webpack:///./src/data/Track.ts","webpack:///./src/data/Station.ts","webpack:///./src/data/StopEvent.ts","webpack:///./src/data/Train.ts","webpack:///./src/data/Diagram.ts","webpack:///./src/data/ViewConfig.ts","webpack:///./src/data/ViewState.ts","webpack:///./src/data/DiagramViewContext.ts","webpack:///./src/components/DiagramView.vue?a177","webpack:///./src/components/Stage.vue?6d32","webpack:///./src/components/BackLayer.vue?7fe6","webpack:///./src/components/StationGroup.vue?7690","webpack:///./src/components/TrackGroup.vue?bf92","webpack:///./src/components/TrackGroup.vue","webpack:///./src/components/TrackGroup.vue?80ea","webpack:///./src/components/TrackGroup.vue?a194","webpack:///./src/components/StationGroup.vue","webpack:///./src/components/StationGroup.vue?f322","webpack:///./src/components/StationGroup.vue?1b58","webpack:///./src/components/BackLayer.vue","webpack:///./src/components/BackLayer.vue?3b1f","webpack:///./src/components/BackLayer.vue?c43c","webpack:///./src/components/Pointer.vue?e787","webpack:///./src/utils.ts","webpack:///./src/components/Pointer.vue","webpack:///./src/components/Pointer.vue?63e5","webpack:///./src/components/Pointer.vue?a4a9","webpack:///./src/components/TrainPathLayer.vue?f0c1","webpack:///./src/components/TrainPathGroup.vue?366c","webpack:///./src/components/TrainPathMarker.vue?0c74","webpack:///./src/components/TrainPathMarker.vue","webpack:///./src/components/TrainPathMarker.vue?ce7d","webpack:///./src/components/TrainPathMarker.vue?a47c","webpack:///./src/components/TrainPathGroup.vue","webpack:///./src/components/TrainPathGroup.vue?c604","webpack:///./src/components/TrainPathGroup.vue?fe26","webpack:///./src/components/TrainPathLayer.vue","webpack:///./src/components/TrainPathLayer.vue?75af","webpack:///./src/components/TrainPathLayer.vue?44a2","webpack:///./src/components/Stage.vue","webpack:///./src/components/Stage.vue?091d","webpack:///./src/components/Stage.vue?d206","webpack:///./src/components/StationAddTrackButton.vue?dade","webpack:///./src/components/StationAddTrackButton.vue","webpack:///./src/components/StationAddTrackButton.vue?f328","webpack:///./src/components/StationAddTrackButton.vue?b738","webpack:///./src/components/StationExpandButton.vue?f578","webpack:///./src/components/StationExpandButton.vue","webpack:///./src/components/StationExpandButton.vue?8892","webpack:///./src/components/StationExpandButton.vue?e10d","webpack:///./src/components/StationNameInput.vue?2aa9","webpack:///./src/components/StationNameInput.vue","webpack:///./src/components/StationNameInput.vue?fcac","webpack:///./src/components/StationNameInput.vue?9ce9","webpack:///./src/components/StationRemoveButton.vue?eb96","webpack:///./src/components/StationRemoveButton.vue","webpack:///./src/components/StationRemoveButton.vue?6092","webpack:///./src/components/StationRemoveButton.vue?7287","webpack:///./src/components/StationRemoveTrackButton.vue?0377","webpack:///./src/components/StationRemoveTrackButton.vue","webpack:///./src/components/StationRemoveTrackButton.vue?2de7","webpack:///./src/components/StationRemoveTrackButton.vue?c700","webpack:///./src/components/TrackNameInput.vue?f133","webpack:///./src/components/TrackNameInput.vue","webpack:///./src/components/TrackNameInput.vue?2a59","webpack:///./src/components/TrackNameInput.vue?4243","webpack:///./src/components/TrainInfoEditor.vue?ebef","webpack:///./src/components/TrainInfoEditor.vue","webpack:///./src/components/TrainInfoEditor.vue?a5a9","webpack:///./src/components/TrainInfoEditor.vue?53e3","webpack:///./src/components/DiagramView.vue","webpack:///./src/components/DiagramView.vue?0f5f","webpack:///./src/components/DiagramView.vue?613b","webpack:///./src/components/HelpView.vue?e4b0","webpack:///./src/components/HelpView.vue","webpack:///./src/components/HelpView.vue?dc1e","webpack:///./src/components/HelpView.vue?c2ea","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/messages.ts","webpack:///./src/main.ts","webpack:///./src/components/HelpView.vue?57d9"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","context","subView","_e","_m","staticClass","$t","class","state","editMode","on","onEditButtonClick","history","undoable","onUndoButtonClick","redoable","onRedoButtonClick","keys","diagram","trains","onVanishButtonClick","onUploadButtonClick","onDownloadButtonClick","onHelpButtonClick","staticRenderFns","staticStyle","capacity","undos","redos","elem","pop","undo","redo","minimumTimeUnit","minPlotTime","maxPlotTime","leftPaneWidth","trackLineSpan","scrollX","scrollY","xScale","yScale","dc","DiagramConfig","assign","fromEntries","filter","undefined","map","station","id","relY","Track","mileage","expanded","topRelY","bottomRelY","tracks","track","index","indexOf","Array","isArray","Station","fromJSON","forEach","train","time","privateId","StopEvent","maxPrivateId","stevs","stations","stationId","trackId","arrTime","depTime","find","stev","stevRange","inRange","from","to","nodes","prev","phase","next","stops","lastStop","Train","flatMap","fromJSONStop","config","maxId","maxRelY","values","sort","a","b","set","delete","getStationsInMileageOrder","initialMileage","y","lastMileage","Diagram","Math","max","updateY","fontFamily","topPaneHeight","hourlyLabelBottomMargin","hourlyLabelFontSize","hourlyLabelColor","hourlyGridLineWidth","hourlyGridLineColor","majorMinutelyGridLineSpan","majorMinutelyGridLineWidth","majorMinutelyGridLineColor","minorMinutelyGridLineSpan","minorMinutelyGridLineWidth","minorMinutelyGridLineColor","stationLabelLeftMargin","stationLabelRightMargin","stationLabelFontSize","stationLabelColor","stationLineWidth","stationLineColor","plotPanePadding","trackLabelLeftMargin","trackLabelFontSize","trackLabelColor","trackLineWidth","trackLineColor","trainPathWidth","trainPathColor","trainNameLabelLineHeight","trainNameLabelFontSize","minHitWidth","pointerWidth","pointerColor","pointerLabelFontSize","pointerPrecisePixelPerTimeUnit","selectedTrackLabelColor","selectedTrackLineColor","selectedTrainPathColor","selectedTrainPathWidthScale","selectedTrainPathMarkerWidth","selectedTrainPathMarkerColor","unselectedTrainPathOpacity","markerLabelMaxDistance","markerLabelColor","markerLabelFontSize","markerLabelLineHeight","wheelScale","viewWidth","viewHeight","trainSelections","pointerScreenX","pointerTime","pointerY","pointerTargetTrainPath","pointerTargetLine","pointerPreciseState","drawingState","trainPathDragState","stationNameInputTarget","trackNameInputTarget","trainInfoEditorTarget","controlKeyPressed","inputEnabled","x","onStationNameInputStart","onTrackNameInputStart","onTrainInfoEditStart","onTrainInfoEditEnd","ref","_l","stageConfig","onStageMouseDown","onStageMouseMove","onStageClick","onStageDoubleClick","onStageMouseWheel","onContextMenu","onTouchEnd","_g","$listeners","lineConfig","labelConfig","topLineConfig","labelRectConfig","onStationLabelClick","onStationLabelMouseDown","isBottomLineIntersectingPlotPane","bottomLineConfig","onLabelClick","onLabelMouseDown","dragState","points","viewConfig","getYByRelY","viewState","stroke","strokeWidth","listening","width","height","text","fontSize","fill","align","verticalAlign","busy","dragging","$emit","konvaEvent","sy0","evt","screenY","index0","addEventListener","onWindowMouseMove","onWindowMouseUp","event","abs","removeTrack","mouseRelY","getRelYByY","clientY","newIndex","findIndex","removeEventListener","index1","addNewTrack","component","widthForChars","charSpan","mileage0","mileage1","components","TrackGroup","lines","scrollLeftTime","ceil","getXByTime","StationGroup","rectConfig","getTimeText","forceSec","hStr","floor","mmStr","padStart","ssStr","canvas","document","createElement","ctx","getContext","getTextWidth","font","measureText","layerConfig","trainNameLabelConfig","onTrainNameLabelClick","regularTrainPathConfig","onTrainPathClick","onTrainPathMouseMove","onTrainPathTap","selectedTrainPathConfig","onSelectedTrainPathClick","onSelectedTrainPathDoubleClick","onSelectedTrainPathMouseDown","onSelectedTrainPathMouseMove","onMarkerClick","onMarkerMouseDown","$event","trainPathNode","onRectMouseMove","onRectDoubleClick","labelPosition","getLabelPosition","thisStev","prevStev","nextStev","thisRelY","prevRelY","lastStev","direction","stableEnd","floating","sel","visible","trainNameLabelText","trainNameLabelRect","textWidth","targets","selectedTrainPathNodes","regularTrainPathNodes","firstNodeRunning","segDYToDX","NaN","forwardNode","dx","dy","dy2dx","sign","Infinity","isNaN","hypot","rotation","segDXToD","sqrt","segDYToD","atan","PI","opacity","hitStrokeWidth","getTrainPathNodes","dragTarget","node","timeShift","nInRange","target","currentTarget","shiftKey","$set","getPointedStevRange","clientX","clickedStopRange","changeTrainSelections","clickedStevRange","clickSelected","selectedStevRange","selStart","selEnd","changed","$delete","leftX","rightX","topY","min","bottomY","targetTime","nearestStation","getNearestStation","nearestStev","getNearestStopEvent","newStev","addNewStopEvent","minSta","minDist","minStop","minTimeShift","maxTimeShift","changeTrackTargets","firstNode","t0","y0","sx0","screenX","track0","changeTimeTargets","targetStation","mouseTrack","track1","newTrains","srcTrain","srcStevs","getStopEventsInRange","newTrain","addNewTrain","genId","srcStev","removeTrain","TrainPathMarker","clip","TrainPathGroup","stageDragState","pinchState","onKeyDown","onKeyUp","hammer","$el","DIRECTION_ALL","enable","onPanStart","onPanMove","onPanEnd","onPinchStart","onPinchMove","onPinchEnd","dUnit","round","getTimeByX","findPointerTargetLine","removeStopEvent","targetTrack","stationPointedOnTop","stationsInMileageOrder","stationPointedOnBottom","pointedTrack","button","triple","newLastStev","ctrlKey","startsWith","stableIndex","addedStevs","e","concat","targetLine","prevSta","reverse","startDrag","moveDrag","pointerType","center","scrollX0","scrollY0","x0","f","pow","deltaY","preventDefault","lastScale","scale","repeat","deletingTrains","deletingStevs","fromIndex","toIndex","size","BackLayer","Pointer","TrainPathLayer","style","nativeOn","onClick","left","top","newTrack","icon","directives","rawName","expression","domProps","type","_k","keyCode","onComplete","paddingTop","lineHeight","border","name0","name1","isTopLineIntersectingPlotPane","removingTrains","removingStevs","isLineIntersectingPlotPane","trackIndex","targetTrain","clientHeight","$refs","trainNameInput","resizeObserver","ResizeObserver","updateViewSize","observe","$nextTick","stationNameInput","focus","trackNameInput","trainInfoEditor","clientWidth","default","Stage","StationAddTrackButton","StationExpandButton","StationNameInput","StationRemoveButton","StationRemoveTrackButton","TrackNameInput","TrainInfoEditor","_s","diagramFileName","enableSwitchEditMode","screen","fetch","then","json","input","accept","onchange","reader","FileReader","files","file","readAsText","onload","JSON","parse","clear","$buefy","notification","open","message","toString","click","stringify","blob","Blob","url","URL","createObjectURL","href","download","DiagramView","HelpView","ja","failedToLoadJSON","editButtonTooltip","undoButtonTooltip","redoButtonTooltip","vanishTrainsButtonTooltip","vanishStationsButtonTooltip","uploadButtonTooltip","downloadButtonTooltip","helpButtonTooltip","help","addNewStationTitle","addNewStationBody","addNewTrainTitle","addNewTrainBody","selectTrainTitle","selectTrainBody","editTrainTitle","editTrainBody","editTimeTitle","editTimeBody","tipsTitle","tipsBody","contactTitle","contactBody","productionTip","use","defaultNotificationDuration","defaultNotificationPosition","i18n","locale","messages","render","h","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,gECvJTW,EAAOD,QAAU,IAA0B,oC,uECA3CC,EAAOD,QAAU,IAA0B,sC,oCCA3C,W,oCCAA,W,uBCAAC,EAAOD,QAAU,IAA0B,8B,6DCA3C,W,uBCAAC,EAAOD,QAAU,IAA0B,mC,8CCA3CC,EAAOD,QAAU,IAA0B,mC,qBCA3CC,EAAOD,QAAU,IAA0B,uC,qBCA3CC,EAAOD,QAAU,IAA0B,yC,0JCAvC,EAAS,WAAa,IAAI+B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,GAAK,eAAe,QAAUN,EAAIO,WAA2B,QAAfP,EAAIQ,QAAmBJ,EAAG,YAAY,CAACE,MAAM,CAAC,GAAK,eAAeN,EAAIS,KAAKL,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,aAAa,CAACN,EAAIU,GAAG,GAAGN,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,qBAAqB,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,0BAA0B,CAAEN,EAAwB,qBAAEI,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIY,GAAG,6BAA6B,KAAO,aAAa,CAACR,EAAG,WAAW,CAACS,MAAMb,EAAIO,QAAQO,MAAMC,SAAW,cAAe,GAAGT,MAAM,CAAC,YAAY,iBAAiB,KAAO,UAAUU,GAAG,CAAC,MAAQhB,EAAIiB,sBAAsB,IAAI,GAAGjB,EAAIS,KAAMT,EAAIO,QAAQO,MAAc,SAAEV,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIY,GAAG,6BAA6B,KAAO,aAAa,CAACR,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,OAAO,KAAO,SAAS,UAAYN,EAAIO,QAAQW,QAAQC,UAAUH,GAAG,CAAC,MAAQhB,EAAIoB,sBAAsB,IAAI,GAAGpB,EAAIS,KAAMT,EAAIO,QAAQO,MAAc,SAAEV,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIY,GAAG,6BAA6B,KAAO,aAAa,CAACR,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,OAAO,KAAO,SAAS,UAAYN,EAAIO,QAAQW,QAAQG,UAAUL,GAAG,CAAC,MAAQhB,EAAIsB,sBAAsB,IAAI,GAAGtB,EAAIS,KAAMT,EAAIO,QAAQO,MAAc,SAAEV,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ1D,OAAO2E,KAAKvB,EAAIO,QAAQiB,QAAQC,QAAQ9E,OAAS,EAAIqD,EAAIY,GAAG,qCAAuCZ,EAAIY,GAAG,uCAAuC,KAAO,aAAa,CAACR,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,SAAS,KAAO,UAAUU,GAAG,CAAC,MAAQhB,EAAI0B,wBAAwB,IAAI,GAAG1B,EAAIS,KAAKL,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIY,GAAG,+BAA+B,KAAO,aAAa,CAACR,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,SAAS,KAAO,UAAUU,GAAG,CAAC,MAAQhB,EAAI2B,wBAAwB,IAAI,GAAGvB,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIY,GAAG,iCAAiC,KAAO,aAAa,CAACR,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,WAAW,KAAO,UAAUU,GAAG,CAAC,MAAQhB,EAAI4B,0BAA0B,IAAI,KAAKxB,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,6BAA6BF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,2BAA2B,CAAEN,EAAwB,qBAAEI,EAAG,OAAO,CAACO,YAAY,iBAAiB,CAACP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIY,GAAG,6BAA6B,KAAO,aAAa,CAACR,EAAG,WAAW,CAACS,MAAqB,QAAfb,EAAIQ,QAAoB,cAAe,GAAGF,MAAM,CAAC,YAAY,OAAO,KAAO,UAAUU,GAAG,CAAC,MAAQhB,EAAI6B,sBAAsB,IAAI,GAAG7B,EAAIS,YAAY,IACjmFqB,EAAkB,CAAC,WAAa,IAAI9B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACO,YAAY,gBAAgBL,MAAM,CAAC,GAAK,kBAAkB,CAACF,EAAG,MAAM,CAAC2B,YAAY,CAAC,OAAS,QAAQzB,MAAM,CAAC,IAAM,EAAQ,e,gLCKxN,G,qBACjB,WAAmB0B,GAAgB,uBAAhB,KAAAA,WACX,KAAAC,MAA0B,GAC1B,KAAAC,MAA0B,G,6CAElC,WAA0B,OAAOjC,KAAKgC,MAAMtF,OAAS,I,oBACrD,WAA0B,OAAOsD,KAAKiC,MAAMvF,OAAS,I,kBAErD,SAAKwF,GACGlC,KAAKgC,MAAMtF,QAAUsD,KAAK+B,UAC1B/B,KAAKgC,MAAMpE,OAAO,EAAGoC,KAAKgC,MAAMtF,OAASsD,KAAK+B,SAAW,GAE7D/B,KAAKgC,MAAMhF,KAAKkF,GAChBlC,KAAKiC,MAAMrE,OAAO,K,mBAGtB,WACIoC,KAAKgC,MAAMpE,OAAO,GAClBoC,KAAKiC,MAAMrE,OAAO,K,kBAGtB,WACI,IAAMsE,EAAOlC,KAAKgC,MAAMG,MACpBD,IACAlC,KAAKiC,MAAMjF,KAAKkF,GAChBA,EAAKE,KAAK/E,MAAM6E,EAAKlC,S,kBAI7B,WACI,IAAMkC,EAAOlC,KAAKiC,MAAME,MACpBD,IACAlC,KAAKgC,MAAMhF,KAAKkF,GAChBA,EAAKG,KAAKhF,MAAM6E,EAAKlC,W,8BCvCZ,G,6DAArB,oCACI,KAAAsC,gBAAkB,EAClB,KAAAC,YAAc,EACd,KAAAC,YAAc,MACd,KAAAC,cAAgB,IAChB,KAAAC,cAAgB,GAChB,KAAAC,QAAU,KACV,KAAAC,QAAU,EACV,KAAAC,OAAS,GACT,KAAAC,OAAS,G,oDAGT,SAAgBtE,GACZ,IAAMA,GAAiB,UAAZ,eAAOA,GACd,KAAM,eAEV,IAAMuE,EAAK,IAAIC,EAIf,OAHArG,OAAOsG,OAAOF,EAAIpG,OAAOuG,YACrBvG,OAAO2E,KAAKyB,GAAII,QAAO,SAAA9D,GAAG,YAAe+D,IAAX5E,EAAEa,MAAoBgE,KAAI,SAAAhE,GAAG,MAAI,CAACA,EAAKb,EAAEa,SAEpE0D,M,MClBM,E,WACjB,WACoBO,EACAC,EACTjF,GACQ,IAARkF,EAAQ,uDAAD,EAAC,uBAHC,KAAAF,UACA,KAAAC,KACT,KAAAjF,OACA,KAAAkF,O,6CAYX,WACI,MAAO,CACHD,GAAIvD,KAAKuD,GACTjF,KAAM0B,KAAK1B,S,uBAXnB,SAAgBE,EAAQ8E,GAEpB,IAAM9E,GAAiB,UAAZ,eAAOA,IAAyB,MAARA,EAAE+E,GACjC,KAAM,uBAEV,OAAO,IAAIE,EAAMH,EAAS9E,EAAE+E,GAAI/E,EAAEF,KAAME,EAAEgF,U,KCd7B,E,WACjB,WACoBD,EACTjF,EACAoF,GAGc,IAFdC,EAEc,wDADdC,EACc,uDADJ,EACVC,EAAc,uDAAD,EAAC,uBALL,KAAAN,KACT,KAAAjF,OACA,KAAAoF,UACA,KAAAC,WACA,KAAAC,UACA,KAAAC,aAEF,KAAAC,OAAkB,G,kDAE3B,SAAYC,GAAgD,IAAlCC,EAAkC,uDAAlBhE,KAAK8D,OAAOpH,OAElD,OADAsD,KAAK8D,OAAOlG,OAAOoG,EAAO,EAAGD,GACtB/D,KAAK8D,OAAOE,K,yBAGvB,SAAYhF,GACR,IAAMgF,EAAQhE,KAAK8D,OAAOG,QAAQjF,GAC9BgF,GAAS,GAAGhE,KAAK8D,OAAOlG,OAAOoG,EAAO,K,oBAe9C,WACI,MAAO,CACHT,GAAIvD,KAAKuD,GACTjF,KAAM0B,KAAK1B,KACXoF,QAAS1D,KAAK0D,QACdI,OAAQ9D,KAAK8D,OACbH,SAAU3D,KAAK2D,a,uBAjBvB,SAAgBnF,GAEZ,IAAMA,GAAiB,UAAZ,eAAOA,IAAyB,MAARA,EAAE+E,IAAwB,MAAV/E,EAAEF,MAA6B,MAAbE,EAAEkF,UAAmBQ,MAAMC,QAAQ3F,EAAEsF,QACtG,KAAM,yBAEV,IAAMR,EAAU,IAAIc,EAAQ5F,EAAE+E,GAAI/E,EAAEF,KAAME,EAAEkF,UAAWlF,EAAEmF,UAGzD,OAFCnF,EAAEsF,OAAiBT,KAAI,SAACrE,GAAD,OAAY,EAAMqF,SAASrF,EAAGsE,MACjDgB,SAAQ,SAAAtF,GAAC,OAAIsE,EAAQQ,OAAO9G,KAAKgC,MAC/BsE,M,KC5BM,G,yCAGjB,WACoBiB,EACTR,EACAS,GAAY,uBAFH,KAAAD,QACT,KAAAR,QACA,KAAAS,OAEF,KAAAC,YAAsBC,EAAUC,a,4CAEzC,WACI,OAAO3E,KAAK+D,MAAMT,U,gBAEtB,WACI,IAAMU,EAAQhE,KAAKuE,MAAMK,MAAMX,QAAQjE,MACvC,OAAOgE,GAAS,EAAIhE,KAAKuE,MAAMK,MAAMZ,EAAQ,QAAKZ,I,gBAEtD,WACI,IAAMY,EAAQhE,KAAKuE,MAAMK,MAAMX,QAAQjE,MACvC,OAAOgE,GAAS,EAAIhE,KAAKuE,MAAMK,MAAMZ,EAAQ,QAAKZ,K,2BAItD,SAAoB5E,EAAQ+F,EAAcM,GAEtC,IAAMrG,GAAiB,UAAZ,eAAOA,IAAgC,MAAfA,EAAEsG,WAAkC,MAAbtG,EAAEuG,SAAgC,MAAbvG,EAAEwG,SAAgC,MAAbxG,EAAEyG,QAClG,KAAM,sBAEV,IAAM3B,EAAUuB,EAASrG,EAAEsG,WACrBf,EAAQT,GAAWA,EAAQQ,OAAOoB,MAAK,SAAAlG,GAAC,OAAIA,EAAEuE,IAAM/E,EAAEuG,WAC5D,IAAMzB,IAAWS,EACb,KAAM,sBAEV,OAAOvF,EAAEwG,SAAWxG,EAAEyG,QAClB,CAAE,IAAIP,EAAUH,EAAOR,EAAOvF,EAAEwG,UAChC,CAAE,IAAIN,EAAUH,EAAOR,EAAOvF,EAAEwG,SAAU,IAAIN,EAAUH,EAAOR,EAAOvF,EAAEyG,c,MAlCzE,EAAAN,aAAe,E,ICDL,E,WACjB,WACoBpB,EACTjF,GAAY,uBADH,KAAAiF,KACT,KAAAjF,OAEX,KAAAsG,MAAqB,G,sDAErB,SAAgBO,GAAkD,IAAjCnB,EAAiC,uDAAjBhE,KAAK4E,MAAMlI,OAExD,OADAsD,KAAK4E,MAAMhH,OAAOoG,EAAO,EAAGmB,GACrBnF,KAAK4E,MAAMZ,K,6BAGtB,SAAgBmB,GACZ,IAAMnB,EAAQhE,KAAK4E,MAAMX,QAAQkB,GAC7BnB,GAAS,GAAGhE,KAAK4E,MAAMhH,OAAOoG,EAAO,K,kCAG7C,SAAqBoB,GACjB,IAD0C,EACpC7H,EAAS,GACX8H,GAAU,EAF4B,iBAGvBrF,KAAK4E,OAHkB,IAG1C,2BAA+B,KAApBO,EAAoB,QACvBA,GAAQC,EAAUE,OAAMD,GAAU,GAClCA,GAAS9H,EAAOP,KAAKmI,GACrBA,GAAQC,EAAUG,KAAIF,GAAU,IANE,8BAQ1C,OAAO9H,I,+BAGX,WACI,IADa,EACPiI,EAAyB,GADlB,iBAEMxF,KAAK4E,OAFX,IAEb,2BAA+B,KAApBO,EAAoB,QACzBA,EAAK7B,QAAQK,UAAYwB,EAAKM,MAAQN,EAAKM,KAAKnC,SAAW6B,EAAK7B,SAClEkC,EAAMxI,KAAK,CACTmI,OACAO,MAAO,MACPlB,KAAMW,EAAKX,KACXhB,KAAM2B,EAAKM,KAAKnC,QAAQI,QAAUyB,EAAK7B,QAAQI,QAAUyB,EAAK7B,QAAQM,QAAUuB,EAAK7B,QAAQO,aAGjG2B,EAAMxI,KAAK,CACTmI,OACAO,MAAO,QACPlB,KAAMW,EAAKX,KACXhB,KAAM2B,EAAKpB,MAAMP,OAEf2B,EAAK7B,QAAQK,UAAYwB,EAAKQ,MAAQR,EAAKQ,KAAKrC,SAAW6B,EAAK7B,SAClEkC,EAAMxI,KAAK,CACTmI,OACAO,MAAO,MACPlB,KAAMW,EAAKX,KACXhB,KAAM2B,EAAKQ,KAAKrC,QAAQI,QAAUyB,EAAK7B,QAAQI,QAAUyB,EAAK7B,QAAQM,QAAUuB,EAAK7B,QAAQO,cAtBtF,8BA0Bb,OAAO2B,I,oBAeX,WACI,IADE,EACII,EAAoF,GADxF,iBAEiB5F,KAAK4E,OAFtB,IAEF,2BAA+B,KAApBO,EAAoB,QACrBU,EAAWD,EAAMA,EAAMlJ,OAAS,GAClCmJ,GAAYA,EAASd,SAAWI,EAAKpB,MAAMR,IAAMsC,EAASb,SAAWa,EAASZ,QAC9EY,EAASZ,QAAUE,EAAKX,KAExBoB,EAAM5I,KAAK,CACP8H,UAAWK,EAAK7B,QAAQC,GACxBwB,QAASI,EAAKpB,MAAMR,GACpByB,QAASG,EAAKX,KACdS,QAASE,EAAKX,QAXxB,8BAeF,MAAO,CACHjB,GAAIvD,KAAKuD,GACTjF,KAAM0B,KAAK1B,KACXsH,MAAOA,M,uBA7Bf,SAAgBpH,EAAQqG,GAEpB,IAAMrG,GAAiB,UAAZ,eAAOA,IAAyB,MAARA,EAAE+E,IAAwB,MAAV/E,EAAEF,OAAgB4F,MAAMC,QAAQ3F,EAAEoH,OACjF,KAAM,uBAEV,IAAMrB,EAAQ,IAAIuB,EAAMtH,EAAE+E,GAAI/E,EAAEF,MAGhC,OAFCE,EAAEoH,MAAgBG,SAAQ,SAACjI,GAAD,OAAY,EAAUkI,aAAalI,EAAGyG,EAAOM,MACnEP,SAAQ,SAAAa,GAAI,OAAIZ,EAAMK,MAAM5H,KAAKmI,MAC/BZ,M,KCjEM,E,WACjB,WACW0B,EACApB,EACArD,GAA+B,uBAF/B,KAAAyE,SACA,KAAApB,WACA,KAAArD,SAEX,KAAA0E,MAAQ,EACR,KAAAC,QAAU,E,gEA8BV,WACI,OAAOxJ,OAAOyJ,OAAOpG,KAAK6E,UAAUwB,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAE5C,QAAU6C,EAAE7C,a,mBAGrE,WACI,QAAS1D,KAAKkG,Q,uBAElB,SAAU3C,GACFA,GAAMvD,KAAKkG,SAASlG,KAAKkG,Q,2BAGjC,SAAc5C,GACV,OAAO,aAAIkD,IAAIxG,KAAK6E,SAAUvB,EAAQC,GAAID,K,2BAE9C,SAAcA,GACV,aAAImD,OAAOzG,KAAK6E,SAAUvB,EAAQC,M,yBAEtC,SAAYgB,GACR,OAAO,aAAIiC,IAAIxG,KAAKwB,OAAQ+C,EAAMhB,GAAIgB,K,yBAE1C,SAAYA,GACR,aAAIkC,OAAOzG,KAAKwB,OAAQ+C,EAAMhB,M,qBAGlC,WAAO,WACH,GAAyC,GAArC5G,OAAO2E,KAAKtB,KAAK6E,UAAUnI,OAA/B,CAKA,IANG,EAMGmI,EAAW7E,KAAK0G,4BAEhBC,EAAiB9B,EAAS,GAAGnB,QARhC,iBASamB,GATb,IASH,2BAA0B,KAAf/G,EAAe,QACxBA,EAAE4F,QAAU5F,EAAE4F,QAAUiD,GAVvB,8BAaH,IAbG,EAaCC,EAAI,EACJC,EAAc,EAdf,iBAeahC,GAfb,IAeH,2BAA0B,KAAf,EAAe,QACxB+B,IAAM,EAAElD,QAAUmD,GAAe7G,KAAKiG,OAAOnD,OAC7C,EAAEc,QAAUgD,EACR,EAAEjD,UACJ,EAAEG,OAAOQ,SAAQ,SAACtF,EAAGxC,GACnBwC,EAAEwE,KAAOoD,GAAKpK,EAAI,GAAK,EAAKyJ,OAAOvD,iBAErC,EAAEmB,WAAa+C,GAAK,EAAE9C,OAAOpH,OAAS,GAAKsD,KAAKiG,OAAOvD,cACvDkE,IAAM,EAAE9C,OAAOpH,OAAS,GAAKsD,KAAKiG,OAAOvD,gBAEzC/F,OAAOyJ,OAAO,EAAEtC,QAAQQ,SAAQ,SAAAtF,GAAC,OAAIA,EAAEwE,KAAOoD,KAC9C,EAAE/C,WAAa+C,GAEjBC,EAAc,EAAEnD,SA5Bf,8BA+BH1D,KAAKmG,QAAUtB,EAASA,EAASnI,OAAS,GAAGmH,gBA7BzC7D,KAAKmG,QAAU,I,oBAgCvB,WACI,MAAO,CACHF,OAAQjG,KAAKiG,OACbpB,SAAU7E,KAAK6E,SACfrD,OAAQxB,KAAKwB,W,uBAzFrB,SAAgBhD,GAEZ,IAAMA,GAAiB,UAAZ,eAAOA,IAAsC,UAArB,eAAOA,EAAEqG,WAA2C,UAAnB,eAAOrG,EAAEgD,QACzE,KAAM,eAQV,IANA,IAAMyE,EAAS,EAAc5B,SAAS7F,EAAEyH,QAAU,IAC5CpB,EAAsClI,OAAOuG,YAAYvG,OAAOyJ,OAAO5H,EAAEqG,UAAUxB,KAAI,SAACvF,GAAD,MAAY,CAAEA,EAAEyF,GAAI,EAAQc,SAASvG,QAC5H0D,EAAkC7E,OAAOuG,YAAYvG,OAAOyJ,OAAO5H,EAAEgD,QAAQ6B,KAAI,SAACrE,GAAD,MAAY,CAAEA,EAAEuE,GAAI,EAAMc,SAASrF,EAAG6F,QACvHtD,EAAU,IAAIuF,EAAQb,EAAQpB,EAAUrD,GAE1C0E,EAAQ1H,EAAE0H,MAAQa,KAAKC,IAAIxI,EAAE0H,MAAO,GAAK,EAC7C,MAAgBvJ,OAAOyJ,OAAOvB,GAA9B,eAAyC,CAApC,IAAM/G,EAAC,KACRoI,EAAQa,KAAKC,IAAIlJ,EAAEyF,GAAI2C,GADc,uBAErBpI,EAAEgG,QAFmB,IAErC,2BAA0B,KAAf9E,EAAe,QACtBkH,EAAQa,KAAKC,IAAIhI,EAAEuE,GAAI2C,IAHU,+BAMzC,cAAgBvJ,OAAOyJ,OAAO5E,GAA9B,eAAuC,CAAlC,IAAM,EAAC,KACR0E,EAAQa,KAAKC,IAAI,EAAEzD,GAAI2C,GAM3B,OAJA3E,EAAQ2E,MAAQA,EAEhB3E,EAAQ0F,UAED1F,M,KCvCM,EAArB,oCACI,KAAA2F,WAAa,sBACb,KAAAC,cAAgB,GAChB,KAAAC,wBAA0B,EAC1B,KAAAC,oBAAsB,GACtB,KAAAC,iBAAmB,qBACnB,KAAAC,oBAAsB,KACtB,KAAAC,oBAAsB,qBACtB,KAAAC,0BAA4B,IAC5B,KAAAC,2BAA6B,IAC7B,KAAAC,2BAA6B,qBAC7B,KAAAC,0BAA4B,IAC5B,KAAAC,2BAA6B,IAC7B,KAAAC,2BAA6B,qBAC7B,KAAAC,uBAAyB,GACzB,KAAAC,wBAA0B,GAC1B,KAAAC,qBAAuB,GACvB,KAAAC,kBAAoB,qBACpB,KAAAC,iBAAmB,EACnB,KAAAC,iBAAmB,qBACnB,KAAAC,gBAAkB,EAClB,KAAAC,qBAAuB,GACvB,KAAAC,mBAAqB,GACrB,KAAAC,gBAAkB,qBAClB,KAAAC,eAAiB,IACjB,KAAAC,eAAiB,qBACjB,KAAAC,eAAiB,EACjB,KAAAC,eAAiB,eACjB,KAAAC,yBAA2B,GAC3B,KAAAC,uBAAyB,GAEzB,KAAAC,YAAc,EACd,KAAAC,aAAe,EACf,KAAAC,aAAe,eACf,KAAAC,qBAAuB,GACvB,KAAAC,+BAAiC,EACjC,KAAAC,wBAA0B,iBAC1B,KAAAC,uBAAyB,iBACzB,KAAAC,uBAAyB,iBACzB,KAAAC,4BAA8B,IAC9B,KAAAC,6BAA+B,EAC/B,KAAAC,6BAA+B,iBAC/B,KAAAC,2BAA6B,GAC7B,KAAAC,uBAAyB,GACzB,KAAAC,iBAAmB,iBACnB,KAAAC,oBAAsB,GACtB,KAAAC,sBAAwB,GACxB,KAAAC,WAAa,ICzCI,E,WAArB,oCACI,KAAAjJ,UAAW,EACX,KAAAkJ,UAAY,EACZ,KAAAC,WAAa,EACb,KAAAC,gBAAyD,GACzD,KAAAC,eAAiB,EACjB,KAAAC,YAAc,EACd,KAAAC,SAAW,EACX,KAAAC,uBAA6E,KAC7E,KAAAC,kBAAoF,KACpF,KAAAC,oBAA0D,KAC1D,KAAAC,aAMW,KACX,KAAAC,mBAIW,KACX,KAAAC,uBAAyC,KACzC,KAAAC,qBAAqC,KACrC,KAAAC,sBAKW,KACX,KAAAC,mBAAoB,E,yCAEpB,WACI,OAA4B,MAArB9K,KAAKyK,cACmB,MAA3BzK,KAAK0K,oBACL1K,KAAK+K,e,wBAGb,WACI,OAAsC,MAA/B/K,KAAK2K,wBAA+D,MAA7B3K,KAAK4K,yB,KCzCtC,E,WAArB,oCACI,KAAA3E,OAAqB,IAAI,EACzB,KAAApF,MAAmB,IAAI,EACvB,KAAAU,QAAmB,EAAQ8C,SAAS,CAAEQ,SAAU,GAAIrD,OAAQ,KAC5D,KAAAP,QAAU,IAAI,EAAe,K,iDAE7B,SAAWuC,GACP,OAAOA,EAAOxD,KAAKiG,OAAOoC,gBAAkBrI,KAAKiG,OAAOkB,cAAgBnH,KAAKuB,QAAQ0E,OAAOrD,U,wBAEhG,SAAWgE,GACP,OAAOA,EAAI5G,KAAKiG,OAAOoC,gBAAkBrI,KAAKiG,OAAOkB,cAAgBnH,KAAKuB,QAAQ0E,OAAOrD,U,wBAE7F,SAAW4B,GACP,OAAOA,EAAOxE,KAAKuB,QAAQ0E,OAAOpD,OAAS7C,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAKuB,QAAQ0E,OAAOtD,U,wBAEvG,SAAWqI,GACP,OAAQA,EAAIhL,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAKuB,QAAQ0E,OAAOtD,SAAW3C,KAAKuB,QAAQ0E,OAAOpD,W,KCrBvG,EAAS,WAAa,IAAI9C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACO,YAAY,gBAAgB,CAACP,EAAG,QAAQ,CAACO,YAAY,qBAAqBK,GAAG,CAAC,sBAAwBhB,EAAIkL,wBAAwB,oBAAsBlL,EAAImL,sBAAsB,mBAAqBnL,EAAIoL,qBAAqB,iBAAmBpL,EAAIqL,sBAAsBjL,EAAG,MAAM,CAACO,YAAY,mBAAmB,CAACP,EAAG,qBAAqB,CAACkL,IAAI,qBAAqBlL,EAAG,mBAAmB,CAACkL,IAAI,mBAAmBlL,EAAG,oBAAoB,CAACkL,IAAI,oBAAoBtL,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQsD,WAAW,SAAS/G,GAAG,OAAOqC,EAAG,wBAAwB,CAACd,IAAK,yBAA4BvB,EAAI,GAAGuC,MAAM,CAAC,QAAUvC,GAAGiD,GAAG,CAAC,oBAAsBhB,EAAImL,4BAA2BnL,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQsD,WAAW,SAAS/G,GAAG,OAAOqC,EAAG,wBAAwB,CAACd,IAAK,yBAA4BvB,EAAI,GAAGuC,MAAM,CAAC,QAAUvC,QAAOiC,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQsD,WAAW,SAAS/G,GAAG,OAAOqC,EAAG,2BAA2B,CAACd,IAAK,4BAA+BvB,EAAI,GAAGuC,MAAM,CAAC,QAAUvC,GAAGiD,GAAG,CAAC,oBAAsBhB,EAAImL,4BAA2BnL,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQsD,WAAW,SAAS/G,GAAG,OAAOiC,EAAIuL,GAAIxN,EAAQ,QAAE,SAASkB,GAAG,OAAOmB,EAAG,8BAA8B,CAACd,IAAK,+BAAkCvB,EAAI,GAAI,IAAOkB,EAAI,GAAGqB,MAAM,CAAC,QAAUvC,EAAE,MAAQkB,YAAU,IAAI,IAC91C,EAAkB,GCDlB,EAAS,WAAa,IAAIe,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAW,QAAEI,EAAG,UAAU,CAACE,MAAM,CAAC,OAASN,EAAIwL,aAAaxK,GAAG,CAAC,UAAYhB,EAAIyL,iBAAiB,UAAYzL,EAAI0L,iBAAiB,MAAQ1L,EAAI2L,aAAa,SAAW3L,EAAI4L,mBAAmB,MAAQ5L,EAAI6L,kBAAkB,YAAc7L,EAAI8L,cAAc,SAAW9L,EAAI+L,aAAa,CAAC3L,EAAG,aAAaJ,EAAIgM,GAAG,GAAGhM,EAAIiM,aAAa7L,EAAG,mBAAmBJ,EAAIgM,GAAG,GAAGhM,EAAIiM,aAAa7L,EAAG,UAAU,CAACA,EAAG,YAAY,IAAI,GAAGJ,EAAIS,MACzf,EAAkB,G,2ECDlB,EAAS,WAAa,IAAIT,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,eAAe,CAACN,EAAIuL,GAAIvL,EAAiB,eAAE,SAASf,GAAG,OAAOmB,EAAG,UAAU,CAACd,IAAIL,EAAEK,KAAK,CAACc,EAAG,SAAS,CAACE,MAAM,CAAC,OAASrB,EAAEiN,cAAejN,EAAa,YAAEmB,EAAG,SAAS,CAACE,MAAM,CAAC,OAASrB,EAAEkN,eAAenM,EAAIS,MAAM,MAAKT,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQsD,WAAW,SAAS/G,GAAG,OAAOqC,EAAG,gBAAgBJ,EAAIgM,GAAG,CAAC1M,IAAK,WAAcvB,EAAI,GAAGuC,MAAM,CAAC,QAAUvC,IAAIiC,EAAIiM,iBAAgB,IACte,EAAkB,GCDlB,EAAS,WAAa,IAAIjM,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAAEJ,EAAiC,8BAAEI,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAIoM,iBAAiBpM,EAAIuL,GAAIvL,EAAmB,iBAAE,SAAS3B,GAAG,OAAO+B,EAAG,SAAS,CAACd,IAAIjB,EAAEiB,IAAIgB,MAAM,CAAC,OAASjC,QAAO+B,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAIqM,iBAAiBrL,GAAG,CAAC,MAAQhB,EAAIsM,oBAAoB,UAAYtM,EAAIuM,4BAA4B,GAAGvM,EAAIS,KAAMT,EAAIuD,QAAQK,UAAY5D,EAAIwM,iCAAkCpM,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAIyM,oBAAoBzM,EAAIS,KAAMT,EAAIuD,QAAgB,SAAEvD,EAAIuL,GAAIvL,EAAIuD,QAAc,QAAE,SAAStE,GAAG,OAAOmB,EAAG,cAAcJ,EAAIgM,GAAG,CAAC1M,IAAK,SAAYU,EAAIuD,QAAU,GAAI,IAAOtE,EAAI,GAAGqB,MAAM,CAAC,QAAUN,EAAIuD,QAAQ,MAAQtE,IAAIe,EAAIiM,gBAAejM,EAAIS,MAAM,IAC7wB,EAAkB,GCDlB,G,UAAS,WAAa,IAAIT,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAA8B,2BAAEI,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAIkM,cAAc9L,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAImM,aAAanL,GAAG,CAAC,MAAQhB,EAAI0M,aAAa,UAAY1M,EAAI2M,qBAAqB,GAAG3M,EAAIS,OACjT,EAAkB,GCcD,G,UAArB,yG,0BAQU,EAAAmM,UAAuE,KARjF,8CAEE,WAAwB,OAAO3M,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,sBAUE,WACE,MAAO,CACL+L,OAAQ,CACN5M,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAWvE,qBACzDtI,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,MACnCxD,KAAK+M,UAAU/C,UACfhK,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,OAErCwJ,OAAQhN,KAAK6M,WAAWnE,eACxBuE,YAAajN,KAAK6M,WAAWpE,eAC7ByE,WAAW,KApBjB,uBAwBE,WACE,MAAO,CACL3J,GAAI,eAAF,OAAiBvD,KAAKsD,QAAQC,GAA9B,YAAoCvD,KAAK+D,MAAMR,IACjDyH,EAAGhL,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAWvE,qBAC5D1B,EAAG5G,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,MAAQxD,KAAK6M,WAAWtE,mBAC9D4E,MAAOnN,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAWvE,qBAAuBtI,KAAK6M,WAAW7E,wBAC3IoF,OAAQpN,KAAK6M,WAAWtE,mBACxB8E,KAAMrN,KAAK+D,MAAMzF,KACjBgP,SAAUtN,KAAK6M,WAAWtE,mBAC1BrB,WAAYlH,KAAK6M,WAAW3F,WAC5BqG,KAAMvN,KAAK6M,WAAWrE,gBACtBgF,MAAO,OACPC,cAAe,YApCrB,sCAwCE,WACE,OAAOzN,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,OAASxD,KAAK6M,WAAW1F,eACjEnH,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,MAAQxD,KAAK+M,UAAU9C,aA1ChE,0BA6CU,WAAY,OACdjK,KAAK+M,UAAUjM,UAAad,KAAK+M,UAAUW,MAAQ,UAAC1N,KAAK2M,iBAAN,OAAC,EAAgBgB,WACtE3N,KAAK+M,UAAUnC,qBAAuB5K,KAAK+D,MAC3C/D,KAAK4N,MAAM,0BAhDjB,8BAoDU,SAAiBC,GACnB7N,KAAK+M,UAAUjM,WACjBd,KAAK2M,UAAY,CACfmB,IAAKD,EAAWE,IAAIC,QACpBC,OAAQjO,KAAKsD,QAAQQ,OAAOG,QAAQjE,KAAK+D,OACzC4J,UAAU,GAEZ/N,OAAOsO,iBAAiB,YAAalO,KAAKmO,mBAC1CvO,OAAOsO,iBAAiB,UAAWlO,KAAKoO,oBA5D9C,+BAgEU,SAAkBC,GACxB,GAAIrO,KAAK2M,YACH5F,KAAKuH,IAAID,EAAML,QAAUhO,KAAK2M,UAAUmB,KAAO,IACjD9N,KAAK2M,UAAUgB,UAAW,GAExB3N,KAAK2M,UAAUgB,UAAU,CAC3B3N,KAAKsD,QAAQiL,YAAYvO,KAAK+D,OAE9B,IAAMyK,EAAYxO,KAAKM,QAAQmO,WAAWJ,EAAMK,SAC1CC,EAAW3O,KAAKsD,QAAQQ,OAAO8K,WAAU,SAAA5P,GAAC,OAAIwP,EAAYxP,EAAEwE,QAC9DmL,EAAW,EACb3O,KAAKsD,QAAQQ,OAAO9G,KAAKgD,KAAK+D,OAE9B/D,KAAKsD,QAAQQ,OAAOlG,OAAO+Q,EAAU,EAAG3O,KAAK+D,OAE/C/D,KAAKuB,QAAQ0F,aA/ErB,6BAoFU,SAAgBoH,GAAiB,WACvC,GAAIrO,KAAK2M,UAAW,CAClB/M,OAAOiP,oBAAoB,YAAa7O,KAAKmO,mBAC7CvO,OAAOiP,oBAAoB,UAAW7O,KAAKoO,iBAC3CpO,KAAKmO,kBAAkBE,GAEvB,IAAMJ,EAASjO,KAAK2M,UAAUsB,OACxBa,EAAS9O,KAAKsD,QAAQQ,OAAOG,QAAQjE,KAAK+D,OAC5CkK,GAAUa,GACZ9O,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WACJ,EAAKkB,QAAQiL,YAAY,EAAKxK,OAC9B,EAAKT,QAAQyL,YAAY,EAAKhL,MAAOkK,IAEvC5L,KAAM,WACJ,EAAKiB,QAAQiL,YAAY,EAAKxK,OAC9B,EAAKT,QAAQyL,YAAY,EAAKhL,MAAO+K,MAK3C9O,KAAK2M,UAAY,UA1GvB,GAAwC,SACpB,gBAAjB,kB,8BAIO,gBAAP,kB,8BACO,gBAAP,kB,4BANkB,EAAU,gBAD9B,QACoB,WCfgX,I,YCOjYqC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCQM,EAArB,yG,0BAOU,EAAArC,UAAyE,KAPnF,8CAEE,WAAwB,OAAO3M,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,yBASE,WACE,MAAO,CACL+L,OAAQ,CACN,EACA5M,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,SACrC5D,KAAK+M,UAAU/C,UACfhK,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,UAEvCoJ,OAAQhN,KAAK6M,WAAWzE,iBACxB6E,YAAajN,KAAK6M,WAAW1E,iBAC7B+E,WAAW,KAnBjB,4BAuBE,WACE,MAAO,CACLN,OAAQ,CACN,EACA5M,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,YACrC7D,KAAK+M,UAAU/C,UACfhK,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,aAEvCmJ,OAAQhN,KAAK6M,WAAWzE,iBACxB6E,YAAajN,KAAK6M,WAAW1E,iBAC7B+E,WAAW,KAjCjB,2BAqCE,WACE,MAAO,CACL3J,GAAI,iBAAF,OAAmBvD,KAAKsD,QAAQC,IAClCyH,EAAGhL,KAAK6M,WAAW9E,uBACnBnB,EAAG5G,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,SAAW5D,KAAK6M,WAAW5E,qBACnEkF,MAAOnN,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAW7E,wBACpGoF,OAAQpN,KAAK6M,WAAW5E,wBA3C9B,2BA+CE,WAA2B,WACnBgH,EAAgBjP,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAW7E,wBAA0BhI,KAAK6M,WAAW5E,qBACvJiH,EAAWlP,KAAKsD,QAAQhF,KAAK5B,OAAS,EAAIuS,GAAiBjP,KAAKsD,QAAQhF,KAAK5B,OAAS,GAAK,EACjG,OAAOwH,MAAMoB,KAAKtF,KAAKsD,QAAQhF,MAAM+E,KAAI,SAACjF,EAAG4F,GAC3C,MAAO,CACL3E,IAAK,iBAAF,OAAmB,EAAKiE,QAAQC,GAAhC,YAAsCS,GACzCgH,EAAG,EAAK1H,QAAQhF,KAAK5B,OAAS,EAC1B,EAAKmQ,WAAW9E,uBAAyB/D,EAAQkL,EACjD,EAAKrC,WAAW9E,uBAAyC,GAAhBkH,EAC7CrI,EAAG,EAAKtG,QAAQwM,WAAW,EAAKxJ,QAAQM,SAAW,EAAKiJ,WAAW5E,qBACnEmF,OAAQ,EAAKP,WAAW5E,qBACxBoF,KAAMjP,EACNkP,SAAU,EAAKT,WAAW5E,qBAC1Bf,WAAY,EAAK2F,WAAW3F,WAC5BqG,KAAM,EAAKV,WAAW3E,kBACtBsF,MAAO,OACPC,cAAe,eA/DvB,yCAoEE,WACE,OAAOzN,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,UAAY5D,KAAK6M,WAAW1F,eACtEnH,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,SAAW5D,KAAK+M,UAAU9C,aAtErE,4CAyEE,WACE,OAAOjK,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,aAAe7D,KAAK6M,WAAW1F,eACzEnH,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,YAAc7D,KAAK+M,UAAU9C,aA3ExE,iCA8EU,WAAmB,OACrBjK,KAAK+M,UAAUjM,UAAad,KAAK+M,UAAUW,MAAQ,UAAC1N,KAAK2M,iBAAN,OAAC,EAAgBgB,WACtE3N,KAAK+M,UAAUpC,uBAAyB3K,KAAKsD,QAC7CtD,KAAK4N,MAAM,4BAjFjB,qCAqFU,SAAwBC,GAC1B7N,KAAK+M,UAAUjM,WAAad,KAAK+M,UAAUhC,eAC7C/K,KAAK2M,UAAY,CACfmB,IAAKD,EAAWE,IAAIC,QACpBmB,SAAUnP,KAAKsD,QAAQI,QACvBiK,UAAU,GAEZ/N,OAAOsO,iBAAiB,YAAalO,KAAKmO,mBAC1CvO,OAAOsO,iBAAiB,UAAWlO,KAAKoO,oBA7F9C,+BAiGU,SAAkBC,GACpBrO,KAAK2M,YACH5F,KAAKuH,IAAID,EAAML,QAAUhO,KAAK2M,UAAUmB,KAAO,IACjD9N,KAAK2M,UAAUgB,UAAW,GAExB3N,KAAK2M,UAAUgB,WACjB3N,KAAKsD,QAAQI,QAAU1D,KAAK2M,UAAUwC,UAAYd,EAAML,QAAUhO,KAAK2M,UAAUmB,KAAO9N,KAAKuB,QAAQ0E,OAAOnD,OAC5G9C,KAAKuB,QAAQ0F,cAxGrB,6BA6GU,SAAgBoH,GAAiB,WACvC,GAAIrO,KAAK2M,UAAW,CAKlB,GAJA/M,OAAOiP,oBAAoB,YAAa7O,KAAKmO,mBAC7CvO,OAAOiP,oBAAoB,UAAW7O,KAAKoO,iBAC3CpO,KAAKmO,kBAAkBE,GAEnBrO,KAAK2M,UAAUgB,SAAU,CAC3B,IAAMwB,EAAWnP,KAAK2M,UAAUwC,SAC1BC,EAAWpP,KAAKsD,QAAQI,QAC9B1D,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ,EAAKkB,QAAQI,QAAUyL,GACrC9M,KAAM,WAAQ,EAAKiB,QAAQI,QAAU0L,KAIzCpP,KAAK2M,UAAY,UA7HvB,GAA0C,QACtB,gBAAjB,kB,8BAIO,gBAAP,kB,8BALkB,EAAY,gBALhC,eAAU,CACT0C,WAAY,CACVC,WAAA,MAGiB,WC1BkX,ICOnY,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QCEM,EAArB,uKAEE,WAAwB,OAAOtP,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,yBAME,WACE,IAAM0O,EAAQ,GACRC,EAAiBxP,KAAKuB,QAAQ0E,OAAOtD,QAAU3C,KAAKuB,QAAQ0E,OAAOpD,OACrE7D,EAAI+H,KAAK0I,KAAKD,EAAiBxP,KAAK6M,WAAWjF,2BAA6B5H,KAAK6M,WAAWjF,0BAC5FoD,EAAIhL,KAAKM,QAAQoP,WAAW1Q,GAChC,MAAOgM,EAAIhL,KAAK+M,UAAU/C,UACxBuF,EAAMvS,KAAK,CACTqC,IAAK,kBAAF,OAAoBkQ,EAAM7S,QAC7BuP,WAAY,CACVW,OAAQ,CACN5B,EACAhL,KAAK6M,WAAW1F,cAChB6D,EACAhL,KAAK+M,UAAU9C,YAEjB+C,OACEhO,EAAI,MAAQ,EAAIgB,KAAK6M,WAAWrF,oBAChCxI,EAAIgB,KAAK6M,WAAWpF,2BAA6B,EAAIzH,KAAK6M,WAAWlF,2BACrE3H,KAAK6M,WAAW/E,2BAClBmF,YACEjO,EAAI,MAAQ,EAAIgB,KAAK6M,WAAWtF,oBAChCvI,EAAIgB,KAAK6M,WAAWpF,2BAA6B,EAAIzH,KAAK6M,WAAWnF,2BACrE1H,KAAK6M,WAAWhF,2BAClBqF,WAAW,GAEbhB,YAAalN,EAAI,MAAQ,EAAI,KAAO,CAClCgM,EAAGA,EAAIhL,KAAK6M,WAAWxF,oBACvBT,EAAG5G,KAAK6M,WAAW1F,cAAgBnH,KAAK6M,WAAWzF,wBAA0BpH,KAAK6M,WAAWxF,oBAC7F8F,MAA6C,EAAtCnN,KAAK6M,WAAWxF,oBACvB+F,OAAQpN,KAAK6M,WAAWxF,oBACxBgG,KAAM,GAAF,OAAMrO,EAAI,KAAO,IACrBsO,SAAUtN,KAAK6M,WAAWxF,oBAC1BH,WAAYlH,KAAK6M,WAAW3F,WAC5BqG,KAAMvN,KAAK6M,WAAWvF,iBACtBkG,MAAO,SACPC,cAAe,YAGnBzO,GAAKgB,KAAK6M,WAAWjF,0BACrBoD,EAAIhL,KAAKM,QAAQoP,WAAW1Q,GAE9B,OAAOuQ,MA/CX,GAAuC,QACnB,gBAAjB,kB,8BADkB,EAAS,gBAL7B,eAAU,CACTF,WAAY,CACVM,aAAA,MAGiB,YCpB+W,MCOhY,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAI5P,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAkB,eAAEI,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAI6P,cAAczP,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAImM,gBAAgB,GAAGnM,EAAIS,MACtO,GAAkB,G,UCDhB,SAAUqP,GAAYrL,EAAcsL,GACtC,IAAMC,EAAO,GAAH,OAAMhJ,KAAKiJ,MAAMxL,EAAO,OAC5ByL,EAAQ,UAAGlJ,KAAKiJ,MAAMxL,EAAO,IAAM,IAAK0L,SAAS,EAAG,KACpDC,EAAQ,UAAG3L,EAAO,IAAK0L,SAAS,EAAG,KACzC,OAAO1L,EAAO,IAAM,GAAKsL,EAAlB,UAAgCC,EAAhC,YAAwCE,EAAxC,YAAiDE,GAAjD,UAA8DJ,EAA9D,YAAsEE,GAGjF,IAAMG,GAASC,SAASC,cAAc,UAChCC,GAAMH,GAAOI,WAAW,MACxB,SAAUC,GAAapD,EAAcnG,EAAoBoG,GAC3D,OAAKiD,IACLA,GAAIG,KAAJ,UAAcpD,EAAd,cAA4BpG,GACrBqJ,GAAII,YAAYtD,GAAMF,OAFZ,ECGrB,IAAqB,GAArB,0KAEE,WAA2B,OAAOnN,KAAKM,QAAQ2F,SAFjD,qBAGE,WAA0B,OAAOjG,KAAKM,QAAQO,QAHhD,0BAKE,WACE,OAAOb,KAAK+M,UAAUxC,oBAAsBvK,KAAK+M,UAAUzC,yBACxDtK,KAAK+M,UAAUrC,qBAAuB1K,KAAK+M,UAAUtC,eAP5D,sBAUE,WACE,IAAM0C,EAAQnN,KAAK+M,UAAUtC,aAAezK,KAAK6M,WAAWrD,6BAA+BxJ,KAAK6M,WAAW7D,aAC3G,MAAO,CACLgC,EAAGhL,KAAKM,QAAQoP,WAAW1P,KAAK+M,UAAU3C,aAAuB,GAAR+C,EACzDvG,EAAG5G,KAAK+M,UAAU1C,SAAmB,GAAR8C,EAC7BA,MAAOA,EACPC,OAAQD,EACRI,KAAMvN,KAAK6M,WAAW5D,aACtBiE,WAAW,KAlBjB,uBAsBE,WACE,IAAM1I,EAAOxE,KAAK+M,UAAU3C,aAAe,EACzCpK,KAAK+M,UAAU3C,YACfpK,KAAK+M,UAAU3C,YAA8D,KAAhDrD,KAAK0I,MAAMzP,KAAK+M,UAAU3C,YAAc,MACvE,MAAO,CACLY,EAAGhL,KAAKM,QAAQoP,WAAW1P,KAAK+M,UAAU3C,aAC1CxD,EAAG5G,KAAK+M,UAAU1C,SAAWrK,KAAK6M,WAAW3D,qBAC7CkE,OAAQpN,KAAK6M,WAAW3D,qBACxBmE,KAAMwC,GAAYrL,EAA4C,MAAtCxE,KAAK+M,UAAUvC,qBACvC8C,SAAUtN,KAAK6M,WAAW3D,qBAC1BhC,WAAYlH,KAAK6M,WAAW3F,WAC5BqG,KAAMvN,KAAK6M,WAAW5D,aACtBuE,MAAO,OACPC,cAAe,SACfP,WAAW,OApCjB,GAA4C,QACxB,gBAAjB,kB,+BADkB,GAAc,gBADlC,QACoB,cCb6W,MCO9X,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAInN,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACkL,IAAI,iBAAiBhL,MAAM,CAAC,GAAK,mBAAmB,OAASN,EAAI6Q,cAAc,CAAC7Q,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQC,QAAQ2B,QAAO,SAAUnE,GAAK,OAAQe,EAAIgN,UAAU7C,gBAAgBlL,EAAEuE,QAAS,SAASvE,GAAG,OAAOmB,EAAG,mBAAmBJ,EAAIgM,GAAG,CAAC1M,IAAK,SAAYL,EAAI,GAAGqB,MAAM,CAAC,MAAQrB,IAAIe,EAAIiM,gBAAejM,EAAIuL,GAAI3O,OAAOyJ,OAAOrG,EAAIwB,QAAQC,QAAQ2B,QAAO,SAAUnE,GAAK,OAAOe,EAAIgN,UAAU7C,gBAAgBlL,EAAEuE,QAAS,SAASvE,GAAG,OAAOmB,EAAG,mBAAmBJ,EAAIgM,GAAG,CAAC1M,IAAK,SAAYL,EAAI,GAAGqB,MAAM,CAAC,MAAQrB,IAAIe,EAAIiM,iBAAgB,IAC1nB,GAAkB,GCDlB,GAAS,WAAa,IAAIjM,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,SAAS,CAACkL,IAAI,iBAAiBhL,MAAM,CAAC,OAASN,EAAI8Q,sBAAsB9P,GAAG,CAAC,MAAQhB,EAAI+Q,yBAAyB3Q,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAIgR,wBAAwBhQ,GAAG,CAAC,MAAQhB,EAAIiR,iBAAiB,UAAYjR,EAAIkR,qBAAqB,IAAMlR,EAAImR,kBAAmBnR,EAA4B,yBAAE,CAACI,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAIoR,yBAAyBpQ,GAAG,CAAC,MAAQhB,EAAIqR,yBAAyB,SAAWrR,EAAIsR,+BAA+B,UAAYtR,EAAIuR,6BAA6B,UAAYvR,EAAIwR,gCAAgCxR,EAAIuL,GAAIvL,EAA0B,wBAAE,SAASR,GAAG,OAAOY,EAAG,oBAAoB,CAACd,IAAK,UAAaU,EAAIwE,MAAQ,GAAI,IAAOhF,EAAE4F,KAAc,UAAI,IAAO5F,EAAO,MAAGc,MAAM,CAAC,cAAgBd,GAAGwB,GAAG,CAAC,MAAQhB,EAAIyR,cAAc,UAAYzR,EAAI0R,yBAAwB1R,EAAIS,MAAM,IAC/4B,GAAkB,G,aCDlB,I,UAAS,WAAa,IAAIT,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAI6P,YAAY7O,GAAG,CAAC,MAAQ,SAAS2Q,GAAQ,OAAO3R,EAAI6N,MAAM,QAAS8D,EAAQ3R,EAAI4R,gBAAgB,UAAY5R,EAAI6R,gBAAgB,UAAY,SAASF,GAAQ,OAAO3R,EAAI6N,MAAM,YAAa8D,EAAQ3R,EAAI4R,gBAAgB,SAAW5R,EAAI8R,qBAAsB9R,EAAgB,aAAEI,EAAG,SAAS,CAACE,MAAM,CAAC,OAASN,EAAImM,eAAenM,EAAIS,MAAM,KACld,GAAkB,GCaD,GAArB,uKAEE,WAAwB,OAAOR,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,sBAOE,WACE,MAAO,CACLmK,EAAGhL,KAAKM,QAAQoP,WAAW1P,KAAK2R,cAAcnN,MAAuD,GAA/CxE,KAAK6M,WAAWrD,6BACtE5C,EAAG5G,KAAKM,QAAQwM,WAAW9M,KAAK2R,cAAcnO,MAAuD,GAA/CxD,KAAK6M,WAAWrD,6BACtE2D,MAAOnN,KAAK6M,WAAWrD,6BACvB4D,OAAQpN,KAAK6M,WAAWrD,6BACxB+D,KAAMvN,KAAK6M,WAAWpD,gCAb5B,wBAiBE,WACE,MAAmC,SAA5BzJ,KAAK2R,cAAcjM,QAlB9B,uBAqBE,WACE,IAAMoM,EAAgB9R,KAAK+R,mBAC3B,MAAO,CACL/G,EAAGhL,KAAKM,QAAQoP,WAAW1P,KAAK2R,cAAcnN,MAAQsN,EAAc9G,EAA0C,EAAtChL,KAAK6M,WAAWhD,oBACxFjD,EAAG5G,KAAKM,QAAQwM,WAAW9M,KAAK2R,cAAcnO,MAAQsO,EAAclL,EAAI5G,KAAK6M,WAAW/C,sBACxFqD,MAA6C,EAAtCnN,KAAK6M,WAAWhD,oBACvBuD,OAAQpN,KAAK6M,WAAW/C,sBACxBuD,KAAMwC,GAAY7P,KAAK2R,cAAcnN,KAA4C,MAAtCxE,KAAK+M,UAAUvC,qBAC1D8C,SAAUtN,KAAK6M,WAAW3D,qBAC1BhC,WAAYlH,KAAK6M,WAAW3F,WAC5BqG,KAAMvN,KAAK6M,WAAWjD,iBACtB4D,MAAO,QACPC,cAAe,SACfP,WAAW,KAlCjB,8BAsCE,WACE,IAAM8E,EAAWhS,KAAK2R,cAAcxM,KAC9B8M,EAAWD,EAASvM,KACpByM,EAAWF,EAASrM,KAC1B,GAAIsM,GAAYA,EAASlO,OAASiO,EAASjO,SAAWmO,GAAYA,EAASnO,OAASiO,EAASjO,OAAQ,CACnG,IAAMoO,EAAWF,EAAS3O,QAAQI,QAAUsO,EAAS1O,QAAQI,QAAUsO,EAAS1O,QAAQM,QAAUoO,EAAS1O,QAAQO,WAC7GuO,EAAWH,EAAS3O,QAAQI,QAAUsO,EAAS1O,QAAQI,QAAUuO,EAAS3O,QAAQO,WAAaoO,EAAS3O,QAAQM,QAChHoH,EAAImH,GAAYC,EAAW,GAC9BpS,KAAK6M,WAAW/C,wBACfkI,EAASxN,KAAOyN,EAASzN,MAAQxE,KAAKuB,QAAQ0E,OAAOpD,QACvDkE,KAAKuH,IAAI6D,EAAWC,GACtB,MAAO,CACLpH,EAAGjE,KAAKC,IAAIgE,GAAIhL,KAAK6M,WAAWlD,wBAChC/C,EAAGqL,EAAS3O,QAAQI,QAAUsO,EAAS1O,QAAQI,QAAU,EAAI1D,KAAK6M,WAAW/C,uBAIjF,MAAO,CACLkB,EAAG,EACHpE,EAAGsL,GAAYA,EAAS5O,QAAQI,QAAUsO,EAAS1O,QAAQI,SAAWuO,GAAYA,EAAS3O,QAAQI,QAAUsO,EAAS1O,QAAQI,QAAU,EAAI1D,KAAK6M,WAAW/C,yBAzDlK,6BA6DE,WACE9J,KAAK+M,UAAUzC,uBAAyB,CACtC/F,MAAOvE,KAAK2R,cAAcxM,KAAKZ,MAC/Ba,UAAW,CAAEE,KAAMtF,KAAK2R,cAAcxM,KAAMI,GAAIvF,KAAK2R,cAAcxM,SAhEzE,+BAoEE,WACE,GAAInF,KAAK+M,UAAUjM,SACjB,GAAKd,KAAK+M,UAAUtC,aAelBzK,KAAK+M,UAAUtC,aAAe,KAC9BzK,KAAK+M,UAAU7C,gBAAkB,OAhBD,CAChC,IAAM3K,EAAIS,KAAK2R,cACVpS,EAAE4F,KAAKQ,MAASpG,EAAE4F,KAAKM,OAC1BzF,KAAK+M,UAAUtC,aAAe,CAC5BlG,MAAOhF,EAAE4F,KAAKZ,MACd8N,SAAU9S,EAAE4F,KACZmN,UACG/S,EAAE4F,KAAKQ,MAASpG,EAAE4F,KAAKM,KACvBlG,EAAE4F,KAAKQ,MAAY,EAAL,EADgB,EAEjC4M,UAAWhT,EAAE4F,KACbqN,SAAU,MAEZxS,KAAK+M,UAAU7C,gBAAgB3K,EAAE4F,KAAKZ,MAAMhB,IAAI6B,UAAY,WAlFtE,GAA6C,QACzB,gBAAjB,kB,+BAIO,gBAAP,kB,qCALkB,GAAe,gBADnC,QACoB,cCdqX,MCOtY,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QCUM,GAArB,yG,0BAQE,EAAAuH,UAUW,KAlBb,8CAEE,WAAwB,OAAO3M,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,gCAoBE,WACE,IAAM4R,EAAMzS,KAAK+M,UAAU7C,gBAAgBlK,KAAKuE,MAAMhB,IACtD,wCACE8H,IAAK,oBAAF,OAAsBrL,KAAKuE,MAAMhB,IACpCmP,SACG1S,KAAK+M,UAAUlC,wBACwC,GAAtDlO,OAAO2E,KAAKtB,KAAK+M,UAAU7C,iBAAiBxN,UACzC+V,IAAQzS,KAAK+M,UAAUjC,mBAE9BuC,KAAMrN,KAAK2S,oBACR3S,KAAK4S,oBARV,IASEtF,SAAUtN,KAAK6M,WAAW/D,uBAC1B5B,WAAYlH,KAAK6M,WAAW3F,WAC5BqG,KAAMkF,IAAQA,EAAIrN,UAAYpF,KAAK6M,WAAWvD,uBAAyBtJ,KAAK6M,WAAWjE,mBAjC7F,8BAqCE,WACE,MAA0B,IAAnB5I,KAAKuE,MAAMjG,KAAa0B,KAAKuE,MAAMjG,KAAnC,WAA8C0B,KAAKuE,MAAMhB,MAtCpE,8BAyCE,WAAsB,UACd8J,EAAOrN,KAAK2S,mBACZE,EAAYpC,GAAapD,EAAMrN,KAAK6M,WAAW3F,WAAYlH,KAAK6M,WAAW/D,wBAE3EtD,EACJ,UAAAxF,KAAK+M,UAAUrC,0BAAf,SAAmCoI,QAAQ9S,KAAKuE,MAAMhB,KAAOvD,KAAK+M,UAAUjC,kBAC1E9K,KAAK+S,uBAAyB/S,KAAKgT,sBACjCC,EAAgB,UACpBzN,EAAMN,MAAK,SAAC3F,EAAG/C,GAAJ,OAAUA,EAAIgJ,EAAM9I,OAAS,GAAK8I,EAAMhJ,EAAI,GAAG2I,KAAK7B,SAAW/D,EAAE4F,KAAK7B,kBAD7D,QAEpBkC,EAAM,GACJ0N,EAAYC,IAVI,iBAWM3N,EAAM1F,MAAM0F,EAAMvB,QAAQgP,GAAoB,IAXpD,IAWpB,2BAA4E,KAAjEG,EAAiE,QACpEC,EAAKD,EAAYpI,EAAIiI,EAAiBjI,EACtCsI,EAAKF,EAAYxM,EAAIqM,EAAiBrM,EACtC2M,EAAc,GAANF,EAAUC,EAAKD,EAAKtM,KAAKyM,KAAKF,IAAMG,KAIlD,IAHIC,MAAMR,IAAcnM,KAAKyM,KAAKD,IAAUxM,KAAKyM,KAAKN,IAAcnM,KAAKuH,IAAIiF,GAASxM,KAAKuH,IAAI4E,MAC7FA,EAAYK,GAEVxM,KAAK4M,MAAMN,EAAIC,IAAOT,EAAW,OAlBnB,8BAqBpB,GAAKa,MAAMR,GAgBT,MAAO,CACLlI,EAAGiI,EAAiBjI,EACpBpE,EAAGqM,EAAiBrM,EACpBgN,SAAU,EACVzG,MAAO0F,EACPzF,OAAQpN,KAAK6M,WAAW/D,wBApB1B,IAAM+K,EAAW9M,KAAK+M,KAAK,GAAK,EAAIZ,EAAYA,IAC1Ca,EAAuB,GAAZF,EAAgBA,EAAWX,EAAY,EAClDlI,EAAIkI,GAAa,EACrBa,EAAW/T,KAAK6M,WAAW/D,uBAAyBmK,EAAiBjI,GACpE+I,GAAY/T,KAAK6M,WAAWhE,yBAA2B7I,KAAK6M,WAAW/D,wBAA0BmK,EAAiBjI,EAC/GpE,EAAIsM,GAAa,GACpBW,EAAW7T,KAAK6M,WAAW/D,uBAAyBmK,EAAiBrM,EACtEiN,GAAY7T,KAAK6M,WAAWhE,yBAA2B7I,KAAK6M,WAAW/D,wBAA0BmK,EAAiBrM,EAC9GgN,EAAW7M,KAAKiN,KAAKd,GAAanM,KAAKkN,GAAK,IAClD,MAAO,CACLjJ,IAAGpE,IAAGgN,WACNzG,MAAO0F,EACPzF,OAAQpN,KAAK6M,WAAW/D,0BA3EhC,kCAwFE,WACE,MAAO,CACL8D,OAAQ5M,KAAKgT,sBAAsBjN,SAAQ,SAAAxG,GAAC,MAAI,CAACA,EAAEyL,EAAGzL,EAAEqH,MACxDoG,OAAQhN,KAAK6M,WAAWjE,eACxBsL,QAASvX,OAAO2E,KAAKtB,KAAK+M,UAAU7C,iBAAiBxN,OAAS,EAAIsD,KAAK6M,WAAWnD,2BAA6B,EAC/GuD,YAAajN,KAAK6M,WAAWlE,eAC7BwL,eAAgBpN,KAAKC,IAAIhH,KAAK6M,WAAWlE,eAA8C,EAA9B3I,KAAK6M,WAAW9D,gBA9F/E,iCAkGE,WACE,IAAMvD,EAAQxF,KAAKoU,oBAEbzH,EAAY3M,KAAK+M,UAAUrC,mBAC3B2J,EAAU,OAAG1H,QAAH,IAAGA,OAAH,EAAGA,EAAWmG,QAAQ9S,KAAKuE,MAAMhB,IACjD,GAAIoJ,GAAa0H,IAAerU,KAAK+M,UAAUjC,kBAAmB,CAChE,IADgE,EAC5DzF,GAAWgP,EAAWjP,UADsC,iBAE7CI,GAF6C,IAEhE,2BAA0B,WAAf8O,EAAe,QACpBA,EAAKnP,OAAL,UAAakP,EAAWjP,iBAAxB,aAAa,EAAsBE,OAAQgP,EAAKnP,OAAL,UAAakP,EAAWjP,iBAAxB,aAAa,EAAsBG,MAAIF,GAAU,GAC5FA,IACFiP,EAAK9P,MAAQmI,EAAU4H,UACvBD,EAAKtJ,EAAIhL,KAAKM,QAAQoP,WAAW4E,EAAK9P,OAEpC8P,EAAKnP,OAAL,UAAakP,EAAWjP,iBAAxB,aAAa,EAAsBG,MAAIF,GAAU,IARS,+BAYlE,OAAOG,IAnHX,oCAsHE,WACE,OAAwD,MAAjDxF,KAAK+M,UAAU7C,gBAAgBlK,KAAKuE,MAAMhB,MAvHrD,mCA0HE,WACE,MAAO,CACLqJ,OAAQ5M,KAAK+S,uBAAuBhN,SAAQ,SAAAxG,GAAC,MAAI,CAACA,EAAEyL,EAAGzL,EAAEqH,MACzDoG,OAAQhN,KAAK6M,WAAWvD,uBACxB2D,YAAajN,KAAK6M,WAAWlE,eAAiB3I,KAAK6M,WAAWtD,4BAC9D4K,eAAgBpN,KAAKC,IAAIhH,KAAK6M,WAAWlE,eAAiB3I,KAAK6M,WAAWtD,4BAA2D,EAA9BvJ,KAAK6M,WAAW9D,gBA/H7H,kCAmIE,WAA0B,UAClB3D,EAAS,oBACbpF,KAAK+M,UAAUrC,0BADF,iBACb,EAAmCoI,QAAQ9S,KAAKuE,MAAMhB,WADzC,aACb,EAA2D6B,iBAD9C,QAEbpF,KAAK+M,UAAU7C,gBAAgBlK,KAAKuE,MAAMhB,IAAI6B,UAC5CC,GAAWD,EACTI,EAAQxF,KAAKoU,oBAAoBjR,QAAO,SAAA5D,GACxCA,EAAE4F,OAAF,OAAUC,QAAV,IAAUA,OAAV,EAAUA,EAAWE,OAAQ/F,EAAE4F,OAAF,OAAUC,QAAV,IAAUA,OAAV,EAAUA,EAAWG,MAAIF,GAAU,GACpE,IAAMmP,EAAWnP,EAEjB,OADI9F,EAAE4F,OAAF,OAAUC,QAAV,IAAUA,OAAV,EAAUA,EAAWG,MAAIF,GAAU,GAChCmP,KAGT,GAAIxU,KAAK+M,UAAUrC,mBAAoB,wBAClBlF,GADkB,IACrC,2BAA0B,KAAf8O,EAAe,QACxBA,EAAK9P,MAAQxE,KAAK+M,UAAUrC,mBAAmB6J,UAC/CD,EAAKtJ,EAAIhL,KAAKM,QAAQoP,WAAW4E,EAAK9P,OAHH,+BAOvC,OAAOgB,IAtJX,+BAyJE,WAAiB,WACf,OAAOxF,KAAKuE,MAAM6P,oBAAoB/Q,KAAI,SAAA9D,GACxC,0CAAYA,GAAZ,IAAeyL,EAAG,EAAK1K,QAAQoP,WAAWnQ,EAAEiF,MAAOoC,EAAG,EAAKtG,QAAQwM,WAAWvN,EAAEiE,aA3JtF,mCA+JE,SAAsBqK,GAChBA,EAAW4G,QAAU5G,EAAW6G,gBAC9B1U,KAAK+M,UAAUjM,UAAYd,KAAK+M,UAAU7C,gBAAgBlK,KAAKuE,MAAMhB,MAAQvD,KAAK+M,UAAU7C,gBAAgBlK,KAAKuE,MAAMhB,IAAI6B,WAC7HpF,KAAK+M,UAAUlC,sBAAwB,CACrCtG,MAAOvE,KAAKuE,MACZyG,EAAGhL,KAAK4S,mBAAmB5H,EAC3BpE,EAAG5G,KAAK4S,mBAAmBhM,EAC3B6G,cAAezN,KAAK4S,mBAAmBgB,UAAY,EAAI,MAAQ,UAEjE5T,KAAK4N,MAAM,wBAENC,EAAWE,IAAI4G,WAClB3U,KAAK+M,UAAU7C,gBAAkB,IAEnClK,KAAK4U,KAAK5U,KAAK+M,UAAU7C,gBAAiBlK,KAAKuE,MAAMhB,GAAI,CAAEgB,MAAOvE,KAAKuE,MAAOa,UAAW,WA7KjG,kCAkLE,WACEpF,KAAK+M,UAAUzC,uBAAyB,OAnL5C,0CAsLE,SAA6BuD,GAC3B7N,KAAK+M,UAAUzC,uBAAyB,CACtC/F,MAAOvE,KAAKuE,MACZa,UAAWpF,KAAK6U,oBAAoBhH,EAAWE,IAAI+G,QAASjH,EAAWE,IAAIW,YAzLjF,8BA6LE,SAAiBb,GACf,IAAMkH,EAAmB/U,KAAK6U,oBAAoBhH,EAAWE,IAAI+G,QAASjH,EAAWE,IAAIW,SACzF1O,KAAKgV,sBAAsBnH,EAAYkH,GAAkB,KA/L7D,sCAkME,SAAyBlH,GACvB,IAAMkH,EAAmB/U,KAAK6U,oBAAoBhH,EAAWE,IAAI+G,QAASjH,EAAWE,IAAIW,SACzF1O,KAAKgV,sBAAsBnH,EAAYkH,GAAkB,KApM7D,2BAuME,SAAclH,EAA0C8D,GACtD,IAAMsD,EAAmB,CAAE3P,KAAMqM,EAAcxM,KAAMI,GAAIoM,EAAcxM,MACvEnF,KAAKgV,sBAAsBnH,EAAYoH,GAAkB,KAzM7D,mCA4ME,SAAsBpH,EAA0CoH,EAAkCC,GAAsB,MACtH,IAAI,UAAClV,KAAK+M,UAAUrC,0BAAhB,QAAC,EAAmCiD,YAAa3N,KAAK+M,UAAUtC,aAAc,CAChF,IAAMgI,EAAMzS,KAAK+M,UAAU7C,gBAAgBlK,KAAKuE,MAAMhB,IAOtD,GAJKsK,EAAWE,IAAI4G,WAClB3U,KAAK+M,UAAU7C,gBAAkBuI,EAAM,kBAAGzS,KAAKuE,MAAMhB,GAAKkP,GAAQ,IAG/DA,EAEE,CACL,IAAM0C,EAAoB1C,EAAIrN,UAC9B,GAAK+P,EAEE,GAAKtH,EAAWE,IAAI4G,SAEpB,CACL,IADK,EACDS,GAAW,EAAOC,GAAS,EAAOC,GAAU,EAD3C,iBAEctV,KAAKuE,MAAMK,OAFzB,IAEL,2BAAqC,KAA1BO,EAA0B,QAC9BiQ,GAAYjQ,GAAQ8P,EAAiB3P,OACxC6P,EAAkB7P,KAAO2P,EAAiB3P,KAC1CgQ,GAAU,GAERnQ,GAAQgQ,EAAkB7P,OAAM8P,GAAW,GAC3CjQ,GAAQgQ,EAAkB5P,KAAI8P,GAAS,GACvCA,GAAUlQ,GAAQ8P,EAAiB1P,KACrC4P,EAAkB5P,GAAK0P,EAAiB1P,GACxC+P,GAAU,IAXT,8BAcAA,GACHtV,KAAKuV,QAAQvV,KAAK+M,UAAU7C,gBAAiBlK,KAAKuE,MAAMhB,SAhB1DkP,EAAIrN,UAAY8P,EAAgBD,EAAmB,UAFnDxC,EAAIrN,UAAY6P,OAJlBjV,KAAK4U,KAAK5U,KAAK+M,UAAU7C,gBAAiBlK,KAAKuE,MAAMhB,GAAI,CAAEgB,MAAOvE,KAAKuE,MAAOa,UAAW,UAtNjG,4BAmPE,WACEpF,KAAK+M,UAAU7C,gBAAf,kBAAoClK,KAAKuE,MAAMhB,GAAK,CAAEgB,MAAOvE,KAAKuE,MAAOa,UAAW,SApPxF,iCAuPE,SAAoB4F,EAAWpE,GAC7B,GAAI5G,KAAKuE,MAAMK,MAAMlI,QAAU,EAC7B,MAAO,CAAE4I,KAAMtF,KAAKuE,MAAMK,MAAM,GAAIW,GAAIvF,KAAKuE,MAAMK,MAAM5E,KAAKuE,MAAMK,MAAMlI,OAAS,IAIrF,IAAK,IAAIF,EAAI,EAAGA,EAAIwD,KAAKuE,MAAMK,MAAMlI,OAAS,IAAKF,EAAG,CACpD,IAAMwV,EAAWhS,KAAKuE,MAAMK,MAAMpI,GAC5B0V,EAAWlS,KAAKuE,MAAMK,MAAMpI,EAAI,GAChCgZ,EAAQxV,KAAKM,QAAQoP,WAAWsC,EAASxN,MAAQxE,KAAK6M,WAAW9D,YACjE0M,EAASzV,KAAKM,QAAQoP,WAAWwC,EAAS1N,MAAQxE,KAAK6M,WAAW9D,YAClE2M,EAAO1V,KAAKM,QAAQwM,WAAW/F,KAAK4O,IAAI3D,EAASjO,MAAMP,KAAM0O,EAASnO,MAAMP,OAASxD,KAAK6M,WAAW9D,YACrG6M,EAAU5V,KAAKM,QAAQwM,WAAW/F,KAAKC,IAAIgL,EAASjO,MAAMP,KAAM0O,EAASnO,MAAMP,OAASxD,KAAK6M,WAAW9D,YAC9G,GAAIyM,EAAQxK,GAAKA,EAAIyK,GAAUC,EAAO9O,GAAKA,EAAIgP,EAC7C,MAAO,CAAEtQ,KAAM0M,EAAUzM,GAAI2M,GAGjC,MAAO,CAAE5M,KAAMtF,KAAKuE,MAAMK,MAAM,GAAIW,GAAIvF,KAAKuE,MAAMK,MAAM5E,KAAKuE,MAAMK,MAAMlI,OAAS,MAxQvF,4CA2QE,SAA+BmR,GAC7B,GAAI7N,KAAK+M,UAAUjM,WAAad,KAAK+M,UAAUtC,aAAc,SACrDoL,EAAa7V,KAAK+M,UAAU3C,YAC5B0L,EAAiB9V,KAAK+V,kBAAkBlI,EAAWE,IAAIW,SACvDsH,EAAchW,KAAKiW,oBAAoBJ,GAC7C,GAAMC,GAAkBE,EAAY1S,UAAY,UAAA0S,EAAYvQ,YAAZ,eAAkB1B,QAASiS,EAAYjS,QAAS,UAAAiS,EAAYrQ,YAAZ,eAAkB5B,QAASiS,EAAYjS,MAAS,CAC9I,IAAMC,EAAQhE,KAAKuE,MAAMK,MAAMgK,WAAU,SAAA9Q,GAAC,OAAIA,EAAE0G,KAAOqR,KACjDK,EAAUlW,KAAKuE,MAAM4R,gBAAgB,IAAI,EAAUnW,KAAKuE,MAAOuR,EAAehS,OAAO,GAAI+R,GAAa7R,GAC5GhE,KAAK+M,UAAU7C,gBAAf,kBACGlK,KAAKuE,MAAMhB,GAAK,CACfgB,MAAOvE,KAAKuE,MACZa,UAAW,CAAEE,KAAM4Q,EAAS3Q,GAAI2Q,SAtR5C,+BA6RE,SAAkBtP,GAChB,IADyB,EACnB/B,EAAW7E,KAAKuB,QAAQmF,4BACxBlD,EAAOxD,KAAKM,QAAQmO,WAAW7H,GACjCwP,EAASvR,EAAS,GAClBwR,EAAUtP,KAAKuH,IAAI9K,EAAO4S,EAAOvS,YAJZ,iBAKTgB,GALS,IAKzB,2BAA0B,KAAf/G,EAAe,QACpBiJ,KAAKuH,IAAI9K,EAAO1F,EAAE8F,SAAWyS,IAC/BD,EAAStY,EACTuY,EAAUtP,KAAKuH,IAAI9K,EAAO1F,EAAE8F,UAE1BmD,KAAKuH,IAAI9K,EAAO1F,EAAE+F,YAAcwS,IAClCD,EAAStY,EACTuY,EAAUtP,KAAKuH,IAAI9K,EAAO1F,EAAE+F,cAZP,8BAezB,OAAOuS,IA5SX,iCA+SE,SAAoB5R,GAClB,IAD8B,EAC1B8R,EAAUtW,KAAKuE,MAAMK,MAAM,GAC3ByR,EAAUtP,KAAKuH,IAAI9J,EAAO8R,EAAQ9R,MAFR,iBAGdxE,KAAKuE,MAAMK,OAHG,IAG9B,2BAAkC,KAAvB9G,EAAuB,QAC5BiJ,KAAKuH,IAAI9J,EAAO1G,EAAE0G,MAAQ6R,IAC5BC,EAAUxY,EACVuY,EAAUtP,KAAKuH,IAAI9J,EAAO1G,EAAE0G,QANF,8BAS9B,OAAO8R,IAxTX,0CA2TE,SAA6BzI,GAC3B,GAAK7N,KAAK+M,UAAUjM,SAApB,CAMA,IAFA,IAAIyV,GAAgB,MAChBC,EAAe,MACnB,MAAkB7Z,OAAOyJ,OAAOpG,KAAK+M,UAAU7C,iBAA/C,eAAiE,CAA5D,IAAMuI,EAAG,KACNrN,EAAYqN,EAAIrN,UAClBA,IACEA,EAAUE,KAAKG,OACjB8Q,EAAexP,KAAKC,IAAIuP,EAAcnR,EAAUE,KAAKG,KAAKjB,KAAOY,EAAUE,KAAKd,OAE9EY,EAAUG,GAAGI,OACf6Q,EAAezP,KAAK4O,IAAIa,EAAcpR,EAAUG,GAAGI,KAAKnB,KAAOY,EAAUG,GAAGf,QAKlF,IAAMyQ,EAAmBjV,KAAK6U,oBAAoBhH,EAAWE,IAAI+G,QAASjH,EAAWE,IAAIW,SACnF+H,EACJxB,EAAiB3P,MAAQ2P,EAAiB1P,GAAK,CAAE0P,EAAiB3P,MAClE2P,EAAiB3P,KAAKvB,OAASkR,EAAiB1P,GAAGxB,MAAQ,CAAEkR,EAAiB3P,KAAM2P,EAAiB1P,IACrG,KAEImR,EAAY1W,KAAK+S,uBAAuB,GAC9C/S,KAAK2M,UAAY,CACfgK,GAAID,EAAUlS,KACdoS,GAAI5W,KAAKM,QAAQwM,WAAW4J,EAAUlT,MACtCqT,IAAKhJ,EAAWE,IAAI+I,QACpBhJ,IAAKD,EAAWE,IAAIC,QACpB+I,OAAQN,EAAqBA,EAAmB,GAAG1S,MAAQ,KAC3DwS,aAAcA,EACdC,aAAcA,EACdQ,kBAAmB,KACnBP,mBAAkB,OAAEA,QAAF,IAAEA,IAAsB,MAE5CzW,KAAK+M,UAAUrC,mBAAqB,CAClCiD,UAAU,EACVmF,QAAS9S,KAAK+M,UAAU7C,gBACxBqK,UAAW,GAEb3U,OAAOsO,iBAAiB,YAAalO,KAAKmO,mBAC1CvO,OAAOsO,iBAAiB,UAAWlO,KAAKoO,oBAtW5C,+BAyWE,SAAkBP,EAA0CyG,GACrDtU,KAAK+M,UAAUjM,WAIpBd,KAAK2M,UAAY,CACfgK,GAAIrC,EAAK9P,KACToS,GAAI5W,KAAKM,QAAQwM,WAAWwH,EAAK9Q,MACjCuT,OAAQzC,EAAKnP,KAAKpB,MAClB8S,IAAKhJ,EAAWE,IAAI+I,QACpBhJ,IAAKD,EAAWE,IAAIC,QACpBuI,aAAcjC,EAAKnP,KAAKM,KAAO6O,EAAKnP,KAAKM,KAAKjB,KAAO8P,EAAK9P,MAAQ,MAClEgS,aAAclC,EAAKnP,KAAKQ,KAAO2O,EAAKnP,KAAKQ,KAAKnB,KAAO8P,EAAK9P,KAAO,MACjEwS,kBAAmB,CAAE1C,EAAKnP,MAC1BsR,mBAAoB,CAAEnC,EAAKnP,OAE7BnF,KAAK+M,UAAUrC,mBAAqB,CAClCiD,UAAU,EACVmF,QAAS,kBAAGwB,EAAKnP,KAAKZ,MAAMhB,GAAK,CAAEgB,MAAO+P,EAAKnP,KAAKZ,MAAOa,UAAW,CAAEE,KAAMgP,EAAKnP,KAAMI,GAAI+O,EAAKnP,QAClGoP,UAAW,GAEb3U,OAAOsO,iBAAiB,YAAalO,KAAKmO,mBAC1CvO,OAAOsO,iBAAiB,UAAWlO,KAAKoO,oBA/X5C,+BAkYE,SAAkBC,GAAiB,WACjC,GAAIrO,KAAK2M,WAAa3M,KAAK+M,UAAUrC,sBAC9B1K,KAAK+M,UAAUrC,mBAAmBiD,UAAY5G,KAAK4M,MAAMtF,EAAMyG,QAAU9U,KAAK2M,UAAUkK,IAAKxI,EAAMK,QAAU1O,KAAK2M,UAAUmB,KAAO,IACtI9N,KAAK+M,UAAUrC,mBAAmBiD,UAAW,EAC7C3N,KAAK+M,UAAU1C,SAAWrK,KAAK2M,UAAUiK,IAEvC5W,KAAK+M,UAAUrC,mBAAmBiD,WAC/B3N,KAAK+M,UAAUvC,sBAClBxK,KAAK+M,UAAU3C,YAAcpK,KAAK2M,UAAUgK,GAA0F,GAArF5P,KAAKiJ,OAAO3B,EAAMyI,QAAU9W,KAAK2M,UAAUkK,KAAO7W,KAAKuB,QAAQ0E,OAAOpD,OAAS,KAElI7C,KAAK+M,UAAUrC,mBAAmB6J,UAC/BvU,KAAK+M,UAAUjC,kBAEd9K,KAAK+M,UAAU3C,YAAcpK,KAAK2M,UAAUgK,GAD5C5P,KAAK4O,IAAI3V,KAAK2M,UAAU6J,aAAczP,KAAKC,IAAIhH,KAAK2M,UAAU4J,aAAcvW,KAAK+M,UAAU3C,YAAcpK,KAAK2M,UAAUgK,KAExH3W,KAAK2M,UAAU8J,qBAAoB,CACrC,IAAMjI,EAAYxO,KAAKM,QAAQmO,WAAWJ,EAAMK,SAC1CuI,EAAgBjX,KAAK2M,UAAU8J,mBAAmB,GAAGnT,QACrD4T,EAAaD,EAAcnT,OAAOoB,MAAK,SAAAlG,GAAC,OAAI+H,KAAKuH,IAAItP,EAAEwE,KAAOgL,GAAa,EAAK3B,WAAW9D,eACjG,GAAImO,EAAY,wBACKlX,KAAK2M,UAAU8J,oBADpB,IACd,2BAAsD,KAA3CtR,EAA2C,QACpDA,EAAKpB,MAAQmT,GAFD,mCApZ1B,6BA8ZE,WAAe,WACb,GAAIlX,KAAK2M,WAAa3M,KAAK+M,UAAUrC,mBAAoB,CAGvD,GAFA9K,OAAOiP,oBAAoB,YAAa7O,KAAKmO,mBAC7CvO,OAAOiP,oBAAoB,UAAW7O,KAAKoO,iBACvCpO,KAAK+M,UAAUrC,mBAAmBiD,SAAU,CAC9C,GAAI3N,KAAK2M,UAAU8J,oBAAsBzW,KAAK2M,UAAUoK,OAAQ,CAC9D,IAAMjE,EAAU9S,KAAK2M,UAAU8J,mBACzBM,EAAS/W,KAAK2M,UAAUoK,OACxBI,EAASnX,KAAK2M,UAAU8J,mBAAmB,GAAG1S,MAChDgT,GAAUI,GACZnX,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ0Q,EAAQxO,SAAQ,SAAAa,GAAI,OAAIA,EAAKpB,MAAQgT,MACnD1U,KAAM,WAAQyQ,EAAQxO,SAAQ,SAAAa,GAAI,OAAIA,EAAKpB,MAAQoT,QAKzD,IAAM5C,EAAYvU,KAAK+M,UAAUrC,mBAAmB6J,UACpD,GAAiB,GAAbA,EACF,GAAKvU,KAAK+M,UAAUjC,kBAYb,CACL,IAAMsM,EAAYza,OAAOyJ,OAAOpG,KAAK+M,UAAUrC,mBAAmBoI,SAASzP,KAAI,SAAAoP,GAC7E,IADmF,EAC7E4E,EAAW5E,EAAIlO,MACf+S,EAAW7E,EAAIrN,UAAYiS,EAASE,qBAAqB9E,EAAIrN,WAAaiS,EAASzS,MACnF4S,EAAW,EAAKjW,QAAQkW,YAAY,IAAI,EAAM,EAAKlW,QAAQmW,QAAS,KAHS,iBAI7DJ,GAJ6D,IAInF,2BAAgC,KAArBK,EAAqB,QAC9BH,EAASrB,gBAAgB,IAAI,EAAUqB,EAAUG,EAAQ5T,MAAO4T,EAAQnT,KAAO+P,KALE,8BASnF,OAFA,EAAKgB,QAAQ,EAAKxI,UAAU7C,gBAAiBuI,EAAIlO,MAAMhB,IACvD,EAAKqR,KAAK,EAAK7H,UAAU7C,gBAAiBsN,EAASjU,GAAI,CAAEgB,MAAOiT,EAAUpS,UAAW,OAC9EoS,KAETxX,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQgV,EAAU9S,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQqW,YAAYrT,OAClElC,KAAM,WAAQ+U,EAAU9S,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQkW,YAAYlT,aA3B/B,OAC/B,EAAO,UACXvE,KAAK2M,UAAUqK,yBADJ,QAEXra,OAAOyJ,OAAOpG,KAAK+M,UAAU7C,iBAAiBnE,SAAQ,SAAA0M,GACpD,OAAOA,EAAIrN,UAAYqN,EAAIlO,MAAMgT,qBAAqB9E,EAAIrN,WAAaqN,EAAIlO,MAAMK,SAErF,EAAQN,SAAQ,SAAAa,GAAI,OAAIA,EAAKX,MAAQ+P,KACrCvU,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ,EAAQkC,SAAQ,SAAAa,GAAI,OAAIA,EAAKX,MAAQ+P,MACnDlS,KAAM,WAAQ,EAAQiC,SAAQ,SAAAa,GAAI,OAAIA,EAAKX,MAAQ+P,SAsB3DvU,KAAK+M,UAAUrC,mBAAqB,KACpC1K,KAAK2M,UAAY,UAndvB,GAA4C,QACxB,gBAAjB,kB,+BAKO,gBAAP,kB,6BANkB,GAAc,gBALlC,eAAU,CACT0C,WAAY,CACVwI,gBAAA,OAGiB,cC5BoX,MCOrY,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QCDM,GAArB,uKAEE,WAAwB,OAAO7X,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,uBAWE,WACE,MAAO,CACLiX,KAAM,CACJ9M,EAAGhL,KAAKuB,QAAQ0E,OAAOxD,cACvBmE,EAAG5G,KAAK6M,WAAW1F,cACnBgG,MAAOnN,KAAK+M,UAAU/C,UAAYhK,KAAKuB,QAAQ0E,OAAOxD,cACtD2K,OAAQpN,KAAK+M,UAAU9C,WAAajK,KAAK6M,WAAW1F,oBAjB5D,GAAuC,QACnB,gBAAjB,kB,+BADkB,GAAS,gBAL7B,eAAU,CACTkI,WAAY,CACV0I,eAAA,OAGiB,cCjBoX,MCOrY,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QCiBM,GAArB,yG,0BAQU,EAAAC,eAA2G,KAC3G,EAAAC,WAA2C,KATrD,8CAEE,WAAwB,OAAOjY,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,uBAWE,WACE,MAAO,CACLsM,MAAOnN,KAAK+M,UAAU/C,UACtBoD,OAAQpN,KAAK+M,UAAU9C,cAd7B,kCAkBE,WACE,OAAOjK,KAAKuB,QAAQmF,8BAnBxB,qBAsBU,WACN9G,OAAOsO,iBAAiB,YAAalO,KAAKmO,mBAC1CvO,OAAOsO,iBAAiB,UAAWlO,KAAKoO,iBACxCiC,SAASnC,iBAAiB,UAAWlO,KAAKkY,WAC1C7H,SAASnC,iBAAiB,QAASlO,KAAKmY,SAExC,IAAMC,EAAS,IAAI,IAAOpY,KAAKqY,KAC/BD,EAAOzZ,IAAI,OAAO6H,IAAI,CAAE8L,UAAW,IAAOgG,gBAC1CF,EAAOzZ,IAAI,SAAS6H,IAAI,CAAE+R,QAAQ,IAClCH,EAAOrX,GAAG,WAAYf,KAAKwY,YAC3BJ,EAAOrX,GAAG,UAAWf,KAAKyY,WAC1BL,EAAOrX,GAAG,SAAUf,KAAK0Y,UACzBN,EAAOrX,GAAG,aAAcf,KAAK2Y,cAC7BP,EAAOrX,GAAG,YAAaf,KAAK4Y,aAC5BR,EAAOrX,GAAG,WAAYf,KAAK6Y,cApC/B,uBAuCU,WACNjZ,OAAOiP,oBAAoB,YAAa7O,KAAKmO,mBAC7CvO,OAAOiP,oBAAoB,UAAW7O,KAAKoO,iBAC3CiC,SAASxB,oBAAoB,UAAW7O,KAAKkY,WAC7C7H,SAASxB,oBAAoB,QAAS7O,KAAKmY,WA3C/C,8BA8CU,SAAiBtK,GAAwC,MACzDQ,EAAQR,EAAWE,IAIzB,GADA/N,KAAK+M,UAAU5C,eAAiBkE,EAAMyI,QAClC9W,KAAK+M,UAAUvC,oBAAqB,CACtC,IAAMsO,EAAQ/R,KAAKgS,OAAO1K,EAAMyI,QAAU9W,KAAK+M,UAAUvC,oBAAoBqM,KAAO7W,KAAK6M,WAAW1D,gCACpGnJ,KAAK+M,UAAU3C,YAAc0O,EAAQ9Y,KAAKuB,QAAQ0E,OAAO3D,gBAAkBtC,KAAK+M,UAAUvC,oBAAoBmM,QACzG,GAAI,UAAC3W,KAAK+M,UAAUrC,0BAAhB,QAAC,EAAmCiD,SAE7C,GADA3N,KAAK+M,UAAU3C,YAAwE,GAA1DrD,KAAKgS,MAAM/Y,KAAKM,QAAQ0Y,WAAW3K,EAAMyG,SAAW,IAC7EzG,EAAMyG,SAAW9U,KAAKuB,QAAQ0E,OAAOxD,cAAe,CACtD,IAAM8H,EAAoBvK,KAAKiZ,sBAAsB5K,EAAMK,SACvDnE,GACFvK,KAAK+M,UAAUxC,kBAAf,OAAmCA,QAAnC,IAAmCA,IAAqB,KACxDvK,KAAK+M,UAAU1C,SAAWrK,KAAKM,QAAQwM,WAAWvC,EAAkB/G,OAEpExD,KAAK+M,UAAUxC,kBAAoB,UAGrCvK,KAAK+M,UAAUxC,kBAAoB,KAGnCsD,EAAW4G,QAAU5G,EAAW6G,gBAClC1U,KAAK+M,UAAUzC,uBAAyB,MAI1C,IAAMG,EAAezK,KAAK+M,UAAUtC,aACpC,GAAIA,EAAc,CACZA,EAAa6H,UAAY,EAC3BtS,KAAK+M,UAAU3C,YAAcrD,KAAKC,IAAIhH,KAAK+M,UAAU3C,YAAaK,EAAa4H,SAAS7N,MAC/EiG,EAAa6H,UAAY,IAClCtS,KAAK+M,UAAU3C,YAAcrD,KAAK4O,IAAI3V,KAAK+M,UAAU3C,YAAaK,EAAa4H,SAAS7N,OAGtFiG,EAAa+H,WACf/H,EAAalG,MAAM2U,gBAAgBzO,EAAa+H,UAChD/H,EAAa+H,SAAW,MAG1B,IAAM,EAAoBnE,EAAMyG,SAAW9U,KAAKuB,QAAQ0E,OAAOxD,cAC7DzC,KAAKiZ,sBAAsB5K,EAAMK,cAAWtL,EAC9C,GAAI,EAAmB,OACf+V,EAAW,UAAG,EAAkBpV,aAArB,QAA8B,EAAkBT,QAAQQ,OAAO,GAC1EoS,EAAUzL,EAAalG,MAAM4R,gBACjC,IAAI,EACF1L,EAAalG,MACb4U,EACAnZ,KAAK+M,UAAU3C,aAEjBK,EAAa6H,UAAY,GAAgC,GAA1B7H,EAAa6H,WAAkBtS,KAAK+M,UAAU3C,aAAeK,EAAa4H,SAAS7N,UAAQpB,EAAY,GAExIqH,EAAa+H,SAAW0D,MAlGhC,mCAuGU,SAAsBtP,GAAS,WAC/BwS,EAAsBpZ,KAAKqZ,uBAAuBnU,MAAK,SAAApH,GAAC,OAC5DiJ,KAAKuH,IAAI,EAAKhO,QAAQwM,WAAWhP,EAAE8F,SAAWgD,GAAKG,KAAKC,IAAuC,GAAnC,EAAK6F,WAAW1E,iBAAwB,EAAK0E,WAAW9D,gBACtH,GAAIqQ,EACF,MAAO,CAAE9V,QAAS8V,EAAqBrV,MAAO,KAAMP,KAAM4V,EAAoBxV,SAGhF,IAAM0V,EAAyBtZ,KAAKqZ,uBAAuBnU,MAAK,SAAApH,GAAC,OAC/DiJ,KAAKuH,IAAI,EAAKhO,QAAQwM,WAAWhP,EAAE+F,YAAc+C,GAAKG,KAAKC,IAAuC,GAAnC,EAAK6F,WAAW1E,iBAAwB,EAAK0E,WAAW9D,gBACzH,GAAIuQ,EACF,MAAO,CAAEhW,QAASgW,EAAwBvV,MAAO,KAAMP,KAAM8V,EAAuBzV,YAGtF,IAAMP,EAAUtD,KAAKqZ,uBAAuBnU,MAAK,SAAApH,GAAC,OAChD,EAAKwC,QAAQwM,WAAWhP,EAAE8F,SAAW,EAAKrC,QAAQ0E,OAAOvD,cAAgBqE,KAAKC,IAAqC,GAAjC,EAAK6F,WAAWpE,eAAsB,EAAKoE,WAAW9D,aAAenC,GACvJ,EAAKtG,QAAQwM,WAAWhP,EAAE+F,YAAc,EAAKtC,QAAQ0E,OAAOvD,cAAgBqE,KAAKC,IAAqC,GAAjC,EAAK6F,WAAWpE,eAAsB,EAAKoE,WAAW9D,aAAenC,KAE5J,GAAItD,EAAS,CACX,IAAMiW,EAAejW,EAAQQ,OAAOoB,MAAK,SAAAlG,GAAC,OAAI+H,KAAKuH,IAAI,EAAKhO,QAAQwM,WAAW9N,EAAEwE,MAAQoD,GAAKG,KAAKC,IAAqC,GAAjC,EAAK6F,WAAWpE,eAAsB,EAAKoE,WAAW9D,gBAC7J,GAAIwQ,EACF,MAAO,CAAEjW,UAASS,MAAOwV,EAAc/V,KAAM+V,EAAa/V,SA3HlE,0BAgIU,SAAaqK,GAAwC,UACrDpD,EAAezK,KAAK+M,UAAUtC,aACpC,GAAIA,EAAc,CAChB,GAA6B,GAAzBoD,EAAWE,IAAIyL,QAAexZ,KAAK+M,UAAUxC,oBACjB,GAA1BE,EAAa6H,YACf7H,EAAa6H,UAAYtS,KAAK+M,UAAU3C,aAAeK,EAAa4H,SAAS7N,KAAO,GAAK,GAEvFiG,EAAa+H,UAAS,SAClBiH,EAAShP,EAAa+H,SAASzO,OAAS0G,EAAa4H,SAAStO,QAClE0G,EAAa6H,UAAY,GAAK7H,EAAa4H,SAAStO,QAAtB,UAA+B0G,EAAa4H,SAAS5M,YAArD,aAA+B,EAA4B1B,QACzF0G,EAAa6H,UAAY,GAAK7H,EAAa4H,SAAStO,QAAtB,UAA+B0G,EAAa4H,SAAS1M,YAArD,aAA+B,EAA4B5B,QAEvF0V,GACFhP,EAAa4H,SAAS7N,KAAOxE,KAAK+M,UAAU3C,YAC5CK,EAAalG,MAAM2U,gBAAgBzO,EAAa+H,WAEhD/H,EAAa4H,SAAW5H,EAAa+H,SAEvC/H,EAAa+H,SAAW,KAG5B,GAA6B,GAAzB3E,EAAWE,IAAIyL,OACjB,GAAI/O,EAAa4H,UAAY5H,EAAa8H,UACpC9H,EAAa+H,UACf/H,EAAalG,MAAM2U,gBAAgBzO,EAAa+H,UAElDxS,KAAK+M,UAAUtC,aAAe,SACzB,CACL,IAAMiP,EAAcjP,EAAa6H,UAAY,EAAI7H,EAAa4H,SAAS5M,KAAOgF,EAAa4H,SAAS1M,KAChG+T,GACFjP,EAAalG,MAAM2U,gBAAgBzO,EAAa4H,UAChD5H,EAAa4H,SAAWqH,IAExB1Z,KAAKuV,QAAQvV,KAAKuB,QAAQC,OAAQiJ,EAAalG,MAAMhB,IACrDvD,KAAK+M,UAAUtC,aAAe,OAMlCoD,EAAW4G,QAAU5G,EAAW6G,eAC/B7G,EAAWE,IAAI4L,SACf9L,EAAWE,IAAI4G,UAChB,UAAC3U,KAAKgY,sBAAN,OAAC,EAAqBrK,UACtB,UAAC3N,KAAK+M,UAAUrC,0BAAhB,OAAC,EAAmCiD,UACnC3N,KAAK+M,UAAUtC,eAClBzK,KAAK+M,UAAU7C,gBAAkB,KAG/BlK,KAAK+M,UAAUlC,uBAAyB,UAACgD,EAAW4G,OAAOpU,MAAMgL,WAAzB,OAAC,EAA6BuO,WAAW,qBACnF5Z,KAAK4N,MAAM,sBAlLjB,wBAsLU,SAAWC,GAAwC,MACrDA,EAAW4G,QAAU5G,EAAW6G,eAClC,UAAC1U,KAAKgY,sBAAN,OAAC,EAAqBrK,WACtB3N,KAAK+M,UAAU7C,gBAAkB,IAE/BlK,KAAKgY,iBACPhY,KAAKgY,eAAiB,QA5L5B,gCAgMU,SAAmBnK,GAAwC,WACjE,GAAIA,EAAW4G,QAAU5G,EAAW6G,eAAiB1U,KAAK+M,UAAUtC,aAAc,CAChF,IAAMA,EAAezK,KAAK+M,UAAUtC,aAIpC,GAHIA,EAAa+H,UACf/H,EAAalG,MAAM2U,gBAAgBzO,EAAa+H,UAE9C/H,EAAalG,MAAMK,MAAMlI,QAAU,EACrCsD,KAAKuV,QAAQvV,KAAKuB,QAAQC,OAAQiJ,EAAalG,MAAMhB,QAChD,CACL,IAAMgP,EAAY9H,EAAa8H,UAC/B,GAAIA,EAAW,CACb,IAAMsH,EAAcpP,EAAalG,MAAMK,MAAMX,QAAQsO,GAC/CuH,EAAarP,EAAa6H,UAAY,EAC1C7H,EAAalG,MAAMK,MAAMzB,QAAO,SAAC4W,EAAGvd,GAAJ,OAAUA,EAAIqd,KAAepP,EAAalG,MAAMK,MAAMzB,QAAO,SAAC4W,EAAGvd,GAAJ,OAAUA,EAAIqd,KACzGpP,EAAa6H,UAAY,EAC3BtS,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQqI,EAAalG,MAAMK,MAAMhH,OAAOic,EAAc,IAC5DxX,KAAM,WAAQyX,EAAWxV,SAAQ,SAAAa,GAAI,OAAIsF,EAAalG,MAAMK,MAAM5H,KAAKmI,SAGzEnF,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQqI,EAAalG,MAAMK,MAAMhH,OAAO,EAAGic,IACjDxX,KAAM,WAAQoI,EAAalG,MAAMK,MAAQkV,EAAWE,OAAOvP,EAAalG,MAAMK,eAIlF5E,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ,EAAKmT,QAAQ,EAAKhU,QAAQC,OAAQiJ,EAAalG,MAAMhB,KACnElB,KAAM,WAAQ,EAAKuS,KAAK,EAAKrT,QAAQC,OAAQiJ,EAAalG,MAAMhB,GAAIkH,EAAalG,UAIvFvE,KAAK+M,UAAUtC,aAAe,KAC9BzK,KAAK+M,UAAU7C,gBAAkB,QAC5B,GAAI2D,EAAW4G,QAAU5G,EAAW6G,eAAiB1U,KAAK+M,UAAUjM,SACzE,GAAI+M,EAAWE,IAAI+G,SAAW9U,KAAKuB,QAAQ0E,OAAOxD,cAAe,CAC/D,IAAMwX,EAAaja,KAAK+M,UAAUxC,kBAClC,GAAI0P,IAAeA,EAAWlW,QAAUkW,EAAW3W,QAAQK,UAAW,OAC9DI,EAAK,UAAGkW,EAAWlW,aAAd,QAAuBkW,EAAW3W,QAAQQ,OAAO,GACtDS,EAAQvE,KAAKuB,QAAQkW,YAAY,IAAI,EAAMzX,KAAKuB,QAAQmW,QAAS,KACvEnT,EAAM4R,gBAAgB,IAAI,EAAU5R,EAAOR,EAAO/D,KAAK+M,UAAU3C,cACjEpK,KAAK+M,UAAU7C,gBAAf,kBAAoC3F,EAAMhB,GAAK,CAAEgB,MAAOA,EAAOa,UAAW,OAC1EpF,KAAK+M,UAAUtC,aAAe,CAC5BlG,MAAOvE,KAAKuB,QAAQC,OAAO+C,EAAMhB,IACjC8O,SAAUrS,KAAKuB,QAAQC,OAAO+C,EAAMhB,IAAIqB,MAAM,GAC9C0N,UAAW,EACXC,UAAW,KACXC,SAAU,WAGT,CACL,IAAMhP,EAAOxD,KAAKM,QAAQmO,WAAWZ,EAAWE,IAAIW,SAC9CwL,EAAUla,KAAKqZ,uBAAuBc,UAAUjV,MAAK,SAAApH,GAAC,OAAIA,EAAE8F,QAAUJ,KACtEE,EAAUwW,GACb1W,EAAO0W,EAAQrW,YAAc7D,KAAKuB,QAAQ0E,OAAOnD,OAASoX,EAAQxW,QACnEF,EAAOxD,KAAKuB,QAAQ0E,OAAOnD,OACvBQ,EAAU,EAAQe,SAAS,CAC/Bd,GAAIvD,KAAKuB,QAAQmW,QACjBpZ,KAAM,GACNoF,UACAI,OAAQ,CAAE,CAAEP,GAAIvD,KAAKuB,QAAQmW,QAASpZ,KAAM,OAE9C0B,KAAK4U,KAAK5U,KAAKuB,QAAQsD,SAAUvB,EAAQC,GAAID,GAC7CtD,KAAKuB,QAAQ0F,UAEbjH,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WACJ,EAAKmT,QAAQ,EAAKhU,QAAQsD,SAAUvB,EAAQC,IAC5C,EAAKhC,QAAQ0F,WAEf5E,KAAM,WACJ,EAAKuS,KAAK,EAAKrT,QAAQsD,SAAUvB,EAAQC,GAAID,GAC7C,EAAK/B,QAAQ0F,aAIjBjH,KAAK+M,UAAUpC,uBAAyBrH,EACxCtD,KAAK4N,MAAM,4BAjRnB,8BAsRU,SAAiBC,GACnBA,EAAW4G,QAAU5G,EAAW6G,eAClC1U,KAAKoa,UAAUvM,EAAWE,IAAI+I,QAASjJ,EAAWE,IAAIC,WAxR5D,+BA4RU,SAAkBK,GACxBrO,KAAKqa,SAAShM,EAAMyI,QAASzI,EAAML,WA7RvC,6BAgSU,SAAgBK,GAClBrO,KAAKgY,iBACPhY,KAAKqa,SAAShM,EAAMyI,QAASzI,EAAML,SACnChO,KAAKgY,eAAiB,QAnS5B,wBAuSU,SAAW3J,GACQ,SAArBA,EAAMiM,aACRta,KAAKoa,UAAU/L,EAAMkM,OAAOvP,EAAGqD,EAAMkM,OAAO3T,KAzSlD,uBA6SU,SAAUyH,GACS,SAArBA,EAAMiM,aACRta,KAAKqa,SAAShM,EAAMkM,OAAOvP,EAAGqD,EAAMkM,OAAO3T,KA/SjD,sBAmTU,SAASyH,GACU,SAArBA,EAAMiM,aAA0Bta,KAAKgY,gBACvChY,KAAKqa,SAAShM,EAAMkM,OAAOvP,EAAGqD,EAAMkM,OAAO3T,KArTjD,uBA0TU,SAAUoE,EAAWpE,GACtB5G,KAAK+M,UAAUvC,sBAClBxK,KAAKgY,eAAiB,CACpBwC,SAAUxa,KAAKuB,QAAQ0E,OAAOtD,QAC9B8X,SAAUza,KAAKuB,QAAQ0E,OAAOrD,QAC9B8X,GAAI1P,EACJ4L,GAAIhQ,EACJ+G,UAAU,MAjUlB,sBAsUU,SAAS3C,EAAWpE,GACtB5G,KAAKgY,iBACHjR,KAAK4M,MAAM3I,EAAIhL,KAAKgY,eAAe0C,GAAI9T,EAAI5G,KAAKgY,eAAepB,IAAM,IACvE5W,KAAKgY,eAAerK,UAAW,GAE7B3N,KAAKgY,eAAerK,WACtB3N,KAAKuB,QAAQ0E,OAAOtD,QAClBoE,KAAKC,IAAIhH,KAAKuB,QAAQ0E,OAAO1D,YAAcvC,KAAKuB,QAAQ0E,OAAOpD,OAAS7C,KAAK6M,WAAWxE,gBACtFtB,KAAK4O,IAAI3V,KAAKuB,QAAQ0E,OAAOzD,YAAcxC,KAAKuB,QAAQ0E,OAAOpD,QAAU7C,KAAK+M,UAAU/C,UAAYhK,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAWxE,iBACtJrI,KAAKgY,eAAewC,UAAYxP,EAAIhL,KAAKgY,eAAe0C,MAC9D1a,KAAKuB,QAAQ0E,OAAOrD,QAClBmE,KAAKC,IAAI,EAAGD,KAAK4O,IAAI3V,KAAKuB,QAAQ4E,SAAWnG,KAAK+M,UAAU9C,WAAajK,KAAK6M,WAAWxE,gBAAkBrI,KAAK6M,WAAW1F,cAAgBnH,KAAKuB,QAAQ0E,OAAOvD,eAC7J1C,KAAKgY,eAAeyC,UAAY7T,EAAI5G,KAAKgY,eAAepB,UAlVpE,+BAuVU,SAAkB/I,GAExB,IAAM8M,EAAI5T,KAAK6T,IAAI,GAAI7T,KAAKyM,KAAK3F,EAAWE,IAAI8M,QAAU7a,KAAK6M,WAAW9C,YAC1E/J,KAAKuB,QAAQ0E,OAAOtD,UAAYgY,EAAI,IAAM9M,EAAWE,IAAI+G,QAAU9U,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAKuB,QAAQ0E,OAAOtD,SAC3H3C,KAAKuB,QAAQ0E,OAAOrD,QAClBmE,KAAKC,IAAI,EAAGD,KAAK4O,IAAI3V,KAAKuB,QAAQ4E,QAAUnG,KAAK6M,WAAW1F,cAAgBnH,KAAK+M,UAAU9C,WAC3FjK,KAAKuB,QAAQ0E,OAAOrD,SAAW+X,EAAI,IAAM9M,EAAWE,IAAIW,QAAU1O,KAAK6M,WAAW1F,cAAgBnH,KAAKuB,QAAQ0E,OAAOrD,WACxH5C,KAAKuB,QAAQ0E,OAAOpD,QAAU8X,EAC9B3a,KAAKuB,QAAQ0E,OAAOnD,QAAU6X,EAC9B3a,KAAKuB,QAAQ0F,UACb4G,EAAWE,IAAI+M,mBAjWnB,0BAoWU,SAAazM,GACnBrO,KAAKiY,WAAa,CAAE8C,UAAW1M,EAAM2M,SArWzC,yBAwWU,SAAY3M,GACdrO,KAAKiY,aACPjY,KAAKuB,QAAQ0E,OAAOtD,UAAY0L,EAAM2M,MAAQhb,KAAKiY,WAAW8C,UAAY,IAAM1M,EAAMkM,OAAOvP,EAAIhL,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAKuB,QAAQ0E,OAAOtD,SACzJ3C,KAAKuB,QAAQ0E,OAAOrD,QAClBmE,KAAKC,IAAI,EAAGD,KAAK4O,IAAI3V,KAAKuB,QAAQ4E,QAAUnG,KAAK6M,WAAW1F,cAAgBnH,KAAK+M,UAAU9C,WAC3FjK,KAAKuB,QAAQ0E,OAAOrD,SAAWyL,EAAM2M,MAAQhb,KAAKiY,WAAW8C,UAAY,IAAM1M,EAAMkM,OAAO3T,EAAI5G,KAAK6M,WAAW1F,cAAgBnH,KAAKuB,QAAQ0E,OAAOrD,WACtJ5C,KAAKuB,QAAQ0E,OAAOpD,QAAUwL,EAAM2M,MAAQhb,KAAKiY,WAAW8C,UAC5D/a,KAAKuB,QAAQ0E,OAAOnD,QAAUuL,EAAM2M,MAAQhb,KAAKiY,WAAW8C,UAC5D/a,KAAKiY,WAAW8C,UAAY1M,EAAM2M,MAClChb,KAAKuB,QAAQ0F,aAjXnB,wBAqXU,SAAWoH,GACbrO,KAAKiY,aACPjY,KAAK4Y,YAAYvK,GACjBrO,KAAKiY,WAAa,QAxXxB,uBA4XU,SAAU5J,GAAoB,WACpC,IAAKA,EAAM4M,SACQ,OAAb5M,EAAMhP,MACRW,KAAK+M,UAAUvC,oBAAsB,CACnCqM,IAAK7W,KAAK+M,UAAU5C,eACpBwM,GAAI3W,KAAK+M,UAAU3C,cAGN,WAAbiE,EAAMhP,MACRW,KAAK+M,UAAUjC,mBAAoB,GAEpB,UAAbuD,EAAMhP,KAAmBW,KAAK+M,UAAUjM,WAAad,KAAK+M,UAAUW,MAAM,CAG5E,IAFA,IAAMwN,EAA0B,GAC1BC,EAAsD,GAC5D,MAAkBxe,OAAOyJ,OAAOpG,KAAK+M,UAAU7C,iBAA/C,eAAiE,CAA5D,IAAMuI,EAAG,KACZ,GAAKA,EAAIrN,UAEF,CACL,IAAMgW,EAAY3I,EAAIlO,MAAMK,MAAMX,QAAQwO,EAAIrN,UAAUE,MAClD+V,EAAU5I,EAAIlO,MAAMK,MAAMX,QAAQwO,EAAIrN,UAAUG,IAChD+V,EAAOD,EAAUD,EAAY,EACnC,GAAIE,GAAQ7I,EAAIlO,MAAMK,MAAMlI,OAAS,EACnCwe,EAAele,KAAKyV,EAAIlO,YAExB,IAAK,IAAI/H,EAAI4e,EAAW5e,GAAK6e,IAAW7e,EACtC2e,EAAcne,KAAK,CAAEmI,KAAMsN,EAAIlO,MAAMK,MAAMpI,GAAIwH,MAAOxH,SAT1D0e,EAAele,KAAKyV,EAAIlO,OAc5B2W,EAAe5W,SAAQ,SAAAC,GAAK,OAAI,EAAKgR,QAAQ,EAAKhU,QAAQC,OAAQ+C,EAAMhB,OACxE4X,EAAc7W,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM2U,gBAAgBa,EAAE5U,SAC1DnF,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WACJ+Y,EAAc7W,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM4R,gBAAgB4D,EAAE5U,KAAM4U,EAAE/V,UAClEkX,EAAe5W,SAAQ,SAAAC,GAAK,OAAI,EAAKqQ,KAAK,EAAKrT,QAAQC,OAAQ+C,EAAMhB,GAAIgB,OAE3ElC,KAAM,WACJ6Y,EAAe5W,SAAQ,SAAAC,GAAK,OAAI,EAAKgR,QAAQ,EAAKhU,QAAQC,OAAQ+C,EAAMhB,OACxE4X,EAAc7W,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM2U,gBAAgBa,EAAE5U,YAG9DnF,KAAK+M,UAAU7C,gBAAkB,MAvazC,qBA4aU,SAAQmE,GACG,OAAbA,EAAMhP,MACRW,KAAK+M,UAAUvC,oBAAsB,MAEtB,WAAb6D,EAAMhP,MACRW,KAAK+M,UAAUjC,mBAAoB,KAjbzC,2BAqbU,SAAc+C,GAEpB,OADAA,EAAWE,IAAI+M,kBACR,MAvbX,GAAmC,QACf,gBAAjB,kB,+BADkB,GAAK,gBALzB,eAAU,CACTzL,WAAY,CACVkM,UAAA,GAAWC,WAASC,sBAGH,cCnC2W,MCO5X,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAI1b,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIgN,UAAUjM,UAAYf,EAAIuD,QAAQK,UAAY5D,EAAIwM,iCAAkCpM,EAAG,SAAS,CAACub,MAAO3b,EAAS,MAAEM,MAAM,CAAC,KAAO,OAAO,KAAO,YAAYsb,SAAS,CAAC,MAAQ,SAASjK,GAAQ,OAAO3R,EAAI6b,QAAQlK,OAAY3R,EAAIS,MAClU,GAAkB,GCUD,GAArB,uKAEE,WAAwB,OAAOR,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,iBAOE,WACE,MAAO,CACLgb,KAAM,GAAF,OAAK7b,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW7E,wBAAzD,MACJ8T,IAAK,GAAF,OAAK9b,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,YAAc7D,KAAKuB,QAAQ0E,OAAOvD,cAA5E,MACH0K,OAAQ,GAAF,OAAKpN,KAAKuB,QAAQ0E,OAAOvD,cAAzB,SAXZ,4CAeE,WACE,OAAO1C,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,aAAe7D,KAAK6M,WAAW1F,eACzEnH,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,YAAc7D,KAAK+M,UAAU9C,aAjBxE,qBAoBU,WAAO,WACb,IAAKjK,KAAK+M,UAAUhC,aAAc,CAChC,IAAMgR,EAAW/b,KAAKsD,QAAQyL,YAAY,IAAI,EAAM/O,KAAKsD,QAAStD,KAAKuB,QAAQmW,QAAS,KACxF1X,KAAKuB,QAAQ0F,UAEbjH,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WACJ,EAAKkB,QAAQiL,YAAYwN,GACzB,EAAKxa,QAAQ0F,WAEf5E,KAAM,WACJ,EAAKiB,QAAQyL,YAAYgN,GACzB,EAAKxa,QAAQ0F,aAIjBjH,KAAK+M,UAAUnC,qBAAuBmR,EACtC/b,KAAK4N,MAAM,4BAtCjB,GAAmD,QAC/B,gBAAjB,kB,+BAIO,gBAAP,kB,+BALkB,GAAqB,gBADzC,QACoB,cCX2X,MCO5Y,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAI7N,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAoC,iCAAEI,EAAG,SAAS,CAACub,MAAO3b,EAAS,MAAEM,MAAM,CAAC,KAAON,EAAIic,KAAK,KAAO,YAAYL,SAAS,CAAC,MAAQ,SAASjK,GAAQ,OAAO3R,EAAI6b,QAAQlK,OAAY3R,EAAIS,MAClR,GAAkB,GCSD,GAArB,uKAEE,WAAwB,OAAOR,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,gBAOE,WACE,OAAOb,KAAKsD,QAAQK,SAAW,aAAe,iBARlD,iBAWE,WACE,MAAO,CACLkY,KAAM,GAAF,OAAK7b,KAAK6M,WAAW9E,uBAArB,MACJ+T,IAAK,GAAF,OAAK9b,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,YAA1C,MACHuJ,OAAQ,GAAF,OAAKpN,KAAKuB,QAAQ0E,OAAOvD,cAAzB,SAfZ,4CAmBE,WACE,OAAO1C,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,aAAe7D,KAAK6M,WAAW1F,eACzEnH,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQO,YAAc7D,KAAK+M,UAAU9C,aArBxE,qBAwBU,WACDjK,KAAK+M,UAAUhC,eAClB/K,KAAKsD,QAAQK,UAAY3D,KAAKsD,QAAQK,SACtC3D,KAAKuB,QAAQ0F,eA3BnB,GAAiD,QAC7B,gBAAjB,kB,+BAIO,gBAAP,kB,+BALkB,GAAmB,gBADvC,QACoB,cCVyX,MCO1Y,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAIlH,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAAC8b,WAAW,CAAC,CAAC3d,KAAK,OAAO4d,QAAQ,SAASnd,MAAOgB,EAAIgN,UAAgC,uBAAEoP,WAAW,qCAAqCT,MAAO3b,EAAS,MAAEqc,SAAS,CAAC,MAAQrc,EAAIkX,cAAc3Y,MAAMyC,GAAG,CAAC,SAAW,SAAS2Q,GAAQ,OAAIA,EAAO2K,KAAKpY,QAAQ,QAAQlE,EAAIuc,GAAG5K,EAAO6K,QAAQ,QAAQ,GAAG7K,EAAOrS,IAAI,SAAkB,KAAcU,EAAIyc,WAAW9K,IAAS,KAAO3R,EAAIyc,eAC1d,GAAkB,GCSD,GAArB,uKAEE,WAAwB,OAAOxc,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,yBAQE,WAAyB,MACvB,iBAAOb,KAAK+M,UAAUpC,8BAAtB,QAAgD,KATpD,iBAYE,WACE,MAAO,CACLkR,KAAM,GAAF,OAAK7b,KAAK6M,WAAW9E,uBAArB,MACJ+T,IAAK,GAAF,OAAK9b,KAAKM,QAAQwM,WAAW9M,KAAKiX,cAAcrT,SAAW5D,KAAK6M,WAAW5E,qBAAuB,EAAlG,MACHkF,MAAO,GAAF,OAAKnN,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAW7E,wBAAlG,MACLoF,OAAQ,GAAF,OAAKpN,KAAK6M,WAAW5E,qBAAuB,EAA5C,MACNwU,WAAY,MACZC,WAAY,GAAF,OAAK1c,KAAK6M,WAAW5E,qBAArB,MACV0U,OAAQ,OACRrP,SAAU,GAAF,OAAKtN,KAAK6M,WAAW5E,qBAArB,SArBd,wBAyBU,WACN,IAAMgP,EAAgBjX,KAAKiX,cACrB2F,EAAQ5c,KAAKiX,cAAc3Y,KAC3Bue,EAAS7c,KAAKqY,IAAyBtZ,MACzC6d,GAASC,IACX5F,EAAc3Y,KAAOue,EACrB7c,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ6U,EAAc3Y,KAAOse,GACnCva,KAAM,WAAQ4U,EAAc3Y,KAAOue,MAGvC7c,KAAK+M,UAAUpC,uBAAyB,SArC5C,GAA8C,QAC1B,gBAAjB,kB,+BADkB,GAAgB,gBADpC,QACoB,cCVsX,MCOvY,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAI5K,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIgN,UAAUjM,UAAYf,EAAI+c,8BAA+B3c,EAAG,SAAS,CAACub,MAAO3b,EAAS,MAAEM,MAAM,CAAC,KAAO,QAAQ,KAAO,YAAYsb,SAAS,CAAC,MAAQ,SAASjK,GAAQ,OAAO3R,EAAI6b,QAAQlK,OAAY3R,EAAIS,MACxS,GAAkB,GCWD,GAArB,uKAEE,WAAwB,OAAOR,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,iBAOE,WACE,MAAO,CACLgb,KAAM,GAAF,OAAK7b,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW7E,wBAAzD,MACJ8T,IAAK,GAAF,OAAK9b,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,SAAW5D,KAAKuB,QAAQ0E,OAAOvD,cAAzE,MACH0K,OAAQ,GAAF,OAAKpN,KAAKuB,QAAQ0E,OAAOvD,cAAzB,SAXZ,yCAeE,WACE,OAAO1C,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,UAAY5D,KAAK6M,WAAW1F,eACtEnH,KAAKM,QAAQwM,WAAW9M,KAAKsD,QAAQM,SAAW5D,KAAK+M,UAAU9C,aAjBrE,qBAoBU,WAAO,WACb,IAAKjK,KAAK+M,UAAUW,KAAM,CAGxB,IAFA,IAAMqP,EAA0B,GAC1BC,EAAsD,GAC5D,MAAoBrgB,OAAOyJ,OAAOpG,KAAKuB,QAAQC,QAA/C,eACE,IADG,IAAM+C,EAAK,KACL/H,EAAI,EAAGA,EAAI+H,EAAMK,MAAMlI,SAAUF,EAAG,CAC3C,IAAM2I,EAAOZ,EAAMK,MAAMpI,GACrB2I,EAAK7B,SAAWtD,KAAKsD,UACvB0Z,EAAchgB,KAAK,CAAEmI,OAAMnB,MAAOxH,IAC9B+H,EAAMK,MAAMlI,QAAU,GACxBqgB,EAAe/f,KAAKuH,IAM5ByY,EAAc1Y,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM2U,gBAAgBa,EAAE5U,SAC1D4X,EAAezY,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQqW,YAAYrT,MACzDvE,KAAKuV,QAAQvV,KAAKuB,QAAQsD,SAAU7E,KAAKsD,QAAQC,IACjDvD,KAAKuB,QAAQ0F,UAEbjH,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WACJ,EAAKwS,KAAK,EAAKrT,QAAQsD,SAAU,EAAKvB,QAAQC,GAAI,EAAKD,SACvDyZ,EAAezY,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQkW,YAAYlT,MACzDyY,EAAc1Y,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM4R,gBAAgB4D,EAAE5U,KAAM4U,EAAE/V,UAClE,EAAKzC,QAAQ0F,WAEf5E,KAAM,WACJ2a,EAAc1Y,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM2U,gBAAgBa,EAAE5U,SAC1D4X,EAAezY,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQqW,YAAYrT,MACzD,EAAKgR,QAAQ,EAAKhU,QAAQsD,SAAU,EAAKvB,QAAQC,IACjD,EAAKhC,QAAQ0F,kBArDvB,GAAiD,QAC7B,gBAAjB,kB,+BAIO,gBAAP,kB,+BALkB,GAAmB,gBADvC,QACoB,cCZyX,MCO1Y,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAIlH,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIgN,UAAUjM,UAAYf,EAAIuD,QAAQK,UAAYhH,OAAOyJ,OAAOrG,EAAIuD,QAAQQ,QAAQpH,OAAS,GAAKqD,EAAIkd,2BAA4B9c,EAAG,SAAS,CAACub,MAAO3b,EAAS,MAAEM,MAAM,CAAC,KAAO,QAAQ,KAAO,YAAYsb,SAAS,CAAC,MAAQ,SAASjK,GAAQ,OAAO3R,EAAI6b,QAAQlK,OAAY3R,EAAIS,MAC7W,GAAkB,GCYD,GAArB,uKAEE,WAAwB,OAAOR,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,iBASE,WACE,MAAO,CACLgb,KAAM,GAAF,OAAK7b,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW7E,wBAAzD,MACJ8T,IAAK,GAAF,OAAK9b,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,MAAQxD,KAAKuB,QAAQ0E,OAAOvD,cAApE,MACH0K,OAAQ,GAAF,OAAKpN,KAAKuB,QAAQ0E,OAAOvD,cAAzB,SAbZ,sCAiBE,WACE,OAAO1C,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,OAASxD,KAAK6M,WAAW1F,eACjEnH,KAAKM,QAAQwM,WAAW9M,KAAK+D,MAAMP,MAAQxD,KAAK+M,UAAU9C,aAnBhE,qBAsBU,WAAO,WACb,IAAKjK,KAAK+M,UAAUW,KAAM,CAGxB,IAFA,IAAMqP,EAA0B,GAC1BC,EAAsD,GAC5D,MAAoBrgB,OAAOyJ,OAAOpG,KAAKuB,QAAQC,QAA/C,eACE,IADG,IAAM+C,EAAK,KACL/H,EAAI,EAAGA,EAAI+H,EAAMK,MAAMlI,SAAUF,EAAG,CAC3C,IAAM2I,EAAOZ,EAAMK,MAAMpI,GACrB2I,EAAKpB,OAAS/D,KAAK+D,QACrBiZ,EAAchgB,KAAK,CAAEmI,OAAMnB,MAAOxH,IAC9B+H,EAAMK,MAAMlI,QAAU,GACxBqgB,EAAe/f,KAAKuH,IAK5B,IAAM2Y,EAAald,KAAKsD,QAAQQ,OAAOG,QAAQjE,KAAK+D,OAEpDiZ,EAAc1Y,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM2U,gBAAgBa,EAAE5U,SAC1D4X,EAAezY,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQqW,YAAYrT,MACzDvE,KAAKsD,QAAQiL,YAAYvO,KAAK+D,OAC9B/D,KAAKuB,QAAQ0F,UAEbjH,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WACJ,EAAKkB,QAAQyL,YAAY,EAAKhL,MAAOmZ,GACrCH,EAAezY,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQkW,YAAYlT,MACzDyY,EAAc1Y,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM4R,gBAAgB4D,EAAE5U,KAAM4U,EAAE/V,UAClE,EAAKzC,QAAQ0F,WAEf5E,KAAM,WACJ2a,EAAc1Y,SAAQ,SAAAyV,GAAC,OAAIA,EAAE5U,KAAKZ,MAAM2U,gBAAgBa,EAAE5U,SAC1D4X,EAAezY,SAAQ,SAAAC,GAAK,OAAI,EAAKhD,QAAQqW,YAAYrT,MACzD,EAAKjB,QAAQiL,YAAY,EAAKxK,OAC9B,EAAKxC,QAAQ0F,kBAxDvB,GAAsD,QAClC,gBAAjB,kB,+BAKO,gBAAP,kB,+BACO,gBAAP,kB,6BAPkB,GAAwB,gBAD5C,QACoB,cCb8X,MCO/Y,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAIlH,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAAC8b,WAAW,CAAC,CAAC3d,KAAK,OAAO4d,QAAQ,SAASnd,MAAOgB,EAAIgN,UAA8B,qBAAEoP,WAAW,mCAAmCT,MAAO3b,EAAS,MAAEqc,SAAS,CAAC,MAAQrc,EAAIoZ,YAAY7a,MAAMyC,GAAG,CAAC,SAAW,SAAS2Q,GAAQ,OAAIA,EAAO2K,KAAKpY,QAAQ,QAAQlE,EAAIuc,GAAG5K,EAAO6K,QAAQ,QAAQ,GAAG7K,EAAOrS,IAAI,SAAkB,KAAcU,EAAIyc,WAAW9K,IAAS,KAAO3R,EAAIyc,eACpd,GAAkB,GCSD,GAArB,uKAEE,WAAwB,OAAOxc,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,uBAQE,WAAuB,MACrB,iBAAOb,KAAK+M,UAAUnC,4BAAtB,QAA8C,KATlD,iBAYE,WACE,OAAO5K,KAAK+M,UAAUnC,qBACpB,CACEiR,KAAM,GAAF,OAAK7b,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAWvE,qBAA9D,MACJwT,IAAK,GAAF,OAAK9b,KAAKM,QAAQwM,WAAW9M,KAAKmZ,YAAY3V,MAAQxD,KAAK6M,WAAW5E,qBAAuB,EAA7F,MACHkF,MAAO,GAAF,OAAKnN,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAW9E,uBAAyB/H,KAAK6M,WAAWvE,qBAAuBtI,KAAK6M,WAAW7E,wBAAzI,MACLoF,OAAQ,GAAF,OAAKpN,KAAK6M,WAAW5E,qBAAuB,EAA5C,MACNwU,WAAY,MACZC,WAAY,GAAF,OAAK1c,KAAK6M,WAAW5E,qBAArB,MACV0U,OAAQ,OACRrP,SAAU,GAAF,OAAKtN,KAAK6M,WAAW5E,qBAArB,OACN,KAvBV,wBA0BU,WACN,IAAMkR,EAAcnZ,KAAKmZ,YACnByD,EAAQzD,EAAY7a,KACpBue,EAAS7c,KAAKqY,IAAyBtZ,MACzC6d,GAASC,IACX1D,EAAY7a,KAAOue,EACnB7c,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ+W,EAAY7a,KAAOse,GACjCva,KAAM,WAAQ8W,EAAY7a,KAAOue,MAGrC7c,KAAK+M,UAAUnC,qBAAuB,SAtC1C,GAA4C,QACxB,gBAAjB,kB,+BADkB,GAAc,gBADlC,QACoB,cCVoX,MCOrY,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,M,QClBX,GAAS,WAAa,IAAI7K,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACO,YAAY,4BAA4Bgb,MAAO3b,EAAc,YAAG,CAACI,EAAG,QAAQ,CAACkL,IAAI,iBAAiB3K,YAAY,mBAAmBgb,MAAO3b,EAAuB,oBAAEqc,SAAS,CAAC,MAAQrc,EAAIod,YAAY7e,MAAMyC,GAAG,CAAC,SAAW,SAAS2Q,GAAQ,OAAIA,EAAO2K,KAAKpY,QAAQ,QAAQlE,EAAIuc,GAAG5K,EAAO6K,QAAQ,QAAQ,GAAG7K,EAAOrS,IAAI,SAAkB,KAAcU,EAAIyc,WAAW9K,UAC1c,GAAkB,GCWD,GAArB,uKAEE,WAAwB,OAAO1R,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,uBAUE,WAAuB,QACrB,2BAAOb,KAAK+M,UAAUlC,6BAAtB,aAAO,EAAsCtG,aAA7C,QAAsD,KAX1D,sBAcE,WAAsB,QACd1D,EAAQb,KAAK+M,UAAUlC,sBAC7B,OAAOhK,EACL,CACEgb,KAAM,GAAF,OAAKhb,EAAMmK,EAAX,MACJ8Q,IAAK,GAAF,OAAKjb,EAAM+F,GAA4B,UAAvB/F,EAAM4M,eAAN,YAAkC,UAACzN,KAAKqY,WAAN,aAAC,EAAU+E,qBAA7C,QAAiE,GAAjF,OACD,CACFvB,KAAM,MACNC,IAAK,GAAF,OAAK9b,KAAK+M,UAAU9C,WAApB,SAtBX,+BA0BE,WACE,OAAOjK,KAAK+M,UAAUlC,sBACpB,CACE6R,WAAY,GAAF,OAAK1c,KAAK6M,WAAW5E,qBAArB,MACVqF,SAAU,GAAF,OAAKtN,KAAK6M,WAAW5E,qBAArB,OACN,KA/BV,wBAkCE,WACE,IAAMkV,EAAcnd,KAAKmd,YACnBP,EAAQO,EAAY7e,KACpBue,EAAQ7c,KAAKqd,MAAMC,eAAeve,MACpC6d,GAASC,IACXM,EAAY7e,KAAOue,EACnB7c,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ+a,EAAY7e,KAAOse,GACjCva,KAAM,WAAQ8a,EAAY7e,KAAOue,MAGrC7c,KAAK+M,UAAUlC,sBAAwB,SA9C3C,GAA4C,QACxB,gBAAjB,kB,+BADkB,GAAc,gBADlC,QACoB,cCZqX,MCQtY,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCoCM,GAArB,uKAEE,WAAwB,OAAO7K,KAAKM,QAAQiB,UAF9C,sBAGE,WAA2B,OAAOvB,KAAKM,QAAQ2F,SAHjD,qBAIE,WAA0B,OAAOjG,KAAKM,QAAQO,QAJhD,qBAYU,WACN,IAAM0c,EAAiB,IAAIC,eAAexd,KAAKyd,gBAC/CF,EAAeG,QAAQ1d,KAAKqY,OAdhC,qCAiBU,WAAuB,WAC7BrY,KAAK2d,WAAU,kBAAM,EAAKN,MAAMO,iBAAiBvF,IAAIwF,aAlBzD,mCAqBU,WAAqB,WAC3B7d,KAAK2d,WAAU,kBAAM,EAAKN,MAAMS,eAAezF,IAAIwF,aAtBvD,kCAyBU,WAAoB,WAC1B7d,KAAK2d,WAAU,kBAAM,EAAKN,MAAMU,gBAAgBV,MAAMC,eAAeO,aA1BzE,gCA6BU,WACN7d,KAAKqd,MAAMU,gBAAgBvB,eA9B/B,4BAiCU,WACFxc,KAAKqY,MACPrY,KAAK+M,UAAU/C,UAAYhK,KAAKqY,IAAI2F,YACpChe,KAAK+M,UAAU9C,WAAajK,KAAKqY,IAAI+E,aACnCpd,KAAKuB,QAAQ0E,OAAOtD,QAClBoE,KAAKC,IAAIhH,KAAKuB,QAAQ0E,OAAO1D,YAAcvC,KAAKuB,QAAQ0E,OAAOpD,OAAS7C,KAAK6M,WAAWxE,gBACtFtB,KAAK4O,IAAI3V,KAAKuB,QAAQ0E,OAAOzD,YAAcxC,KAAKuB,QAAQ0E,OAAOpD,QAAU7C,KAAK+M,UAAU/C,UAAYhK,KAAKuB,QAAQ0E,OAAOxD,cAAgBzC,KAAK6M,WAAWxE,iBACtJrI,KAAKuB,QAAQ0E,OAAOtD,UAC1B3C,KAAKuB,QAAQ0E,OAAOrD,QAClBmE,KAAKC,IAAI,EAAGD,KAAK4O,IAAI3V,KAAKM,QAAQwM,WAAW9M,KAAKuB,QAAQ4E,SACxDnG,KAAKuB,QAAQ0E,OAAOrD,eA3ChC,GAAyC,QACyB,gBAA/D,eAAK,CAAEqb,QAAS,IAAI,IAAyB,kB,+BAD3B,GAAW,gBAZ/B,eAAU,CACT5O,WAAY,CACV6O,MAAA,GACAC,sBAAA,GACAC,oBAAA,GACAC,iBAAA,GACAC,oBAAA,GACAC,yBAAA,GACAC,eAAA,GACAC,uBAGiB,cCvDiX,MCQlY,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI1e,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACE,MAAM,CAAC,UAAW,EAAM,oBAAmB,IAAQ,CAACF,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACO,YAAY,cAAc,CAACP,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,aAA0CF,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,uCAAuCR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,4CAA4CR,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACO,YAAY,cAAc,CAACP,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,aAAwCF,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,qCAAqCR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,0CAA0CR,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACO,YAAY,cAAc,CAACP,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,aAAuCF,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,qCAAqCR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,0CAA0CR,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACO,YAAY,cAAc,CAACP,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,aAAqCF,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,mCAAmCR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,wCAAwCR,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACO,YAAY,cAAc,CAACP,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,aAAoCF,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,kCAAkCR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,uCAAuCR,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,EAAQ,WAA6BF,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,8BAA8BR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,mCAAmCR,EAAG,kBAAkB,CAACA,EAAG,MAAM,CAACO,YAAY,aAAa,CAACP,EAAG,MAAM,CAACO,YAAY,qBAAqB,CAACP,EAAG,KAAK,CAACO,YAAY,aAAa0b,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,iCAAiCR,EAAG,IAAI,CAACic,SAAS,CAAC,UAAYrc,EAAI2e,GAAG3e,EAAIY,GAAG,uCAAuC,IACzuF,GAAkB,GCgFD,GAArB,qIAAsC,QAAjB,GAAQ,gBAD5B,QACoB,cCjF8W,MCQ/X,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QC+CM,GAArB,yG,0BACU,EAAAL,QAAU,IAAI,EAEd,EAAAqe,gBAAkB,eAClB,EAAAC,qBAAuBhf,OAAOif,OAAO1R,OAAS,IAC9C,EAAA5M,QAA2B,OALrC,gDAOU,WAAO,WACbP,KAAKM,QAAQO,MAAMC,SAAWd,KAAK4e,qBACnCE,MAAM,uBAAuBC,KAA7B,yDAAkC,WAAMxhB,GAAN,uGACbA,EAAOyhB,OADM,OAC1BA,EAD0B,OAEhC,EAAK1e,QAAQiB,QAAU,EAAQ8C,SAAS2a,GACxC,EAAKL,gBAAkB,sBAHS,2CAAlC,yDATJ,+BAgBU,WACN3e,KAAKM,QAAQO,MAAMC,UAAYd,KAAKM,QAAQO,MAAMC,WAjBtD,+BAoBU,WACNd,KAAKM,QAAQW,QAAQmB,SArBzB,+BAwBU,WACNpC,KAAKM,QAAQW,QAAQoB,SAzBzB,iCA4BU,WAAmB,WACzB,GAAI1F,OAAO2E,KAAKtB,KAAKM,QAAQiB,QAAQC,QAAQ9E,OAAS,EAAG,CACvD,IAAM8E,EAASxB,KAAKM,QAAQiB,QAAQC,OACpCxB,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ,EAAK9B,QAAQiB,QAAQC,OAASA,GAC5Ca,KAAM,WAAQ,EAAK/B,QAAQiB,QAAQC,OAAS,MAE9CxB,KAAKM,QAAQiB,QAAQC,OAAS,OACzB,CACL,IAAMD,EAAUvB,KAAKM,QAAQiB,QAC7BvB,KAAKM,QAAQW,QAAQjE,KAAK,CACxBgD,KAAMA,KACNoC,KAAM,WAAQ,EAAK9B,QAAQiB,QAAUA,GACrCc,KAAM,WAAQ,EAAK/B,QAAQiB,QAAU,EAAQ8C,SAAS,CAAEQ,SAAU,GAAIrD,OAAQ,QAEhFxB,KAAKM,QAAQiB,QAAU,EAAQ8C,SAAS,CAAEQ,SAAU,GAAIrD,OAAQ,QA5CtE,iCAgDU,WAAmB,WACnByd,EAAQ5O,SAASC,cAAc,SACrC2O,EAAM5C,KAAO,OACb4C,EAAMC,OAAS,0BACfD,EAAME,SAAW,WACf,IAAMC,EAAS,IAAIC,WACnB,GAAIJ,EAAMK,OAASL,EAAMK,MAAM5iB,OAAS,EAAG,CACzC,IAAM6iB,EAAON,EAAMK,MAAM,GACzBF,EAAOI,WAAWD,GAClBH,EAAOK,OAAS,WACd,GAA6B,iBAAlBL,EAAO7hB,OAChB,IACE,IAAMrB,EAAOwjB,KAAKC,MAAMP,EAAO7hB,QAC/B,EAAK+C,QAAQiB,QAAU,EAAQ8C,SAASnI,GACxC,EAAKyiB,gBAAkBY,EAAKjhB,KAC5B,EAAKgC,QAAQW,QAAQ2e,QACrB,MAAO7F,GACP,EAAK8F,OAAOC,aAAaC,KAAK,CAC5B1D,KAAM,YACN2D,QAAS,GAAF,OAAK,EAAKrf,GAAG,4BAA4Bsf,WAAzC,eAA0DV,EAAKjhB,YAOlF2gB,EAAMiB,UA1EV,mCA6EU,WACN,IAAMlB,EAAOU,KAAKS,UAAUngB,KAAKM,QAAQiB,SACnC6e,EAAO,IAAIC,KAAK,CAAErB,GAAQ,CAAE3C,KAAM,qBAClCiE,EAAMC,IAAIC,gBAAgBJ,GAC1B9Z,EAAI+J,SAASC,cAAc,KACjChK,EAAEma,KAAOH,EACTha,EAAEoa,SAAW1gB,KAAK2e,gBAClBrY,EAAE4Z,UApFN,+BAuFU,WACNlgB,KAAKO,QAA0B,QAAhBP,KAAKO,QAAoB,OAAS,WAxFrD,GAAiC,QAAZ,GAAG,gBALvB,eAAU,CACT8O,WAAY,CACVsR,YAAA,GAAaC,gBAGI,cClEuV,MCQxW,I,UAAY,eACd,GACA,EACA/e,GACA,EACA,KACA,KACA,OAIa,M,QCnBA,IACXgf,GAAI,CACAb,QAAS,CACLc,iBAAkB,oBAClBC,kBAAmB,QACnBC,kBAAmB,OACnBC,kBAAmB,OACnBC,0BAA2B,SAC3BC,4BAA6B,QAC7BC,oBAAqB,eACrBC,sBAAuB,eACvBC,kBAAmB,OACnBC,KAAM,CACFC,mBAAoB,SACpBC,kBACI,mKAIJC,iBAAkB,UAClBC,gBACI,+KAIJC,iBAAkB,UAClBC,gBACI,mKAGJC,eAAgB,UAChBC,cACI,4JAIJC,cAAe,YACfC,aACI,6LAIJC,UAAW,WACXC,SACI,6OAGJC,aAAc,kBACdC,YACI,uQCzCpB,aAAIpc,OAAOqc,eAAgB,EAC3B,aAAIC,IAAI,OAAO,CACbC,4BAA6B,IAC7BC,4BAA6B,oBAE/B,aAAIF,IAAI,QACR,aAAIA,IAAI,KAER,IAAMG,GAAO,IAAI,OAAQ,CACvBC,OAAQ,KACRC,cAGF,IAAI,aAAI,CACNC,OAAQ,SAAAC,GAAC,OAAIA,EAAE,KACfJ,UACCK,OAAO,S,kCCxBV","file":"js/app.af5a8ced.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/help_edit_train.67395182.png\";","module.exports = __webpack_public_path__ + \"img/help_select_train.6cd1d819.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainInfoEditor.vue?vue&type=style&index=0&id=5b03e809&scoped=true&lang=scss&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/help_tips.12f4142e.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=style&index=0&id=4cefd6dc&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/help_edit_time.25aa545d.png\";","module.exports = __webpack_public_path__ + \"img/diafreaks_logo.8b0abdc8.png\";","module.exports = __webpack_public_path__ + \"img/help_add_new_train.0fab88c8.png\";","module.exports = __webpack_public_path__ + \"img/help_add_new_station.d55b6e32.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('diagram-view',{attrs:{\"id\":\"diagram-view\",\"context\":_vm.context}}),(_vm.subView == 'help')?_c('help-view',{attrs:{\"id\":\"help-pane\"}}):_vm._e(),_c('div',{attrs:{\"id\":\"nav-pane\"}},[_vm._m(0),_c('span',{attrs:{\"id\":\"nav-pane-buttons\"}},[_c('span',{attrs:{\"id\":\"nav-pane-buttons-left\"}},[(_vm.enableSwitchEditMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.editButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{class:_vm.context.state.editMode ? 'is-selected': '',attrs:{\"icon-left\":\"pencil-outline\",\"size\":\"medium\"},on:{\"click\":_vm.onEditButtonClick}})],1)],1):_vm._e(),(_vm.context.state.editMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.undoButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"undo\",\"size\":\"medium\",\"disabled\":!_vm.context.history.undoable},on:{\"click\":_vm.onUndoButtonClick}})],1)],1):_vm._e(),(_vm.context.state.editMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.redoButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"redo\",\"size\":\"medium\",\"disabled\":!_vm.context.history.redoable},on:{\"click\":_vm.onRedoButtonClick}})],1)],1):_vm._e(),(_vm.context.state.editMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":Object.keys(_vm.context.diagram.trains).length > 0 ? _vm.$t('message.vanishTrainsButtonTooltip') : _vm.$t('message.vanishStationsButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"vanish\",\"size\":\"medium\"},on:{\"click\":_vm.onVanishButtonClick}})],1)],1):_vm._e(),_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.uploadButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"upload\",\"size\":\"medium\"},on:{\"click\":_vm.onUploadButtonClick}})],1)],1),_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.downloadButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{attrs:{\"icon-left\":\"download\",\"size\":\"medium\"},on:{\"click\":_vm.onDownloadButtonClick}})],1)],1)]),_c('span',{attrs:{\"id\":\"nav-pane-buttons-spacer\"}}),_c('span',{attrs:{\"id\":\"nav-pane-buttons-right\"}},[(_vm.enableSwitchEditMode)?_c('span',{staticClass:\"nav-pane-item\"},[_c('b-tooltip',{attrs:{\"label\":_vm.$t('message.helpButtonTooltip'),\"type\":\"is-light\"}},[_c('b-button',{class:_vm.subView == 'help' ? 'is-selected': '',attrs:{\"icon-left\":\"help\",\"size\":\"medium\"},on:{\"click\":_vm.onHelpButtonClick}})],1)],1):_vm._e()])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"nav-pane-item\",attrs:{\"id\":\"nav-pane-logo\"}},[_c('img',{staticStyle:{\"height\":\"32px\"},attrs:{\"src\":require(\"@/assets/diafreaks_logo.png\")}})])}]\n\nexport { render, staticRenderFns }","interface HistoryElement {\n    this: unknown;\n    undo: () => void;\n    redo: () => void;\n}\n\nexport default class HistoryManager {\n    constructor(public capacity: number) {}\n    private undos: HistoryElement[] = [];\n    private redos: HistoryElement[] = [];\n\n    get undoable(): boolean { return this.undos.length > 0; }\n    get redoable(): boolean { return this.redos.length > 0; }\n\n    push(elem: HistoryElement): void {\n        if (this.undos.length >= this.capacity) {\n            this.undos.splice(0, this.undos.length - this.capacity + 1);\n        }\n        this.undos.push(elem);\n        this.redos.splice(0);\n    }\n\n    clear(): void {\n        this.undos.splice(0);\n        this.redos.splice(0);\n    }\n\n    undo(): void {\n        const elem = this.undos.pop();\n        if (elem) {\n            this.redos.push(elem);\n            elem.undo.apply(elem.this);\n        }\n    }\n\n    redo(): void {\n        const elem = this.redos.pop();\n        if (elem) {\n            this.undos.push(elem);\n            elem.redo.apply(elem.this);\n        }\n    }\n}\n","export default class DiagramConfig {\n    minimumTimeUnit = 5;\n    minPlotTime = 0;\n    maxPlotTime = 30 * 3600;\n    leftPaneWidth = 160;\n    trackLineSpan = 12;\n    scrollX = 6 * 3600 * 0.08;\n    scrollY = 0;\n    xScale = 0.1;\n    yScale = 12;\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any): DiagramConfig {\n        if (!(o && typeof o == \"object\")) {\n            throw \"Invalid JSON\";\n        }\n        const dc = new DiagramConfig();\n        Object.assign(dc, Object.fromEntries(\n            Object.keys(dc).filter(key => o[key] !== undefined).map(key => [key, o[key]])\n        ));\n        return dc;\n    }\n}","import Station from \"./Station\";\n\nexport default class Track {\n    constructor(\n        public readonly station: Station,\n        public readonly id: number, \n        public name: string,\n        public relY = 0,\n    ) {}\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any, station: Station): Track {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.id != null)) {\n            throw \"Invalid JSON @ Track\";\n        }\n        return new Track(station, o.id, o.name, o.relY);\n    }\n\n    toJSON(): unknown {\n        return {\n            id: this.id,\n            name: this.name,\n        };\n    }\n}","import Track from \"./Track\";\n\nexport default class Station {\n    constructor(\n        public readonly id: number, \n        public name: string,\n        public mileage: number,\n        public expanded = false,\n        public topRelY = 0,\n        public bottomRelY = 0\n    ) {}\n    readonly tracks: Track[] = [];\n\n    addNewTrack(track: Track, index: number = this.tracks.length): Track {\n        this.tracks.splice(index, 0, track);\n        return this.tracks[index];\n    }\n\n    removeTrack(t: Track): void {\n        const index = this.tracks.indexOf(t);\n        if (index >= 0) this.tracks.splice(index, 1);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any): Station {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.id != null && o.name != null && o.mileage != null && Array.isArray(o.tracks))) {\n            throw \"Invalid JSON @ Station\"\n        }\n        const station = new Station(o.id, o.name, o.mileage, !!o.expanded);\n        (o.tracks as any[]).map((t: any) => Track.fromJSON(t, station))\n            .forEach(t => station.tracks.push(t));\n        return station;\n    }\n\n    toJSON(): unknown {\n        return {\n            id: this.id,\n            name: this.name,\n            mileage: this.mileage,\n            tracks: this.tracks,\n            expanded: this.expanded,\n        };\n    }\n}\n","import Station from \"./Station\";\nimport Track from \"./Track\";\nimport Train from \"./Train\";\n\nexport default class StopEvent {\n    static maxPrivateId = 0;\n\n    constructor(\n        public readonly train: Train,\n        public track: Track,\n        public time: number\n    ) {}\n    readonly privateId: number = ++StopEvent.maxPrivateId;\n\n    get station(): Station {\n        return this.track.station;\n    }\n    get next(): StopEvent | undefined {\n        const index = this.train.stevs.indexOf(this);\n        return index >= 0 ? this.train.stevs[index + 1] : undefined;\n    }\n    get prev(): StopEvent | undefined {\n        const index = this.train.stevs.indexOf(this);\n        return index >= 0 ? this.train.stevs[index - 1] : undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSONStop(o: any, train: Train, stations: { [id: number]: Station }): StopEvent[] {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.stationId != null && o.trackId != null && o.arrTime != null && o.depTime != null)) {\n            throw \"Invalid JSON @ Stop\";\n        }\n        const station = stations[o.stationId];\n        const track = station && station.tracks.find(t => t.id == o.trackId);\n        if (!(station && track)) {\n            throw \"Invalid data @ Stop\";\n        }\n        return o.arrTime == o.depTime ?\n            [ new StopEvent(train, track, o.arrTime) ] :\n            [ new StopEvent(train, track, o.arrTime), new StopEvent(train, track, o.depTime) ];\n    }\n}\n\nexport interface StopEventRange {\n    from: StopEvent;\n    to: StopEvent;\n}\n","import Station from \"./Station\";\nimport StopEvent, { StopEventRange } from \"./StopEvent\";\nimport TrainPathNode from \"./TrainPathNode\";\n\nexport default class Train {\n    constructor(\n        public readonly id: number, \n        public name: string,\n    ) {}\n    stevs: StopEvent[] = [];\n\n    addNewStopEvent(stev: StopEvent, index: number = this.stevs.length): StopEvent {\n        this.stevs.splice(index, 0, stev);\n        return this.stevs[index];\n    }\n\n    removeStopEvent(stev: StopEvent): void {\n        const index = this.stevs.indexOf(stev);\n        if (index >= 0) this.stevs.splice(index, 1);\n    }\n\n    getStopEventsInRange(stevRange: StopEventRange): StopEvent[] {\n        const result = [];\n        let inRange = false;\n        for (const stev of this.stevs) {\n            if (stev == stevRange.from) inRange = true;\n            if (inRange) result.push(stev);\n            if (stev == stevRange.to) inRange = false;\n        }\n        return result;\n    }\n\n    getTrainPathNodes(): TrainPathNode[] {\n        const nodes: TrainPathNode[] = [];\n        for (const stev of this.stevs) {\n          if (stev.station.expanded && stev.prev && stev.prev.station != stev.station) {\n            nodes.push({ \n              stev, \n              phase: \"arr\",\n              time: stev.time, \n              relY: stev.prev.station.mileage < stev.station.mileage ? stev.station.topRelY : stev.station.bottomRelY\n            });\n          }\n          nodes.push({\n            stev,\n            phase: \"track\",\n            time: stev.time,\n            relY: stev.track.relY\n          });\n          if (stev.station.expanded && stev.next && stev.next.station != stev.station) {\n            nodes.push({ \n              stev, \n              phase: \"dep\",\n              time: stev.time, \n              relY: stev.next.station.mileage < stev.station.mileage ? stev.station.topRelY : stev.station.bottomRelY\n            });\n          }\n        }\n        return nodes;\n      }\n    \n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any, stations: { [id: number]: Station }): Train {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && o.id != null && o.name != null && Array.isArray(o.stops))) {\n            throw \"Invalid JSON @ Train\";\n        }\n        const train = new Train(o.id, o.name);\n        (o.stops as any[]).flatMap((s: any) => StopEvent.fromJSONStop(s, train, stations))\n            .forEach(stev => train.stevs.push(stev));\n        return train;\n    }\n\n    toJSON(): unknown {\n        const stops: { stationId: number, trackId: number, arrTime: number, depTime: number }[] = [];\n        for (const stev of this.stevs) {\n            const lastStop = stops[stops.length - 1];\n            if (lastStop && lastStop.trackId == stev.track.id && lastStop.arrTime == lastStop.depTime) {\n                lastStop.depTime = stev.time;\n            } else {\n                stops.push({ \n                    stationId: stev.station.id, \n                    trackId: stev.track.id, \n                    arrTime: stev.time, \n                    depTime: stev.time \n                });\n            }\n        }\n        return {\n            id: this.id,\n            name: this.name,\n            stops: stops\n        };\n    }\n}\n","import Vue from \"vue\";\nimport DiagramConfig from \"./DiagramConfig\";\nimport Station from \"./Station\";\nimport Train from \"./Train\";\n\nexport default class Diagram {\n    constructor(\n        public config: DiagramConfig,\n        public stations: { [id: number]: Station },\n        public trains: { [id: number]: Train },\n    ) {}\n    maxId = 0;\n    maxRelY = 0;\n    \n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\n    static fromJSON(o: any): Diagram {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        if (!(o && typeof o == \"object\" && typeof o.stations == \"object\" && typeof o.trains == \"object\")) {\n            throw \"Invalid JSON\";\n        }\n        const config = DiagramConfig.fromJSON(o.config || {});\n        const stations: { [id: number]: Station } = Object.fromEntries(Object.values(o.stations).map((s: any) => [ s.id, Station.fromJSON(s) ]));\n        const trains: { [id: number]: Train } = Object.fromEntries(Object.values(o.trains).map((t: any) => [ t.id, Train.fromJSON(t, stations) ]));\n        const diagram = new Diagram(config, stations, trains);\n\n        let maxId = o.maxId ? Math.max(o.maxId, 0) : 0;\n        for (const s of Object.values(stations)) {\n            maxId = Math.max(s.id, maxId);\n            for (const t of s.tracks) {\n                maxId = Math.max(t.id, maxId);\n            }\n        }\n        for (const t of Object.values(trains)) {\n            maxId = Math.max(t.id, maxId);\n        }\n        diagram.maxId = maxId;\n\n        diagram.updateY();\n\n        return diagram;\n    }\n\n    getStationsInMileageOrder(): Station[] {\n        return Object.values(this.stations).sort((a, b) => a.mileage - b.mileage);\n    }\n\n    genId(): number {\n        return ++this.maxId;\n    }\n    releaseId(id: number): void {\n        if (id == this.maxId) --this.maxId;\n    }\n\n    addNewStation(station: Station): Station {\n        return Vue.set(this.stations, station.id, station);\n    }\n    removeStation(station: Station): void {\n        Vue.delete(this.stations, station.id);\n    }\n    addNewTrain(train: Train): Train {\n        return Vue.set(this.trains, train.id, train);\n    }\n    removeTrain(train: Train): void {\n        Vue.delete(this.trains, train.id);\n    }\n\n    updateY(): void {\n        if (Object.keys(this.stations).length == 0) {\n            this.maxRelY = 0;\n            return;\n        }\n\n        const stations = this.getStationsInMileageOrder();\n    \n        const initialMileage = stations[0].mileage;\n        for (const s of stations) {\n          s.mileage = s.mileage - initialMileage;\n        }\n    \n        let y = 0;\n        let lastMileage = 0;\n        for (const s of stations) {\n          y += (s.mileage - lastMileage) * this.config.yScale;\n          s.topRelY = y;\n          if (s.expanded) {\n            s.tracks.forEach((t, i) => {\n              t.relY = y + (i + 1) * this.config.trackLineSpan;\n            });\n            s.bottomRelY = y + (s.tracks.length + 1) * this.config.trackLineSpan;\n            y += (s.tracks.length + 1) * this.config.trackLineSpan;\n          } else {\n            Object.values(s.tracks).forEach(t => t.relY = y);\n            s.bottomRelY = y;\n          }\n          lastMileage = s.mileage;\n        }\n    \n        this.maxRelY = stations[stations.length - 1].bottomRelY;\n      }\n    \n    toJSON(): unknown {\n        return {\n            config: this.config,\n            stations: this.stations,\n            trains: this.trains,\n        };\n    }\n}","export default class ViewConfig {\n    fontFamily = \"Verdana, sans-serif\";\n    topPaneHeight = 30;\n    hourlyLabelBottomMargin = 4;\n    hourlyLabelFontSize = 14;\n    hourlyLabelColor = \"rgb(128, 192, 128)\";\n    hourlyGridLineWidth = 2.25;\n    hourlyGridLineColor = \"rgb(128, 192, 128)\";\n    majorMinutelyGridLineSpan = 10 * 60;\n    majorMinutelyGridLineWidth = 1.5;\n    majorMinutelyGridLineColor = \"rgb(128, 192, 128)\";\n    minorMinutelyGridLineSpan = 2 * 60;\n    minorMinutelyGridLineWidth = 0.75;\n    minorMinutelyGridLineColor = \"rgb(128, 192, 128)\";\n    stationLabelLeftMargin = 14;\n    stationLabelRightMargin = 14;\n    stationLabelFontSize = 14;\n    stationLabelColor = \"rgb(128, 192, 128)\";\n    stationLineWidth = 1;\n    stationLineColor = \"rgb(128, 192, 128)\";\n    plotPanePadding = 4;\n    trackLabelLeftMargin = 10;\n    trackLabelFontSize = 11;\n    trackLabelColor = \"rgb(128, 192, 128)\";\n    trackLineWidth = 0.75;\n    trackLineColor = \"rgb(128, 192, 128)\";\n    trainPathWidth = 1;\n    trainPathColor = \"rgb(0, 0, 0)\";\n    trainNameLabelLineHeight = 14;\n    trainNameLabelFontSize = 12;\n\n    minHitWidth = 3;\n    pointerWidth = 3;\n    pointerColor = \"rgb(0, 0, 0)\";\n    pointerLabelFontSize = 12;\n    pointerPrecisePixelPerTimeUnit = 5;\n    selectedTrackLabelColor = \"rgb(255, 0, 0)\";\n    selectedTrackLineColor = \"rgb(255, 0, 0)\";\n    selectedTrainPathColor = \"rgb(255, 0, 0)\";\n    selectedTrainPathWidthScale = 1.5;\n    selectedTrainPathMarkerWidth = 5;\n    selectedTrainPathMarkerColor = \"rgb(255, 0, 0)\";\n    unselectedTrainPathOpacity = 0.5;\n    markerLabelMaxDistance = 20;\n    markerLabelColor = \"rgb(255, 0, 0)\";\n    markerLabelFontSize = 12;\n    markerLabelLineHeight = 16;\n    wheelScale = 0.1;\n}\n","import Station from \"./Station\";\nimport StopEvent, { StopEventRange } from \"./StopEvent\";\nimport Track from \"./Track\";\nimport Train from \"./Train\";\nimport TrainSelection from \"./TrainSelection\";\n\nexport default class ViewState {\n    editMode = true;\n    viewWidth = 0;\n    viewHeight = 0;\n    trainSelections: { [trainId: number]: TrainSelection } = {};\n    pointerScreenX = 0;\n    pointerTime = 0;\n    pointerY = 0;\n    pointerTargetTrainPath: { train: Train, stevRange: StopEventRange } | null = null;\n    pointerTargetLine: { station: Station, track: Track | null, relY: number } | null = null;\n    pointerPreciseState: { sx0: number, t0: number } | null = null;\n    drawingState: {\n        train: Train,\n        lastStev: StopEvent,\n        direction: number,\n        stableEnd: StopEvent | null,\n        floating: StopEvent | null\n    } | null = null;\n    trainPathDragState: { \n        dragging: boolean,\n        targets: { [trainId: number]: TrainSelection },\n        timeShift: number \n    } | null = null;\n    stationNameInputTarget: Station | null = null;\n    trackNameInputTarget: Track | null = null;\n    trainInfoEditorTarget: {\n        train: Train,\n        x: number,\n        y: number,\n        verticalAlign: \"top\" | \"bottom\"\n    } | null = null;\n    controlKeyPressed = false;\n\n    get busy(): boolean {\n        return this.drawingState != null || \n            this.trainPathDragState != null ||\n            this.inputEnabled;\n    }\n\n    get inputEnabled(): boolean {\n        return this.stationNameInputTarget != null || this.trackNameInputTarget != null;\n    }\n}\n","import HistoryManager from \"@/HistoryManager\";\nimport Diagram from \"./Diagram\";\nimport ViewConfig from \"./ViewConfig\";\nimport ViewState from \"./ViewState\";\n\nexport default class DiagramViewContext {\n    config: ViewConfig = new ViewConfig();\n    state: ViewState = new ViewState();\n    diagram: Diagram = Diagram.fromJSON({ stations: [], trains: [] });\n    history = new HistoryManager(100);\n\n    getYByRelY(relY: number): number {\n        return relY + this.config.plotPanePadding + this.config.topPaneHeight - this.diagram.config.scrollY;\n    }    \n    getRelYByY(y: number): number {\n        return y - this.config.plotPanePadding - this.config.topPaneHeight + this.diagram.config.scrollY;\n    }\n    getXByTime(time: number): number {\n        return time * this.diagram.config.xScale + this.diagram.config.leftPaneWidth - this.diagram.config.scrollX;\n    }\n    getTimeByX(x: number): number {\n        return (x - this.diagram.config.leftPaneWidth + this.diagram.config.scrollX) / this.diagram.config.xScale;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diagram-view\"},[_c('stage',{staticClass:\"diagram-view-stage\",on:{\"stationNameInputStart\":_vm.onStationNameInputStart,\"trackNameInputStart\":_vm.onTrackNameInputStart,\"trainInfoEditStart\":_vm.onTrainInfoEditStart,\"trainInfoEditEnd\":_vm.onTrainInfoEditEnd}}),_c('div',{staticClass:\"diagram-view-ui\"},[_c('station-name-input',{ref:\"stationNameInput\"}),_c('track-name-input',{ref:\"trackNameInput\"}),_c('train-info-editor',{ref:\"trainInfoEditor\"}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-expand-button',{key:(\"station-expand-button-\" + (s.id)),attrs:{\"station\":s},on:{\"trackNameInputStart\":_vm.onTrackNameInputStart}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-remove-button',{key:(\"station-remove-button-\" + (s.id)),attrs:{\"station\":s}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-add-track-button',{key:(\"station-add-track-button-\" + (s.id)),attrs:{\"station\":s},on:{\"trackNameInputStart\":_vm.onTrackNameInputStart}})}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _vm._l((s.tracks),function(t){return _c('station-remove-track-button',{key:(\"station-remove-track-button-\" + (s.id) + \"-\" + (t.id)),attrs:{\"station\":s,\"track\":t}})})})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.diagram)?_c('v-stage',{attrs:{\"config\":_vm.stageConfig},on:{\"mousedown\":_vm.onStageMouseDown,\"mousemove\":_vm.onStageMouseMove,\"click\":_vm.onStageClick,\"dblclick\":_vm.onStageDoubleClick,\"wheel\":_vm.onStageMouseWheel,\"contextmenu\":_vm.onContextMenu,\"touchend\":_vm.onTouchEnd}},[_c('back-layer',_vm._g({},_vm.$listeners)),_c('train-path-layer',_vm._g({},_vm.$listeners)),_c('v-layer',[_c('pointer')],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layer',{attrs:{\"id\":\"back-layer\"}},[_vm._l((_vm.timeGridLines),function(t){return _c('v-group',{key:t.key},[_c('v-line',{attrs:{\"config\":t.lineConfig}}),(t.labelConfig)?_c('v-text',{attrs:{\"config\":t.labelConfig}}):_vm._e()],1)}),_vm._l((Object.values(_vm.diagram.stations)),function(s){return _c('station-group',_vm._g({key:(\"station-\" + (s.id)),attrs:{\"station\":s}},_vm.$listeners))})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[(_vm.isTopLineIntersectingPlotPane)?_c('v-group',[_c('v-line',{attrs:{\"config\":_vm.topLineConfig}}),_vm._l((_vm.labelCharacters),function(c){return _c('v-text',{key:c.key,attrs:{\"config\":c}})}),_c('v-rect',{attrs:{\"config\":_vm.labelRectConfig},on:{\"click\":_vm.onStationLabelClick,\"mousedown\":_vm.onStationLabelMouseDown}})],2):_vm._e(),(_vm.station.expanded && _vm.isBottomLineIntersectingPlotPane)?_c('v-line',{attrs:{\"config\":_vm.bottomLineConfig}}):_vm._e(),(_vm.station.expanded)?_vm._l((_vm.station.tracks),function(t){return _c('track-group',_vm._g({key:(\"track-\" + (_vm.station.id) + \"-\" + (t.id)),attrs:{\"station\":_vm.station,\"track\":t}},_vm.$listeners))}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLineIntersectingPlotPane)?_c('v-group',[_c('v-line',{attrs:{\"config\":_vm.lineConfig}}),_c('v-text',{attrs:{\"config\":_vm.labelConfig},on:{\"click\":_vm.onLabelClick,\"mousedown\":_vm.onLabelMouseDown}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport Track from \"@/data/Track\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\n@Component\nexport default class TrackGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n  @Prop() private station!: Station;\n  @Prop() private track!: Track;\n\n  private dragState: { sy0: number, index0: number, dragging: boolean } | null = null;\n\n  private get lineConfig(): unknown {\n    return {\n      points: [\n        this.viewConfig.stationLabelLeftMargin + this.viewConfig.trackLabelLeftMargin, \n        this.context.getYByRelY(this.track.relY), \n        this.viewState.viewWidth, \n        this.context.getYByRelY(this.track.relY)\n      ],\n      stroke: this.viewConfig.trackLineColor,\n      strokeWidth: this.viewConfig.trackLineWidth,\n      listening: false,\n    }\n  }\n\n  private get labelConfig(): unknown {\n    return {\n      id: `track-label-${this.station.id}-${this.track.id}`,\n      x: this.viewConfig.stationLabelLeftMargin + this.viewConfig.trackLabelLeftMargin,\n      y: this.context.getYByRelY(this.track.relY) - this.viewConfig.trackLabelFontSize,\n      width: this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelLeftMargin - this.viewConfig.trackLabelLeftMargin - this.viewConfig.stationLabelRightMargin,\n      height: this.viewConfig.trackLabelFontSize,\n      text: this.track.name,\n      fontSize: this.viewConfig.trackLabelFontSize,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: this.viewConfig.trackLabelColor,\n      align: \"left\",\n      verticalAlign: \"bottom\",\n    }\n  }\n\n  private get isLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.track.relY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.track.relY) < this.viewState.viewHeight;\n  }\n\n  private onLabelClick(): void {\n    if (this.viewState.editMode && !this.viewState.busy && !this.dragState?.dragging) {\n      this.viewState.trackNameInputTarget = this.track;\n      this.$emit(\"trackNameInputStart\");\n    }\n  }\n\n  private onLabelMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewState.editMode) {\n      this.dragState = { \n        sy0: konvaEvent.evt.screenY, \n        index0: this.station.tracks.indexOf(this.track), \n        dragging: false \n      };\n      window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    }\n  }\n\n  private onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState) {\n      if (Math.abs(event.screenY - this.dragState.sy0) > 1) {\n        this.dragState.dragging = true;\n      }\n      if (this.dragState.dragging) {\n        this.station.removeTrack(this.track);\n\n        const mouseRelY = this.context.getRelYByY(event.clientY);\n        const newIndex = this.station.tracks.findIndex(t => mouseRelY < t.relY);\n        if (newIndex < 0) {\n          this.station.tracks.push(this.track);\n        } else {\n          this.station.tracks.splice(newIndex, 0, this.track);\n        }\n        this.diagram.updateY();\n      }\n    }\n  }\n\n  private onWindowMouseUp(event: MouseEvent): void {\n    if (this.dragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      this.onWindowMouseMove(event);\n\n      const index0 = this.dragState.index0;\n      const index1 = this.station.tracks.indexOf(this.track);\n      if (index0 != index1) {\n        this.context.history.push({\n          this: this,\n          undo: () => { \n            this.station.removeTrack(this.track); \n            this.station.addNewTrack(this.track, index0); \n          },\n          redo: () => {\n            this.station.removeTrack(this.track); \n            this.station.addNewTrack(this.track, index1); \n          }\n        });\n      }\n\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrackGroup.vue?vue&type=template&id=02a069c5&scoped=true&\"\nimport script from \"./TrackGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrackGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02a069c5\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport TrackGroup from \"./TrackGroup.vue\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\n@Component({\n  components: {\n    TrackGroup\n  },\n})\nexport default class StationGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n  @Prop() private station!: Station;\n\n  private dragState: { sy0: number, mileage0: number, dragging: boolean } | null = null;\n\n  private get topLineConfig(): unknown {\n    return {\n      points: [\n        0, \n        this.context.getYByRelY(this.station.topRelY), \n        this.viewState.viewWidth, \n        this.context.getYByRelY(this.station.topRelY)\n      ],\n      stroke: this.viewConfig.stationLineColor,\n      strokeWidth: this.viewConfig.stationLineWidth,\n      listening: false,\n    }\n  }\n\n  private get bottomLineConfig(): unknown {\n    return {\n      points: [\n        0, \n        this.context.getYByRelY(this.station.bottomRelY), \n        this.viewState.viewWidth, \n        this.context.getYByRelY(this.station.bottomRelY)\n      ],\n      stroke: this.viewConfig.stationLineColor,\n      strokeWidth: this.viewConfig.stationLineWidth,\n      listening: false,\n    }\n  }\n\n  private get labelRectConfig(): unknown {\n    return {\n      id: `station-label-${this.station.id}`,\n      x: this.viewConfig.stationLabelLeftMargin,\n      y: this.context.getYByRelY(this.station.topRelY) - this.viewConfig.stationLabelFontSize,\n      width: this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelLeftMargin - this.viewConfig.stationLabelRightMargin,\n      height: this.viewConfig.stationLabelFontSize,\n    };\n  }\n\n  private get labelCharacters(): unknown {\n    const widthForChars = this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelLeftMargin - this.viewConfig.stationLabelRightMargin - this.viewConfig.stationLabelFontSize;\n    const charSpan = this.station.name.length > 1 ? widthForChars / (this.station.name.length - 1) : 0;\n    return Array.from(this.station.name).map((c, index) => {\n      return {\n        key: `station-label-${this.station.id}-${index}`,\n        x: this.station.name.length > 1 ? \n            this.viewConfig.stationLabelLeftMargin + index * charSpan :\n            this.viewConfig.stationLabelLeftMargin + widthForChars * 0.5,\n        y: this.context.getYByRelY(this.station.topRelY) - this.viewConfig.stationLabelFontSize,\n        height: this.viewConfig.stationLabelFontSize,\n        text: c,\n        fontSize: this.viewConfig.stationLabelFontSize,\n        fontFamily: this.viewConfig.fontFamily,\n        fill: this.viewConfig.stationLabelColor,\n        align: \"left\",\n        verticalAlign: \"bottom\",\n      }\n    });\n  }\n\n  private get isTopLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.station.topRelY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.station.topRelY) < this.viewState.viewHeight;\n  }\n\n  private get isBottomLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.station.bottomRelY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.station.bottomRelY) < this.viewState.viewHeight;\n  }\n\n  private onStationLabelClick(): void {\n    if (this.viewState.editMode && !this.viewState.busy && !this.dragState?.dragging) {\n      this.viewState.stationNameInputTarget = this.station;\n      this.$emit(\"stationNameInputStart\");\n    }\n  }\n\n  private onStationLabelMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewState.editMode && !this.viewState.inputEnabled) {\n      this.dragState = {\n        sy0: konvaEvent.evt.screenY,\n        mileage0: this.station.mileage,\n        dragging: false,\n      };\n      window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    }\n  }\n\n  private onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState) {\n      if (Math.abs(event.screenY - this.dragState.sy0) > 1) {\n        this.dragState.dragging = true;\n      }\n      if (this.dragState.dragging) {\n        this.station.mileage = this.dragState.mileage0 + (event.screenY - this.dragState.sy0) / this.diagram.config.yScale;\n        this.diagram.updateY();\n      }\n    }\n  }\n\n  private onWindowMouseUp(event: MouseEvent): void {\n    if (this.dragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      this.onWindowMouseMove(event);\n\n      if (this.dragState.dragging) {\n        const mileage0 = this.dragState.mileage0;\n        const mileage1 = this.station.mileage;\n        this.context.history.push({\n          this: this,\n          undo: () => { this.station.mileage = mileage0; },\n          redo: () => { this.station.mileage = mileage1; }\n        });\n      }\n\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationGroup.vue?vue&type=template&id=4dbd1818&scoped=true&\"\nimport script from \"./StationGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dbd1818\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport StationGroup from \"./StationGroup.vue\";\n\n@Component({\n  components: {\n    StationGroup\n  },\n})\nexport default class BackLayer extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  private get timeGridLines(): unknown {\n    const lines = [];\n    const scrollLeftTime = this.diagram.config.scrollX / this.diagram.config.xScale;\n    let t = Math.ceil(scrollLeftTime / this.viewConfig.minorMinutelyGridLineSpan) * this.viewConfig.minorMinutelyGridLineSpan;\n    let x = this.context.getXByTime(t);\n    while (x < this.viewState.viewWidth) {\n      lines.push({\n        key: `time-grid-line-${lines.length}`,\n        lineConfig: {\n          points: [\n            x,\n            this.viewConfig.topPaneHeight,\n            x,\n            this.viewState.viewHeight\n          ],\n          stroke:\n            t % 3600 == 0 ? this.viewConfig.hourlyGridLineColor :\n            t % this.viewConfig.majorMinutelyGridLineSpan == 0 ? this.viewConfig.majorMinutelyGridLineColor :\n            this.viewConfig.minorMinutelyGridLineColor,\n          strokeWidth: \n            t % 3600 == 0 ? this.viewConfig.hourlyGridLineWidth :\n            t % this.viewConfig.majorMinutelyGridLineSpan == 0 ? this.viewConfig.majorMinutelyGridLineWidth :\n            this.viewConfig.minorMinutelyGridLineWidth,\n          listening: false,\n        },\n        labelConfig: t % 3600 != 0 ? null : {\n          x: x - this.viewConfig.hourlyLabelFontSize,\n          y: this.viewConfig.topPaneHeight - this.viewConfig.hourlyLabelBottomMargin - this.viewConfig.hourlyLabelFontSize,\n          width: this.viewConfig.hourlyLabelFontSize * 2,\n          height: this.viewConfig.hourlyLabelFontSize,\n          text: `${ t / 3600 % 24 }`,\n          fontSize: this.viewConfig.hourlyLabelFontSize,\n          fontFamily: this.viewConfig.fontFamily,\n          fill: this.viewConfig.hourlyLabelColor,\n          align: \"center\",\n          verticalAlign: \"bottom\",\n        }\n      });\n      t += this.viewConfig.minorMinutelyGridLineSpan;\n      x = this.context.getXByTime(t);\n    }\n    return lines;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BackLayer.vue?vue&type=template&id=c5c3815c&scoped=true&\"\nimport script from \"./BackLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./BackLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5c3815c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.pointerEnabled)?_c('v-group',[_c('v-rect',{attrs:{\"config\":_vm.rectConfig}}),_c('v-text',{attrs:{\"config\":_vm.labelConfig}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getTimeText(time: number, forceSec?: boolean): string {\n    const hStr = `${Math.floor(time / 3600)}`;\n    const mmStr = `${Math.floor(time / 60) % 60}`.padStart(2, \"0\");\n    const ssStr = `${time % 60}`.padStart(2, \"0\");\n    return time % 60 != 0 || forceSec ? `${hStr}:${mmStr}:${ssStr}` : `${hStr}:${mmStr}`;\n}\n\nconst canvas = document.createElement(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\nexport function getTextWidth(text: string, fontFamily: string, fontSize: number): number {\n    if (!ctx) return 0;\n    ctx.font = `${fontSize}px ${fontFamily}`;\n    return ctx.measureText(text).width;\n}\n","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport { getTimeText } from \"@/utils\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\n\n@Component\nexport default class TrainPathGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  private get pointerEnabled(): unknown {\n    return this.viewState.pointerTargetLine && !this.viewState.pointerTargetTrainPath &&\n      !this.viewState.trainPathDragState && !this.viewState.drawingState;\n  }\n\n  private get rectConfig(): unknown {\n    const width = this.viewState.drawingState ? this.viewConfig.selectedTrainPathMarkerWidth : this.viewConfig.pointerWidth;\n    return {\n      x: this.context.getXByTime(this.viewState.pointerTime) - width * 0.5,\n      y: this.viewState.pointerY - width * 0.5,\n      width: width,\n      height: width,\n      fill: this.viewConfig.pointerColor,\n      listening: false,\n    };\n  }\n\n  private get labelConfig(): unknown {\n    const time = this.viewState.pointerTime >= 0 ? \n      this.viewState.pointerTime : \n      this.viewState.pointerTime + Math.ceil(-this.viewState.pointerTime / 3600) * 3600;\n    return {\n      x: this.context.getXByTime(this.viewState.pointerTime),\n      y: this.viewState.pointerY - this.viewConfig.pointerLabelFontSize,\n      height: this.viewConfig.pointerLabelFontSize,\n      text: getTimeText(time, this.viewState.pointerPreciseState != null),\n      fontSize: this.viewConfig.pointerLabelFontSize,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: this.viewConfig.pointerColor,\n      align: \"left\",\n      verticalAlign: \"bottom\",\n      listening: false,\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Pointer.vue?vue&type=template&id=15f49962&scoped=true&\"\nimport script from \"./Pointer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Pointer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15f49962\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layer',{ref:\"trainPathLayer\",attrs:{\"id\":\"train-path-layer\",\"config\":_vm.layerConfig}},[_vm._l((Object.values(_vm.diagram.trains).filter(function (t) { return !_vm.viewState.trainSelections[t.id]; })),function(t){return _c('train-path-group',_vm._g({key:(\"train-\" + (t.id)),attrs:{\"train\":t}},_vm.$listeners))}),_vm._l((Object.values(_vm.diagram.trains).filter(function (t) { return _vm.viewState.trainSelections[t.id]; })),function(t){return _c('train-path-group',_vm._g({key:(\"train-\" + (t.id)),attrs:{\"train\":t}},_vm.$listeners))})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-text',{ref:\"trainNameLabel\",attrs:{\"config\":_vm.trainNameLabelConfig},on:{\"click\":_vm.onTrainNameLabelClick}}),_c('v-line',{attrs:{\"config\":_vm.regularTrainPathConfig},on:{\"click\":_vm.onTrainPathClick,\"mousemove\":_vm.onTrainPathMouseMove,\"tap\":_vm.onTrainPathTap}}),(_vm.selectedTrainPathEnabled)?[_c('v-line',{attrs:{\"config\":_vm.selectedTrainPathConfig},on:{\"click\":_vm.onSelectedTrainPathClick,\"dblclick\":_vm.onSelectedTrainPathDoubleClick,\"mousedown\":_vm.onSelectedTrainPathMouseDown,\"mousemove\":_vm.onSelectedTrainPathMouseMove}}),_vm._l((_vm.selectedTrainPathNodes),function(n){return _c('train-path-marker',{key:(\"marker-\" + (_vm.train.id) + \"-\" + (n.stev.privateId) + \"-\" + (n.phase)),attrs:{\"trainPathNode\":n},on:{\"click\":_vm.onMarkerClick,\"mousedown\":_vm.onMarkerMouseDown}})})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-rect',{attrs:{\"config\":_vm.rectConfig},on:{\"click\":function($event){return _vm.$emit('click', $event, _vm.trainPathNode)},\"mousemove\":_vm.onRectMouseMove,\"mousedown\":function($event){return _vm.$emit('mousedown', $event, _vm.trainPathNode)},\"dblclick\":_vm.onRectDoubleClick}}),(_vm.labelEnabled)?_c('v-text',{attrs:{\"config\":_vm.labelConfig}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport { getTimeText } from \"@/utils\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport TrainPathNode from \"@/data/TrainPathNode\";\n\n@Component\nexport default class TrainPathMarker extends Vue {\n  @InjectReactive() context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n  @Prop() trainPathNode!: TrainPathNode;\n\n  get rectConfig(): unknown {\n    return {\n      x: this.context.getXByTime(this.trainPathNode.time) - this.viewConfig.selectedTrainPathMarkerWidth * 0.5,\n      y: this.context.getYByRelY(this.trainPathNode.relY) - this.viewConfig.selectedTrainPathMarkerWidth * 0.5,\n      width: this.viewConfig.selectedTrainPathMarkerWidth,\n      height: this.viewConfig.selectedTrainPathMarkerWidth,\n      fill: this.viewConfig.selectedTrainPathMarkerColor,\n    };\n  }\n\n  get labelEnabled(): boolean {\n    return this.trainPathNode.phase == \"track\";\n  }\n\n  get labelConfig(): unknown {\n    const labelPosition = this.getLabelPosition();\n    return {\n      x: this.context.getXByTime(this.trainPathNode.time) + labelPosition.x - this.viewConfig.markerLabelFontSize * 8,\n      y: this.context.getYByRelY(this.trainPathNode.relY) + labelPosition.y - this.viewConfig.markerLabelLineHeight,\n      width: this.viewConfig.markerLabelFontSize * 8,\n      height: this.viewConfig.markerLabelLineHeight,\n      text: getTimeText(this.trainPathNode.time, this.viewState.pointerPreciseState != null),\n      fontSize: this.viewConfig.pointerLabelFontSize,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: this.viewConfig.markerLabelColor,\n      align: \"right\",\n      verticalAlign: \"bottom\",\n      listening: false,\n    }\n  }\n\n  getLabelPosition(): { x: number, y: number } {\n    const thisStev = this.trainPathNode.stev;\n    const prevStev = thisStev.prev;\n    const nextStev = thisStev.next;\n    if (prevStev && prevStev.track != thisStev.track && (!nextStev || nextStev.track == thisStev.track)) {\n      const thisRelY = prevStev.station.mileage < thisStev.station.mileage ? thisStev.station.topRelY : thisStev.station.bottomRelY;\n      const prevRelY = prevStev.station.mileage < thisStev.station.mileage ? prevStev.station.bottomRelY : prevStev.station.topRelY;\n      const x = thisRelY == prevRelY ? 0:\n        -this.viewConfig.markerLabelLineHeight *\n        ((thisStev.time - prevStev.time) * this.diagram.config.xScale) /\n        Math.abs(thisRelY - prevRelY);\n      return {\n        x: Math.max(x, -this.viewConfig.markerLabelMaxDistance),\n        y: prevStev.station.mileage < thisStev.station.mileage ? 0 : this.viewConfig.markerLabelLineHeight\n      };\n    }\n\n    return {\n      x: 0,\n      y: nextStev && nextStev.station.mileage < thisStev.station.mileage || prevStev && prevStev.station.mileage > thisStev.station.mileage ? 0 : this.viewConfig.markerLabelLineHeight,\n    };\n  }\n\n  onRectMouseMove(): void {\n    this.viewState.pointerTargetTrainPath = {\n      train: this.trainPathNode.stev.train,\n      stevRange: { from: this.trainPathNode.stev, to: this.trainPathNode.stev }\n    };\n  }\n\n  onRectDoubleClick(): void {\n    if (this.viewState.editMode) {\n      if (!this.viewState.drawingState) {\n        const n = this.trainPathNode;\n        if (!n.stev.next || !n.stev.prev) {\n          this.viewState.drawingState = {\n            train: n.stev.train,\n            lastStev: n.stev,\n            direction:\n              !n.stev.next && !n.stev.prev ? 0 :\n              !n.stev.next ? 1 : -1,\n            stableEnd: n.stev,\n            floating: null\n          };\n          this.viewState.trainSelections[n.stev.train.id].stevRange = null;\n        }\n      } else {\n        this.viewState.drawingState = null;\n        this.viewState.trainSelections = {};\n      }\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathMarker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathMarker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathMarker.vue?vue&type=template&id=44b2c434&scoped=true&\"\nimport script from \"./TrainPathMarker.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathMarker.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44b2c434\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport { getTextWidth } from \"@/utils\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent, { StopEventRange } from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\nimport TrainPathMarker from \"./TrainPathMarker.vue\";\nimport TrainPathNode from \"@/data/TrainPathNode\";\n\n@Component({\n  components: {\n    TrainPathMarker\n  },\n})\nexport default class TrainPathGroup extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  @Prop() private train!: Train;\n\n  dragState: { \n    t0: number, \n    y0: number,\n    sx0: number, \n    sy0: number,\n    track0: Track | null,\n    minTimeShift: number,\n    maxTimeShift: number,\n    changeTimeTargets: StopEvent[] | null,\n    changeTrackTargets: StopEvent[] | null,\n  } | null = null;\n\n  get trainNameLabelConfig(): unknown {\n    const sel = this.viewState.trainSelections[this.train.id];\n    return {\n      ref: `train-name-label-${this.train.id}`,\n      visible:\n        !this.viewState.trainInfoEditorTarget && (\n          Object.keys(this.viewState.trainSelections).length == 0 || \n          (!!sel && !this.viewState.controlKeyPressed)\n        ),\n      text: this.trainNameLabelText, \n      ...this.trainNameLabelRect,\n      fontSize: this.viewConfig.trainNameLabelFontSize,\n      fontFamily: this.viewConfig.fontFamily,\n      fill: sel && !sel.stevRange ? this.viewConfig.selectedTrainPathColor : this.viewConfig.trainPathColor,\n    };\n  }\n\n  get trainNameLabelText(): string {\n    return this.train.name != \"\" ? this.train.name : `#${this.train.id}`;\n  }\n\n  get trainNameLabelRect(): { x: number, y: number, width: number, height: number, rotation: number } {\n    const text = this.trainNameLabelText;\n    const textWidth = getTextWidth(text, this.viewConfig.fontFamily, this.viewConfig.trainNameLabelFontSize);\n\n    const nodes = \n      this.viewState.trainPathDragState?.targets[this.train.id] && this.viewState.controlKeyPressed ?\n        this.selectedTrainPathNodes : this.regularTrainPathNodes;\n    const firstNodeRunning = \n      nodes.find((n, i) => i < nodes.length - 1 && nodes[i + 1].stev.station != n.stev.station) ??\n      nodes[0];\n    let segDYToDX = NaN;\n    for (const forwardNode of nodes.slice(nodes.indexOf(firstNodeRunning) + 1)) {\n      const dx = forwardNode.x - firstNodeRunning.x;\n      const dy = forwardNode.y - firstNodeRunning.y;\n      const dy2dx = dx != 0 ? dy / dx : Math.sign(dy) * Infinity;\n      if (isNaN(segDYToDX) || Math.sign(dy2dx) == Math.sign(segDYToDX) && Math.abs(dy2dx) < Math.abs(segDYToDX)) {\n        segDYToDX = dy2dx;\n      }\n      if (Math.hypot(dx, dy) >= textWidth) break;\n    }\n\n    if (!isNaN(segDYToDX)) {\n      const segDXToD = Math.sqrt(1 / (1 + segDYToDX * segDYToDX));\n      const segDYToD = segDXToD != 0 ? segDXToD * segDYToDX : 1;\n      const x = segDYToDX >= 0 ?\n        segDYToD * this.viewConfig.trainNameLabelFontSize + firstNodeRunning.x : \n        -segDYToD * (this.viewConfig.trainNameLabelLineHeight - this.viewConfig.trainNameLabelFontSize) + firstNodeRunning.x;\n      const y = segDYToDX >= 0 ?\n        -segDXToD * this.viewConfig.trainNameLabelFontSize + firstNodeRunning.y : \n        segDXToD * (this.viewConfig.trainNameLabelLineHeight - this.viewConfig.trainNameLabelFontSize) + firstNodeRunning.y;\n      const rotation = Math.atan(segDYToDX) / Math.PI * 180;\n      return { \n        x, y, rotation,\n        width: textWidth,\n        height: this.viewConfig.trainNameLabelFontSize,\n      };\n    } else {\n      return { \n        x: firstNodeRunning.x, \n        y: firstNodeRunning.y, \n        rotation: 0,\n        width: textWidth,\n        height: this.viewConfig.trainNameLabelFontSize,\n      };\n    }\n  }\n\n  get regularTrainPathConfig(): unknown {\n    return {\n      points: this.regularTrainPathNodes.flatMap(n => [n.x, n.y]),\n      stroke: this.viewConfig.trainPathColor,\n      opacity: Object.keys(this.viewState.trainSelections).length > 0 ? this.viewConfig.unselectedTrainPathOpacity : 1,\n      strokeWidth: this.viewConfig.trainPathWidth,\n      hitStrokeWidth: Math.max(this.viewConfig.trainPathWidth, this.viewConfig.minHitWidth * 2),\n    }\n  }\n\n  get regularTrainPathNodes(): (TrainPathNode & { x: number, y: number })[] {\n    const nodes = this.getTrainPathNodes();\n\n    const dragState = this.viewState.trainPathDragState;\n    const dragTarget = dragState?.targets[this.train.id];\n    if (dragState && dragTarget && !this.viewState.controlKeyPressed) {\n      let inRange = !dragTarget.stevRange;\n      for (const node of nodes) {\n        if (node.stev == dragTarget.stevRange?.from || node.stev == dragTarget.stevRange?.to) inRange = true;\n        if (inRange) {\n          node.time += dragState.timeShift;\n          node.x = this.context.getXByTime(node.time);\n        }\n        if (node.stev == dragTarget.stevRange?.to) inRange = false;\n      }\n    }\n\n    return nodes;\n  }\n\n  get selectedTrainPathEnabled(): boolean {\n    return this.viewState.trainSelections[this.train.id] != null;\n  }\n\n  get selectedTrainPathConfig(): unknown {\n    return {\n      points: this.selectedTrainPathNodes.flatMap(n => [n.x, n.y]),\n      stroke: this.viewConfig.selectedTrainPathColor,\n      strokeWidth: this.viewConfig.trainPathWidth * this.viewConfig.selectedTrainPathWidthScale,\n      hitStrokeWidth: Math.max(this.viewConfig.trainPathWidth * this.viewConfig.selectedTrainPathWidthScale, this.viewConfig.minHitWidth * 2)\n    };\n  }\n\n  get selectedTrainPathNodes(): (TrainPathNode & { x: number, y: number })[] {\n    const stevRange = \n      this.viewState.trainPathDragState?.targets[this.train.id]?.stevRange ??\n      this.viewState.trainSelections[this.train.id].stevRange;\n    let inRange = !stevRange;\n    const nodes = this.getTrainPathNodes().filter(n => {\n      if (n.stev == stevRange?.from || n.stev == stevRange?.to) inRange = true;\n      const nInRange = inRange;\n      if (n.stev == stevRange?.to) inRange = false;\n      return nInRange;\n    });\n\n    if (this.viewState.trainPathDragState) {\n      for (const node of nodes) {\n        node.time += this.viewState.trainPathDragState.timeShift;\n        node.x = this.context.getXByTime(node.time);\n      }\n    }\n\n    return nodes;\n  }\n\n  getTrainPathNodes(): (TrainPathNode & { x: number, y: number })[] {\n    return this.train.getTrainPathNodes().map(n => { \n      return { ...n, x: this.context.getXByTime(n.time), y: this.context.getYByRelY(n.relY) };\n    });\n  }\n\n  onTrainNameLabelClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      if (this.viewState.editMode && this.viewState.trainSelections[this.train.id] && !this.viewState.trainSelections[this.train.id].stevRange) {\n        this.viewState.trainInfoEditorTarget = {\n          train: this.train,\n          x: this.trainNameLabelRect.x,\n          y: this.trainNameLabelRect.y,\n          verticalAlign: this.trainNameLabelRect.rotation >= 0 ? \"top\" : \"bottom\"\n        };\n        this.$emit(\"trainInfoEditStart\");\n      } else {\n        if (!konvaEvent.evt.shiftKey) {\n          this.viewState.trainSelections = {};\n        }\n        this.$set(this.viewState.trainSelections, this.train.id, { train: this.train, stevRange: null });\n      }\n    }\n  }\n\n  onTrainPathMouseMove(): void {\n    this.viewState.pointerTargetTrainPath = null;\n  }\n\n  onSelectedTrainPathMouseMove(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    this.viewState.pointerTargetTrainPath = { \n      train: this.train, \n      stevRange: this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY)\n    };\n  }\n\n  onTrainPathClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const clickedStopRange = this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    this.changeTrainSelections(konvaEvent, clickedStopRange, false);\n  }\n\n  onSelectedTrainPathClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const clickedStopRange = this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    this.changeTrainSelections(konvaEvent, clickedStopRange, true);\n  }\n\n  onMarkerClick(konvaEvent: KonvaEventObject<MouseEvent>, trainPathNode: TrainPathNode): void {\n    const clickedStevRange = { from: trainPathNode.stev, to: trainPathNode.stev };\n    this.changeTrainSelections(konvaEvent, clickedStevRange, true);\n  }\n\n  changeTrainSelections(konvaEvent: KonvaEventObject<MouseEvent>, clickedStevRange: StopEventRange, clickSelected: boolean): void {\n    if (!this.viewState.trainPathDragState?.dragging && !this.viewState.drawingState) {\n      const sel = this.viewState.trainSelections[this.train.id];\n\n      // Remove other trains if shift not pressed\n      if (!konvaEvent.evt.shiftKey) {\n        this.viewState.trainSelections = sel ? { [this.train.id]: sel } : {};\n      }\n\n      if (!sel) {\n        this.$set(this.viewState.trainSelections, this.train.id, { train: this.train, stevRange: null });\n      } else {\n        const selectedStevRange = sel.stevRange;\n        if (!selectedStevRange) {\n          sel.stevRange = clickedStevRange;\n        } else if (!konvaEvent.evt.shiftKey) {\n          sel.stevRange = clickSelected ? clickedStevRange : null;\n        } else {\n          let selStart = false, selEnd = false, changed = false;\n          for (const stev of this.train.stevs) {\n            if (!selStart && stev == clickedStevRange.from) {\n              selectedStevRange.from = clickedStevRange.from;\n              changed = true;\n            }\n            if (stev == selectedStevRange.from) selStart = true;\n            if (stev == selectedStevRange.to) selEnd = true;\n            if (selEnd && stev == clickedStevRange.to) {\n              selectedStevRange.to = clickedStevRange.to;\n              changed = true;\n            }\n          }\n          if (!changed) {\n            this.$delete(this.viewState.trainSelections, this.train.id);\n          }\n        }\n      }\n    }\n  }\n\n  onTrainPathTap(): void {\n    this.viewState.trainSelections = { [this.train.id]: { train: this.train, stevRange: null } };\n  }\n\n  getPointedStevRange(x: number, y: number): StopEventRange {\n    if (this.train.stevs.length <= 2) {\n      return { from: this.train.stevs[0], to: this.train.stevs[this.train.stevs.length - 1] };\n    }\n\n    // TODO: more precise detection\n    for (let i = 0; i < this.train.stevs.length - 1; ++i) {\n      const thisStev = this.train.stevs[i];\n      const nextStev = this.train.stevs[i + 1];\n      const leftX = this.context.getXByTime(thisStev.time) - this.viewConfig.minHitWidth;\n      const rightX = this.context.getXByTime(nextStev.time) + this.viewConfig.minHitWidth;\n      const topY = this.context.getYByRelY(Math.min(thisStev.track.relY, nextStev.track.relY)) - this.viewConfig.minHitWidth;\n      const bottomY = this.context.getYByRelY(Math.max(thisStev.track.relY, nextStev.track.relY)) + this.viewConfig.minHitWidth;\n      if (leftX < x && x < rightX && topY < y && y < bottomY) {\n        return { from: thisStev, to: nextStev };\n      }\n    }\n    return { from: this.train.stevs[0], to: this.train.stevs[this.train.stevs.length - 1] };\n  }\n\n  onSelectedTrainPathDoubleClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (this.viewState.editMode && !this.viewState.drawingState) {\n      const targetTime = this.viewState.pointerTime;\n      const nearestStation = this.getNearestStation(konvaEvent.evt.clientY);\n      const nearestStev = this.getNearestStopEvent(targetTime);\n      if (!(nearestStation == nearestStev.station && (nearestStev.prev?.track == nearestStev.track || nearestStev.next?.track == nearestStev.track))) {\n        const index = this.train.stevs.findIndex(s => s.time > targetTime);\n        const newStev = this.train.addNewStopEvent(new StopEvent(this.train, nearestStation.tracks[0], targetTime), index);\n        this.viewState.trainSelections = { \n          [this.train.id]: {\n            train: this.train,\n            stevRange: { from: newStev, to: newStev }\n          } \n        };\n      }\n    }\n  }\n\n  getNearestStation(y: number): Station {\n    const stations = this.diagram.getStationsInMileageOrder();\n    const relY = this.context.getRelYByY(y);\n    let minSta = stations[0];\n    let minDist = Math.abs(relY - minSta.bottomRelY);\n    for (const s of stations) {\n      if (Math.abs(relY - s.topRelY) < minDist) {\n        minSta = s;\n        minDist = Math.abs(relY - s.topRelY);\n      }\n      if (Math.abs(relY - s.bottomRelY) < minDist) {\n        minSta = s;\n        minDist = Math.abs(relY - s.bottomRelY);\n      }\n    }\n    return minSta;\n  }\n\n  getNearestStopEvent(time: number): StopEvent {\n    let minStop = this.train.stevs[0];\n    let minDist = Math.abs(time - minStop.time);\n    for (const s of this.train.stevs) {\n      if (Math.abs(time - s.time) < minDist) {\n        minStop = s;\n        minDist = Math.abs(time - s.time);\n      }\n    }\n    return minStop;\n  }\n\n  onSelectedTrainPathMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (!this.viewState.editMode) {\n      return;\n    }\n\n    let minTimeShift = -86400;\n    let maxTimeShift = 86400;\n    for (const sel of Object.values(this.viewState.trainSelections)) {\n      const stevRange = sel.stevRange;\n      if (stevRange) {\n        if (stevRange.from.prev) {\n          minTimeShift = Math.max(minTimeShift, stevRange.from.prev.time - stevRange.from.time);\n        }\n        if (stevRange.to.next) {\n          maxTimeShift = Math.min(maxTimeShift, stevRange.to.next.time - stevRange.to.time);\n        }\n      }\n    }\n\n    const clickedStevRange = this.getPointedStevRange(konvaEvent.evt.clientX, konvaEvent.evt.clientY);\n    const changeTrackTargets = \n      clickedStevRange.from == clickedStevRange.to ? [ clickedStevRange.from ] : \n      clickedStevRange.from.track == clickedStevRange.to.track ? [ clickedStevRange.from, clickedStevRange.to ] :\n      null;\n\n    const firstNode = this.selectedTrainPathNodes[0];\n    this.dragState = { \n      t0: firstNode.time, \n      y0: this.context.getYByRelY(firstNode.relY),\n      sx0: konvaEvent.evt.screenX, \n      sy0: konvaEvent.evt.screenY,\n      track0: changeTrackTargets ? changeTrackTargets[0].track : null,\n      minTimeShift: minTimeShift,\n      maxTimeShift: maxTimeShift,\n      changeTimeTargets: null,\n      changeTrackTargets: changeTrackTargets ?? null\n    };\n    this.viewState.trainPathDragState = {\n      dragging: false,\n      targets: this.viewState.trainSelections,\n      timeShift: 0\n    };\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  onMarkerMouseDown(konvaEvent: KonvaEventObject<MouseEvent>, node: TrainPathNode): void {\n    if (!this.viewState.editMode) {\n      return;\n    }\n\n    this.dragState = {\n      t0: node.time,\n      y0: this.context.getYByRelY(node.relY),\n      track0: node.stev.track,\n      sx0: konvaEvent.evt.screenX,\n      sy0: konvaEvent.evt.screenY,\n      minTimeShift: node.stev.prev ? node.stev.prev.time - node.time : -86400,\n      maxTimeShift: node.stev.next ? node.stev.next.time - node.time : 86400,\n      changeTimeTargets: [ node.stev ],\n      changeTrackTargets: [ node.stev ]\n    };\n    this.viewState.trainPathDragState = {\n      dragging: false,\n      targets: { [node.stev.train.id]: { train: node.stev.train, stevRange: { from: node.stev, to: node.stev } } },\n      timeShift: 0\n    };\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    if (this.dragState && this.viewState.trainPathDragState) {\n      if (!this.viewState.trainPathDragState.dragging && Math.hypot(event.clientX - this.dragState.sx0, event.clientY - this.dragState.sy0) > 1) {\n        this.viewState.trainPathDragState.dragging = true;\n        this.viewState.pointerY = this.dragState.y0;\n      }\n      if (this.viewState.trainPathDragState.dragging) {\n        if (!this.viewState.pointerPreciseState) {\n          this.viewState.pointerTime = this.dragState.t0 + Math.floor((event.screenX - this.dragState.sx0) / this.diagram.config.xScale / 60) * 60;\n        }\n        this.viewState.trainPathDragState.timeShift = \n          !this.viewState.controlKeyPressed ?\n            Math.min(this.dragState.maxTimeShift, Math.max(this.dragState.minTimeShift, this.viewState.pointerTime - this.dragState.t0)) :\n            this.viewState.pointerTime - this.dragState.t0;\n        if (this.dragState.changeTrackTargets) {\n          const mouseRelY = this.context.getRelYByY(event.clientY);\n          const targetStation = this.dragState.changeTrackTargets[0].station;\n          const mouseTrack = targetStation.tracks.find(t => Math.abs(t.relY - mouseRelY) < this.viewConfig.minHitWidth);\n          if (mouseTrack) {\n            for (const stev of this.dragState.changeTrackTargets) {\n              stev.track = mouseTrack;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  onWindowMouseUp(): void {\n    if (this.dragState && this.viewState.trainPathDragState) {\n      window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n      window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n      if (this.viewState.trainPathDragState.dragging) {\n        if (this.dragState.changeTrackTargets && this.dragState.track0) {\n          const targets = this.dragState.changeTrackTargets;\n          const track0 = this.dragState.track0;\n          const track1 = this.dragState.changeTrackTargets[0].track;\n          if (track0 != track1) {\n            this.context.history.push({\n              this: this,\n              undo: () => { targets.forEach(stev => stev.track = track0); },\n              redo: () => { targets.forEach(stev => stev.track = track1); }\n            });\n          }\n        }\n\n        const timeShift = this.viewState.trainPathDragState.timeShift;\n        if (timeShift != 0) {\n          if (!this.viewState.controlKeyPressed) {\n            const targets = \n              this.dragState.changeTimeTargets ??\n              Object.values(this.viewState.trainSelections).flatMap(sel => {\n                return sel.stevRange ? sel.train.getStopEventsInRange(sel.stevRange) : sel.train.stevs;\n              });\n            targets.forEach(stev => stev.time += timeShift);\n            this.context.history.push({\n              this: this,\n              undo: () => { targets.forEach(stev => stev.time -= timeShift); },\n              redo: () => { targets.forEach(stev => stev.time += timeShift); }\n            });\n          } else {\n            const newTrains = Object.values(this.viewState.trainPathDragState.targets).map(sel => {\n              const srcTrain = sel.train;\n              const srcStevs = sel.stevRange ? srcTrain.getStopEventsInRange(sel.stevRange) : srcTrain.stevs;\n              const newTrain = this.diagram.addNewTrain(new Train(this.diagram.genId(), \"\"));\n              for (const srcStev of srcStevs) {\n                newTrain.addNewStopEvent(new StopEvent(newTrain, srcStev.track, srcStev.time + timeShift));\n              }\n              this.$delete(this.viewState.trainSelections, sel.train.id);\n              this.$set(this.viewState.trainSelections, newTrain.id, { train: newTrain, stevRange: null });\n              return newTrain;\n            });\n            this.context.history.push({\n              this: this,\n              undo: () => { newTrains.forEach(train => this.diagram.removeTrain(train)); },\n              redo: () => { newTrains.forEach(train => this.diagram.addNewTrain(train)); }\n            });\n          }\n        }\n      }\n      this.viewState.trainPathDragState = null;\n      this.dragState = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathGroup.vue?vue&type=template&id=7a0c5cc7&scoped=true&\"\nimport script from \"./TrainPathGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a0c5cc7\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport TrainPathGroup from \"./TrainPathGroup.vue\";\n\n@Component({\n  components: {\n    TrainPathGroup\n  },\n})\nexport default class BackLayer extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  // private mounted(): void {\n  //   const hitCanvas = (this.$refs.trainPathLayer as any).getNode().hitCanvas._canvas;\n  //   document.body.appendChild(hitCanvas);\n  // }\n\n  private get layerConfig(): unknown {\n    return {\n      clip: {\n        x: this.diagram.config.leftPaneWidth,\n        y: this.viewConfig.topPaneHeight,\n        width: this.viewState.viewWidth - this.diagram.config.leftPaneWidth,\n        height: this.viewState.viewHeight - this.viewConfig.topPaneHeight,\n      }\n    };\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainPathLayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainPathLayer.vue?vue&type=template&id=7e6e656e&scoped=true&\"\nimport script from \"./TrainPathLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainPathLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e6e656e\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport Hammer from \"hammerjs\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\nimport BackLayer from \"./BackLayer.vue\";\nimport Pointer from \"./Pointer.vue\";\nimport TrainPathLayer from \"./TrainPathLayer.vue\";\n\n@Component({\n  components: {\n    BackLayer, Pointer, TrainPathLayer\n  },\n})\nexport default class Stage extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  $el!: HTMLElement;\n\n  private stageDragState: { scrollX0: number, scrollY0: number, x0: number, y0: number, dragging: boolean } | null = null;\n  private pinchState: { lastScale: number } | null = null;\n\n  private get stageConfig(): unknown {\n    return {\n      width: this.viewState.viewWidth,\n      height: this.viewState.viewHeight\n    };\n  }\n\n  private get stationsInMileageOrder(): Station[] {\n    return this.diagram.getStationsInMileageOrder();\n  }\n\n  private mounted(): void {\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n\n    const hammer = new Hammer(this.$el);\n    hammer.get(\"pan\").set({ direction: Hammer.DIRECTION_ALL });\n    hammer.get(\"pinch\").set({ enable: true });\n    hammer.on(\"panstart\", this.onPanStart);\n    hammer.on(\"panmove\", this.onPanMove);\n    hammer.on(\"panend\", this.onPanEnd);\n    hammer.on(\"pinchstart\", this.onPinchStart);\n    hammer.on(\"pinchmove\", this.onPinchMove);\n    hammer.on(\"pinchend\", this.onPinchEnd);\n  }\n\n  private unmounted(): void {\n    window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n  }\n\n  private onStageMouseMove(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const event = konvaEvent.evt;\n\n    // Update pointer state\n    this.viewState.pointerScreenX = event.screenX;\n    if (this.viewState.pointerPreciseState) {\n      const dUnit = Math.round((event.screenX - this.viewState.pointerPreciseState.sx0) / this.viewConfig.pointerPrecisePixelPerTimeUnit);\n      this.viewState.pointerTime = dUnit * this.diagram.config.minimumTimeUnit + this.viewState.pointerPreciseState.t0;\n    } else if (!this.viewState.trainPathDragState?.dragging) {\n      this.viewState.pointerTime = Math.round(this.context.getTimeByX(event.clientX) / 60) * 60;\n      if (event.clientX >= this.diagram.config.leftPaneWidth) {\n        const pointerTargetLine = this.findPointerTargetLine(event.clientY);\n        if (pointerTargetLine) {\n          this.viewState.pointerTargetLine = pointerTargetLine ?? null;\n          this.viewState.pointerY = this.context.getYByRelY(pointerTargetLine.relY);\n        } else {\n          this.viewState.pointerTargetLine = null;\n        }\n      } else {\n        this.viewState.pointerTargetLine = null;\n      }\n    }\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      this.viewState.pointerTargetTrainPath = null;\n    }\n\n    // Update drawing floating\n    const drawingState = this.viewState.drawingState;\n    if (drawingState) {\n      if (drawingState.direction > 0) {\n        this.viewState.pointerTime = Math.max(this.viewState.pointerTime, drawingState.lastStev.time);\n      } else if (drawingState.direction < 0) {\n        this.viewState.pointerTime = Math.min(this.viewState.pointerTime, drawingState.lastStev.time);\n      }\n\n      if (drawingState.floating) {\n        drawingState.train.removeStopEvent(drawingState.floating);\n        drawingState.floating = null;\n      }\n\n      const pointerTargetLine = event.clientX >= this.diagram.config.leftPaneWidth ?\n        this.findPointerTargetLine(event.clientY) : undefined;\n      if (pointerTargetLine) {\n        const targetTrack = pointerTargetLine.track ?? pointerTargetLine.station.tracks[0];\n        const newStev = drawingState.train.addNewStopEvent(\n          new StopEvent(\n            drawingState.train,\n            targetTrack,\n            this.viewState.pointerTime\n          ),\n          drawingState.direction > 0 || (drawingState.direction == 0 && this.viewState.pointerTime >= drawingState.lastStev.time) ? undefined : 0\n        );\n        drawingState.floating = newStev;\n      }\n    }\n  }\n\n  private findPointerTargetLine(y: number): { station: Station, track: Track | null, relY: number } | undefined {\n    const stationPointedOnTop = this.stationsInMileageOrder.find(s => \n      Math.abs(this.context.getYByRelY(s.topRelY) - y) < Math.max(this.viewConfig.stationLineWidth * 0.5, this.viewConfig.minHitWidth));\n    if (stationPointedOnTop) {\n      return { station: stationPointedOnTop, track: null, relY: stationPointedOnTop.topRelY };\n    }\n\n    const stationPointedOnBottom = this.stationsInMileageOrder.find(s =>\n      Math.abs(this.context.getYByRelY(s.bottomRelY) - y) < Math.max(this.viewConfig.stationLineWidth * 0.5, this.viewConfig.minHitWidth));\n    if (stationPointedOnBottom) {\n      return { station: stationPointedOnBottom, track: null, relY: stationPointedOnBottom.bottomRelY };\n    }\n\n    const station = this.stationsInMileageOrder.find(s => \n      this.context.getYByRelY(s.topRelY) + this.diagram.config.trackLineSpan - Math.max(this.viewConfig.trackLineWidth * 0.5, this.viewConfig.minHitWidth) < y &&\n      this.context.getYByRelY(s.bottomRelY) - this.diagram.config.trackLineSpan + Math.max(this.viewConfig.trackLineWidth * 0.5, this.viewConfig.minHitWidth) > y\n    );\n    if (station) {\n      const pointedTrack = station.tracks.find(t => Math.abs(this.context.getYByRelY(t.relY) - y) < Math.max(this.viewConfig.trackLineWidth * 0.5, this.viewConfig.minHitWidth));\n      if (pointedTrack) {\n        return { station, track: pointedTrack, relY: pointedTrack.relY };\n      }\n    }\n  }\n\n  private onStageClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    const drawingState = this.viewState.drawingState;\n    if (drawingState) {\n      if (konvaEvent.evt.button == 0 && this.viewState.pointerTargetLine) {\n        if (drawingState.direction == 0) {\n          drawingState.direction = this.viewState.pointerTime >= drawingState.lastStev.time ? 1 : -1;\n        }\n        if (drawingState.floating){\n          const triple = drawingState.floating.track == drawingState.lastStev.track && (\n            drawingState.direction > 0 && drawingState.lastStev.track == drawingState.lastStev.prev?.track ||\n            drawingState.direction < 0 && drawingState.lastStev.track == drawingState.lastStev.next?.track\n          );\n          if (triple) {\n            drawingState.lastStev.time = this.viewState.pointerTime;\n            drawingState.train.removeStopEvent(drawingState.floating);\n          } else {\n            drawingState.lastStev = drawingState.floating;\n          }\n          drawingState.floating = null;\n        }\n      }\n      if (konvaEvent.evt.button == 2) {\n        if (drawingState.lastStev == drawingState.stableEnd) {\n          if (drawingState.floating) {\n            drawingState.train.removeStopEvent(drawingState.floating);\n          }\n          this.viewState.drawingState = null;\n        } else {\n          const newLastStev = drawingState.direction > 0 ? drawingState.lastStev.prev : drawingState.lastStev.next;\n          if (newLastStev) {\n            drawingState.train.removeStopEvent(drawingState.lastStev);\n            drawingState.lastStev = newLastStev;\n          } else {\n            this.$delete(this.diagram.trains, drawingState.train.id);\n            this.viewState.drawingState = null;\n          }\n        }\n      }\n    }\n\n    if (konvaEvent.target == konvaEvent.currentTarget && \n        !konvaEvent.evt.ctrlKey &&\n        !konvaEvent.evt.shiftKey && \n        !this.stageDragState?.dragging && \n        !this.viewState.trainPathDragState?.dragging && \n        !this.viewState.drawingState) {\n      this.viewState.trainSelections = {};\n    }\n\n    if (this.viewState.trainInfoEditorTarget && !konvaEvent.target.attrs.ref?.startsWith(\"train-name-label\")) {\n      this.$emit(\"trainInfoEditEnd\");\n    }\n  }\n\n  private onTouchEnd(konvaEvent: KonvaEventObject<TouchEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget && \n      !this.stageDragState?.dragging) { \n      this.viewState.trainSelections = {};\n    }    \n    if (this.stageDragState) {\n      this.stageDragState = null;\n    }\n  }\n\n  private onStageDoubleClick(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget && this.viewState.drawingState) {\n      const drawingState = this.viewState.drawingState;\n      if (drawingState.floating) {\n        drawingState.train.removeStopEvent(drawingState.floating);\n      }\n      if (drawingState.train.stevs.length <= 1) {\n        this.$delete(this.diagram.trains, drawingState.train.id);\n      } else {\n        const stableEnd = drawingState.stableEnd;\n        if (stableEnd) {\n          const stableIndex = drawingState.train.stevs.indexOf(stableEnd);\n          const addedStevs = drawingState.direction > 0 ? \n            drawingState.train.stevs.filter((e, i) => i > stableIndex) : drawingState.train.stevs.filter((e, i) => i < stableIndex);\n          if (drawingState.direction > 0) {\n            this.context.history.push({\n              this: this,\n              undo: () => { drawingState.train.stevs.splice(stableIndex + 1); },\n              redo: () => { addedStevs.forEach(stev => drawingState.train.stevs.push(stev)); }\n            });\n          } else {\n            this.context.history.push({\n              this: this,\n              undo: () => { drawingState.train.stevs.splice(0, stableIndex); },\n              redo: () => { drawingState.train.stevs = addedStevs.concat(drawingState.train.stevs); }\n            });\n          }\n        } else {\n          this.context.history.push({\n            this: this,\n            undo: () => { this.$delete(this.diagram.trains, drawingState.train.id); },\n            redo: () => { this.$set(this.diagram.trains, drawingState.train.id, drawingState.train) }\n          });\n        }\n      }\n      this.viewState.drawingState = null;\n      this.viewState.trainSelections = {};\n    } else if (konvaEvent.target == konvaEvent.currentTarget && this.viewState.editMode) {\n      if (konvaEvent.evt.clientX >= this.diagram.config.leftPaneWidth) {\n        const targetLine = this.viewState.pointerTargetLine;\n        if (targetLine && (targetLine.track || !targetLine.station.expanded)) {\n          const track = targetLine.track ?? targetLine.station.tracks[0];\n          const train = this.diagram.addNewTrain(new Train(this.diagram.genId(), \"\"));\n          train.addNewStopEvent(new StopEvent(train, track, this.viewState.pointerTime));\n          this.viewState.trainSelections = { [train.id]: { train: train, stevRange: null } };\n          this.viewState.drawingState = {\n            train: this.diagram.trains[train.id],\n            lastStev: this.diagram.trains[train.id].stevs[0],\n            direction: 0,\n            stableEnd: null,\n            floating: null\n          };\n        }\n      } else {\n        const relY = this.context.getRelYByY(konvaEvent.evt.clientY);\n        const prevSta = this.stationsInMileageOrder.reverse().find(s => s.topRelY < relY);\n        const mileage = prevSta ?\n          (relY - prevSta.bottomRelY) / this.diagram.config.yScale + prevSta.mileage :\n          relY / this.diagram.config.yScale;\n        const station = Station.fromJSON({\n          id: this.diagram.genId(),\n          name: \"\",\n          mileage,\n          tracks: [ { id: this.diagram.genId(), name: \"\" } ],\n        });\n        this.$set(this.diagram.stations, station.id, station);\n        this.diagram.updateY();\n\n        this.context.history.push({\n          this: this,\n          undo: () => { \n            this.$delete(this.diagram.stations, station.id);\n            this.diagram.updateY();\n          },\n          redo: () => { \n            this.$set(this.diagram.stations, station.id, station);\n            this.diagram.updateY();\n          }\n        });\n\n        this.viewState.stationNameInputTarget = station;\n        this.$emit(\"stationNameInputStart\");\n      }\n    }\n  }\n\n  private onStageMouseDown(konvaEvent: KonvaEventObject<MouseEvent>): void {\n    if (konvaEvent.target == konvaEvent.currentTarget) {\n      this.startDrag(konvaEvent.evt.screenX, konvaEvent.evt.screenY);\n    }\n  }\n\n  private onWindowMouseMove(event: MouseEvent): void {\n    this.moveDrag(event.screenX, event.screenY);\n  }\n\n  private onWindowMouseUp(event: MouseEvent): void {\n    if (this.stageDragState) {\n      this.moveDrag(event.screenX, event.screenY);\n      this.stageDragState = null;\n    }\n  }\n\n  private onPanStart(event: { pointerType: string, center: { x: number, y: number } }): void {\n    if (event.pointerType != \"mouse\") {\n      this.startDrag(event.center.x, event.center.y);\n    }\n  }\n\n  private onPanMove(event: { pointerType: string, center: { x: number, y: number } }): void {\n    if (event.pointerType != \"mouse\") {\n      this.moveDrag(event.center.x, event.center.y);\n    }\n  }\n\n  private onPanEnd(event: { pointerType: string, center: { x: number, y: number } }): void {\n    if (event.pointerType != \"mouse\" && this.stageDragState) {\n      this.moveDrag(event.center.x, event.center.y);\n      // this.stageDragState = null;  // do in touchEnd\n    }\n  }\n\n  private startDrag(x: number, y: number): void {\n    if (!this.viewState.pointerPreciseState) {\n      this.stageDragState = {\n        scrollX0: this.diagram.config.scrollX,\n        scrollY0: this.diagram.config.scrollY,\n        x0: x,\n        y0: y,\n        dragging: false,\n      };\n    }\n  }\n\n  private moveDrag(x: number, y: number): void {\n    if (this.stageDragState) {\n      if (Math.hypot(x - this.stageDragState.x0, y - this.stageDragState.y0) > 1) {\n        this.stageDragState.dragging = true;\n      }\n      if (this.stageDragState.dragging) {\n        this.diagram.config.scrollX = \n          Math.max(this.diagram.config.minPlotTime * this.diagram.config.xScale - this.viewConfig.plotPanePadding, \n            Math.min(this.diagram.config.maxPlotTime * this.diagram.config.xScale - (this.viewState.viewWidth - this.diagram.config.leftPaneWidth - this.viewConfig.plotPanePadding),\n              this.stageDragState.scrollX0 - (x - this.stageDragState.x0)));\n        this.diagram.config.scrollY = \n          Math.max(0, Math.min(this.diagram.maxRelY - (this.viewState.viewHeight - this.viewConfig.plotPanePadding - this.viewConfig.topPaneHeight - this.diagram.config.trackLineSpan), \n            this.stageDragState.scrollY0 - (y - this.stageDragState.y0)));\n      }\n    }\n  }\n\n  private onStageMouseWheel(konvaEvent: KonvaEventObject<WheelEvent>): void {\n    // const f = Math.pow(2, -konvaEvent.evt.deltaY * this.viewConfig.wheelScale * 0.001);\n    const f = Math.pow(2, -Math.sign(konvaEvent.evt.deltaY) * this.viewConfig.wheelScale);\n    this.diagram.config.scrollX += (f - 1) * (konvaEvent.evt.clientX - this.diagram.config.leftPaneWidth + this.diagram.config.scrollX);\n    this.diagram.config.scrollY = \n      Math.max(0, Math.min(this.diagram.maxRelY + this.viewConfig.topPaneHeight - this.viewState.viewHeight,\n      this.diagram.config.scrollY + (f - 1) * (konvaEvent.evt.clientY - this.viewConfig.topPaneHeight + this.diagram.config.scrollY)));\n    this.diagram.config.xScale *= f;\n    this.diagram.config.yScale *= f;\n    this.diagram.updateY();\n    konvaEvent.evt.preventDefault();\n  }\n\n  private onPinchStart(event: { scale: number }): void {\n    this.pinchState = { lastScale: event.scale };\n  }\n\n  private onPinchMove(event: { center: { x: number, y: number }, scale: number }): void {\n    if (this.pinchState) {\n      this.diagram.config.scrollX += (event.scale / this.pinchState.lastScale - 1) * (event.center.x - this.diagram.config.leftPaneWidth + this.diagram.config.scrollX);\n      this.diagram.config.scrollY = \n        Math.max(0, Math.min(this.diagram.maxRelY + this.viewConfig.topPaneHeight - this.viewState.viewHeight,\n        this.diagram.config.scrollY + (event.scale / this.pinchState.lastScale - 1) * (event.center.y - this.viewConfig.topPaneHeight + this.diagram.config.scrollY)));\n      this.diagram.config.xScale *= event.scale / this.pinchState.lastScale;\n      this.diagram.config.yScale *= event.scale / this.pinchState.lastScale;\n      this.pinchState.lastScale = event.scale;\n      this.diagram.updateY();\n    }\n  }\n\n  private onPinchEnd(event: { center: { x: number, y: number }, scale: number }): void {\n    if (this.pinchState) {\n      this.onPinchMove(event);\n      this.pinchState = null;\n    }\n  }\n\n  private onKeyDown(event: KeyboardEvent): void {\n    if (!event.repeat) {\n      if (event.key == \"Alt\") {\n        this.viewState.pointerPreciseState = {\n          sx0: this.viewState.pointerScreenX,\n          t0: this.viewState.pointerTime\n        };\n      }\n      if (event.key == \"Control\") {\n        this.viewState.controlKeyPressed = true;\n      }\n      if (event.key == \"Delete\" && this.viewState.editMode && !this.viewState.busy) {\n        const deletingTrains: Train[] = [];\n        const deletingStevs: { stev: StopEvent, index: number }[] = [];\n        for (const sel of Object.values(this.viewState.trainSelections)) {\n          if (!sel.stevRange) {\n            deletingTrains.push(sel.train);\n          } else {\n            const fromIndex = sel.train.stevs.indexOf(sel.stevRange.from);\n            const toIndex = sel.train.stevs.indexOf(sel.stevRange.to);\n            const size = toIndex - fromIndex + 1;\n            if (size >= sel.train.stevs.length - 1) {\n              deletingTrains.push(sel.train);\n            } else {\n              for (let i = fromIndex; i <= toIndex; ++i) {\n                deletingStevs.push({ stev: sel.train.stevs[i], index: i });\n              }\n            }\n          }\n        }\n        deletingTrains.forEach(train => this.$delete(this.diagram.trains, train.id));\n        deletingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n        this.context.history.push({\n          this: this,\n          undo: () => {\n            deletingStevs.forEach(e => e.stev.train.addNewStopEvent(e.stev, e.index));\n            deletingTrains.forEach(train => this.$set(this.diagram.trains, train.id, train));\n          },\n          redo: () => {\n            deletingTrains.forEach(train => this.$delete(this.diagram.trains, train.id));\n            deletingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n          }\n        });\n        this.viewState.trainSelections = {};\n      }\n    }\n  }\n\n  private onKeyUp(event: KeyboardEvent): void {\n    if (event.key == \"Alt\") {\n      this.viewState.pointerPreciseState = null;\n    }\n    if (event.key == \"Control\") {\n      this.viewState.controlKeyPressed = false;\n    }\n  }\n\n  private onContextMenu(konvaEvent: KonvaEventObject<MouseEvent>): boolean {\n    konvaEvent.evt.preventDefault();\n    return false;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Stage.vue?vue&type=template&id=7b2a6077&scoped=true&\"\nimport script from \"./Stage.vue?vue&type=script&lang=ts&\"\nexport * from \"./Stage.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b2a6077\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewState.editMode && _vm.station.expanded && _vm.isBottomLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"plus\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport Track from \"@/data/Track\";\n\n@Component\nexport default class StationAddTrackButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n  @Prop() private station!: Station;\n\n  private get style(): unknown {\n    return {\n      left: `${this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelRightMargin}px`,\n      top: `${this.context.getYByRelY(this.station.bottomRelY) - this.diagram.config.trackLineSpan}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  private get isBottomLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.station.bottomRelY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.station.bottomRelY) < this.viewState.viewHeight;\n  }\n\n  private onClick(): void {\n    if (!this.viewState.inputEnabled) {\n      const newTrack = this.station.addNewTrack(new Track(this.station, this.diagram.genId(), \"\"));\n      this.diagram.updateY();\n\n      this.context.history.push({\n        this: this,\n        undo: () => { \n          this.station.removeTrack(newTrack); \n          this.diagram.updateY();\n        },\n        redo: () => { \n          this.station.addNewTrack(newTrack); \n          this.diagram.updateY();\n        }\n      });\n\n      this.viewState.trackNameInputTarget = newTrack;\n      this.$emit(\"trackNameInputStart\");\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationAddTrackButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationAddTrackButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationAddTrackButton.vue?vue&type=template&id=73a8aefa&scoped=true&\"\nimport script from \"./StationAddTrackButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationAddTrackButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73a8aefa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isBottomLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":_vm.icon,\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\n\n@Component\nexport default class StationExpandButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n  @Prop() private station!: Station;\n\n  private get icon(): string {\n    return this.station.expanded ? \"chevron-up\" : \"chevron-down\";\n  }\n\n  private get style(): unknown {\n    return {\n      left: `${this.viewConfig.stationLabelLeftMargin}px`,\n      top: `${this.context.getYByRelY(this.station.bottomRelY)}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  private get isBottomLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.station.bottomRelY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.station.bottomRelY) < this.viewState.viewHeight;\n  }\n\n  private onClick(): void {\n    if (!this.viewState.inputEnabled) {\n      this.station.expanded = !this.station.expanded;\n      this.diagram.updateY();\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationExpandButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationExpandButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationExpandButton.vue?vue&type=template&id=0c63bd4d&scoped=true&\"\nimport script from \"./StationExpandButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationExpandButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c63bd4d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewState.stationNameInputTarget),expression:\"viewState.stationNameInputTarget\"}],style:(_vm.style),domProps:{\"value\":_vm.targetStation.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onComplete}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\n\n@Component\nexport default class StationNameInput extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  $el!: HTMLInputElement;\n\n  private get targetStation(): Station | Record<string, never> {\n    return this.viewState.stationNameInputTarget ?? {};\n  }\n\n  private get style(): unknown {\n    return {\n      left: `${this.viewConfig.stationLabelLeftMargin}px`,\n      top: `${this.context.getYByRelY(this.targetStation.topRelY) - this.viewConfig.stationLabelFontSize - 4}px`,\n      width: `${this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelLeftMargin - this.viewConfig.stationLabelRightMargin}px`,\n      height: `${this.viewConfig.stationLabelFontSize + 4}px`,\n      paddingTop: \"2px\",\n      lineHeight: `${this.viewConfig.stationLabelFontSize}px`,\n      border: \"none\",\n      fontSize: `${this.viewConfig.stationLabelFontSize}px`,\n    };\n  }\n\n  private onComplete(): void {\n    const targetStation = this.targetStation;\n    const name0 = this.targetStation.name;\n    const name1 = (this.$el as HTMLInputElement).value;\n    if (name0 != name1) {\n      targetStation.name = name1;\n      this.context.history.push({\n        this: this,\n        undo: () => { targetStation.name = name0; },\n        redo: () => { targetStation.name = name1; }\n      });\n    }\n    this.viewState.stationNameInputTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationNameInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationNameInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationNameInput.vue?vue&type=template&id=b1467f1a&scoped=true&\"\nimport script from \"./StationNameInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationNameInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b1467f1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewState.editMode && _vm.isTopLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"close\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Train from \"@/data/Train\";\n\n@Component\nexport default class StationRemoveButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n  @Prop() private station!: Station;\n\n  private get style(): unknown {\n    return {\n      left: `${this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelRightMargin}px`,\n      top: `${this.context.getYByRelY(this.station.topRelY) - this.diagram.config.trackLineSpan}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  private get isTopLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.station.topRelY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.station.topRelY) < this.viewState.viewHeight;\n  }\n\n  private onClick(): void {\n    if (!this.viewState.busy) {\n      const removingTrains: Train[] = [];\n      const removingStevs: { stev: StopEvent, index: number }[] = [];\n      for (const train of Object.values(this.diagram.trains)) {\n        for (let i = 0; i < train.stevs.length; ++i) {\n          const stev = train.stevs[i];\n          if (stev.station == this.station) {\n            removingStevs.push({ stev, index: i });\n            if (train.stevs.length <= 1) {\n              removingTrains.push(train);\n            }\n          }\n        }\n      }\n\n      removingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n      removingTrains.forEach(train => this.diagram.removeTrain(train)); \n      this.$delete(this.diagram.stations, this.station.id);\n      this.diagram.updateY();\n\n      this.context.history.push({\n        this: this,\n        undo: () => { \n          this.$set(this.diagram.stations, this.station.id, this.station);\n          removingTrains.forEach(train => this.diagram.addNewTrain(train)); \n          removingStevs.forEach(e => e.stev.train.addNewStopEvent(e.stev, e.index));\n          this.diagram.updateY();\n        },\n        redo: () => { \n          removingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n          removingTrains.forEach(train => this.diagram.removeTrain(train)); \n          this.$delete(this.diagram.stations, this.station.id); \n          this.diagram.updateY();\n        }\n      });\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationRemoveButton.vue?vue&type=template&id=5477a2e8&scoped=true&\"\nimport script from \"./StationRemoveButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationRemoveButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5477a2e8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.viewState.editMode && _vm.station.expanded && Object.values(_vm.station.tracks).length > 1 && _vm.isLineIntersectingPlotPane)?_c('b-icon',{style:(_vm.style),attrs:{\"icon\":\"close\",\"size\":\"is-small\"},nativeOn:{\"click\":function($event){return _vm.onClick($event)}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Prop, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Station from \"@/data/Station\";\nimport StopEvent from \"@/data/StopEvent\";\nimport Track from \"@/data/Track\";\nimport Train from \"@/data/Train\";\n\n@Component\nexport default class StationRemoveTrackButton extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  @Prop() private station!: Station;\n  @Prop() private track!: Track;\n\n  private get style(): unknown {\n    return {\n      left: `${this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelRightMargin}px`,\n      top: `${this.context.getYByRelY(this.track.relY) - this.diagram.config.trackLineSpan}px`,\n      height: `${this.diagram.config.trackLineSpan}px`,\n    };\n  }\n\n  private get isLineIntersectingPlotPane(): boolean {\n    return this.context.getYByRelY(this.track.relY) >= this.viewConfig.topPaneHeight && \n      this.context.getYByRelY(this.track.relY) < this.viewState.viewHeight;\n  }\n\n  private onClick(): void {\n    if (!this.viewState.busy) {\n      const removingTrains: Train[] = [];\n      const removingStevs: { stev: StopEvent, index: number }[] = [];\n      for (const train of Object.values(this.diagram.trains)) {\n        for (let i = 0; i < train.stevs.length; ++i) {\n          const stev = train.stevs[i];\n          if (stev.track == this.track) {\n            removingStevs.push({ stev, index: i });\n            if (train.stevs.length <= 1) {\n              removingTrains.push(train);\n            }\n          }\n        }\n      }\n      const trackIndex = this.station.tracks.indexOf(this.track);\n\n      removingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n      removingTrains.forEach(train => this.diagram.removeTrain(train)); \n      this.station.removeTrack(this.track);\n      this.diagram.updateY();\n\n      this.context.history.push({\n        this: this,\n        undo: () => { \n          this.station.addNewTrack(this.track, trackIndex); \n          removingTrains.forEach(train => this.diagram.addNewTrain(train)); \n          removingStevs.forEach(e => e.stev.train.addNewStopEvent(e.stev, e.index));\n          this.diagram.updateY();\n        },\n        redo: () => { \n          removingStevs.forEach(e => e.stev.train.removeStopEvent(e.stev));\n          removingTrains.forEach(train => this.diagram.removeTrain(train)); \n          this.station.removeTrack(this.track);\n          this.diagram.updateY();\n        }\n      });\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StationRemoveTrackButton.vue?vue&type=template&id=9d3a3506&scoped=true&\"\nimport script from \"./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./StationRemoveTrackButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9d3a3506\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewState.trackNameInputTarget),expression:\"viewState.trackNameInputTarget\"}],style:(_vm.style),domProps:{\"value\":_vm.targetTrack.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)},\"blur\":_vm.onComplete}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Track from \"@/data/Track\";\n\n@Component\nexport default class TrackNameInput extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  $el!: HTMLInputElement;\n\n  private get targetTrack(): Track | Record<string, never> {\n    return this.viewState.trackNameInputTarget ?? {};\n  }\n\n  private get style(): unknown {\n    return this.viewState.trackNameInputTarget ?\n      {\n        left: `${this.viewConfig.stationLabelLeftMargin + this.viewConfig.trackLabelLeftMargin}px`,\n        top: `${this.context.getYByRelY(this.targetTrack.relY) - this.viewConfig.stationLabelFontSize - 4}px`,\n        width: `${this.diagram.config.leftPaneWidth - this.viewConfig.stationLabelLeftMargin - this.viewConfig.trackLabelLeftMargin - this.viewConfig.stationLabelRightMargin}px`,\n        height: `${this.viewConfig.stationLabelFontSize + 4}px`,\n        paddingTop: \"2px\",\n        lineHeight: `${this.viewConfig.stationLabelFontSize}px`,\n        border: \"none\",\n        fontSize: `${this.viewConfig.stationLabelFontSize}px`,\n      } : {};\n  }\n\n  private onComplete(): void {\n    const targetTrack = this.targetTrack;\n    const name0 = targetTrack.name;\n    const name1 = (this.$el as HTMLInputElement).value;\n    if (name0 != name1) {\n      targetTrack.name = name1;\n      this.context.history.push({\n        this: this,\n        undo: () => { targetTrack.name = name0; },\n        redo: () => { targetTrack.name = name1; }\n      });\n    }\n    this.viewState.trackNameInputTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackNameInput.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackNameInput.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrackNameInput.vue?vue&type=template&id=5d75e51d&scoped=true&\"\nimport script from \"./TrackNameInput.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrackNameInput.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d75e51d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"train-info-editor-box box\",style:(_vm.groupStyle)},[_c('input',{ref:\"trainNameInput\",staticClass:\"train-name-input\",style:(_vm.trainNameInputStyle),domProps:{\"value\":_vm.targetTrain.name},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onComplete($event)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, InjectReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Train from \"@/data/Train\";\n\n@Component\nexport default class TrackNameInput extends Vue {\n  @InjectReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  $refs!: {\n    trainNameInput: HTMLInputElement\n  };\n\n  private get targetTrain(): Train | Record<string, never> {\n    return this.viewState.trainInfoEditorTarget?.train ?? {};\n  }\n\n  private get groupStyle(): unknown {\n    const state = this.viewState.trainInfoEditorTarget;\n    return state ?\n      {\n        left: `${state.x}px`,\n        top: `${state.y + (state.verticalAlign == \"bottom\" ? -this.$el?.clientHeight ?? 0 : 0)}px`,\n      } : {\n        left: \"0px\",\n        top: `${this.viewState.viewHeight}px`\n      };\n  }\n\n  private get trainNameInputStyle(): unknown {\n    return this.viewState.trainInfoEditorTarget ?\n      {\n        lineHeight: `${this.viewConfig.stationLabelFontSize}px`,\n        fontSize: `${this.viewConfig.stationLabelFontSize}px`,\n      } : {};\n  }\n\n  onComplete(): void {\n    const targetTrain = this.targetTrain;\n    const name0 = targetTrain.name;\n    const name1 = this.$refs.trainNameInput.value;\n    if (name0 != name1) {\n      targetTrain.name = name1;\n      this.context.history.push({\n        this: this,\n        undo: () => { targetTrain.name = name0; },\n        redo: () => { targetTrain.name = name1; }\n      });\n    }\n    this.viewState.trainInfoEditorTarget = null;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainInfoEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainInfoEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TrainInfoEditor.vue?vue&type=template&id=5b03e809&scoped=true&\"\nimport script from \"./TrainInfoEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TrainInfoEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TrainInfoEditor.vue?vue&type=style&index=0&id=5b03e809&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b03e809\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, ProvideReactive, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"@/data/DiagramViewContext\";\nimport Stage from \"./Stage.vue\";\nimport StationAddTrackButton from \"./StationAddTrackButton.vue\";\nimport StationExpandButton from \"./StationExpandButton.vue\";\nimport StationNameInput from \"./StationNameInput.vue\";\nimport StationRemoveButton from \"./StationRemoveButton.vue\";\nimport StationRemoveTrackButton from \"./StationRemoveTrackButton.vue\";\nimport TrackNameInput from \"./TrackNameInput.vue\";\nimport TrainInfoEditor from \"./TrainInfoEditor.vue\";\n\n@Component({\n  components: {\n    Stage, \n    StationAddTrackButton, \n    StationExpandButton, \n    StationNameInput, \n    StationRemoveButton, \n    StationRemoveTrackButton, \n    TrackNameInput,\n    TrainInfoEditor\n  },\n})\nexport default class DiagramView extends Vue {\n  @Prop({ default: new DiagramViewContext() }) @ProvideReactive() private context!: DiagramViewContext;\n  private get diagram() { return this.context.diagram; }\n  private get viewConfig() { return this.context.config; }\n  private get viewState() { return this.context.state; }\n\n  $refs!: { \n    stationNameInput: StationNameInput,  \n    trackNameInput: TrackNameInput,\n    trainInfoEditor: TrainInfoEditor,\n  };\n\n  private mounted(): void {\n    const resizeObserver = new ResizeObserver(this.updateViewSize);\n    resizeObserver.observe(this.$el);\n  }\n\n  private onStationNameInputStart(): void {\n    this.$nextTick(() => this.$refs.stationNameInput.$el.focus());\n  }\n\n  private onTrackNameInputStart(): void {\n    this.$nextTick(() => this.$refs.trackNameInput.$el.focus());\n  }\n\n  private onTrainInfoEditStart(): void {\n    this.$nextTick(() => this.$refs.trainInfoEditor.$refs.trainNameInput.focus());\n  }\n\n  private onTrainInfoEditEnd(): void {\n    this.$refs.trainInfoEditor.onComplete();\n  }\n\n  private updateViewSize(): void {\n    if (this.$el) {\n      this.viewState.viewWidth = this.$el.clientWidth;\n      this.viewState.viewHeight = this.$el.clientHeight;\n        this.diagram.config.scrollX = \n          Math.max(this.diagram.config.minPlotTime * this.diagram.config.xScale - this.viewConfig.plotPanePadding, \n            Math.min(this.diagram.config.maxPlotTime * this.diagram.config.xScale - (this.viewState.viewWidth - this.diagram.config.leftPaneWidth - this.viewConfig.plotPanePadding),\n              this.diagram.config.scrollX));\n        this.diagram.config.scrollY = \n          Math.max(0, Math.min(this.context.getYByRelY(this.diagram.maxRelY), \n            this.diagram.config.scrollY));\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagramView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DiagramView.vue?vue&type=template&id=4cefd6dc&scoped=true&\"\nimport script from \"./DiagramView.vue?vue&type=script&lang=ts&\"\nexport * from \"./DiagramView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DiagramView.vue?vue&type=style&index=0&id=4cefd6dc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cefd6dc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-carousel',{attrs:{\"autoplay\":false,\"indicator-inside\":false}},[_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_add_new_station.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewStationTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewStationBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_add_new_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.addNewTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_select_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.selectTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.selectTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_edit_train.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTrainTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTrainBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_edit_time.png\")}})]),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTimeTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.editTimeBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('img',{attrs:{\"src\":require(\"@/assets/help_tips.png\")}}),_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.tipsTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.tipsBody'))}})])])]),_c('b-carousel-item',[_c('div',{staticClass:\"help-item\"},[_c('div',{staticClass:\"help-desc content\"},[_c('h5',{staticClass:\"title is-5\",domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.contactTitle'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('message.help.contactBody'))}})])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class HelpPane extends Vue {\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HelpView.vue?vue&type=template&id=ec83cbc6&scoped=true&\"\nimport script from \"./HelpView.vue?vue&type=script&lang=ts&\"\nexport * from \"./HelpView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HelpView.vue?vue&type=style&index=0&id=ec83cbc6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ec83cbc6\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport DiagramViewContext from \"./data/DiagramViewContext\";\nimport Diagram from \"./data/Diagram\";\nimport DiagramView from \"./components/DiagramView.vue\";\nimport HelpView from \"./components/HelpView.vue\";\n\n@Component({\n  components: {\n    DiagramView, HelpView\n  },\n})\nexport default class App extends Vue {\n  private context = new DiagramViewContext();\n\n  private diagramFileName = \"diagram.json\";\n  private enableSwitchEditMode = window.screen.width >= 640;\n  private subView: \"none\" | \"help\" = \"none\";\n\n  private mounted(): void {\n    this.context.state.editMode = this.enableSwitchEditMode;\n    fetch(\"sample-diagram.json\").then(async result => {\n      const json = await result.json();\n      this.context.diagram = Diagram.fromJSON(json);\n      this.diagramFileName = \"sample-diagram.json\";\n    });\n  }\n\n  private onEditButtonClick(): void {\n    this.context.state.editMode = !this.context.state.editMode;\n  }\n\n  private onUndoButtonClick(): void {\n    this.context.history.undo();\n  }\n\n  private onRedoButtonClick(): void {\n    this.context.history.redo();\n  }\n\n  private onVanishButtonClick(): void {\n    if (Object.keys(this.context.diagram.trains).length > 0) {\n      const trains = this.context.diagram.trains;\n      this.context.history.push({\n        this: this,\n        undo: () => { this.context.diagram.trains = trains; },\n        redo: () => { this.context.diagram.trains = {}; }\n      });\n      this.context.diagram.trains = {}; \n    } else {\n      const diagram = this.context.diagram;\n      this.context.history.push({\n        this: this,\n        undo: () => { this.context.diagram = diagram; },\n        redo: () => { this.context.diagram = Diagram.fromJSON({ stations: {}, trains: {} }); }\n      });\n      this.context.diagram = Diagram.fromJSON({ stations: {}, trains: {} }); \n    }\n  }\n\n  private onUploadButtonClick(): void {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json, application/json\";\n    input.onchange = () => {\n      const reader = new FileReader();\n      if (input.files && input.files.length > 0) {\n        const file = input.files[0];\n        reader.readAsText(file);\n        reader.onload = () => {\n          if (typeof(reader.result) == \"string\") {\n            try {\n              const data = JSON.parse(reader.result);\n              this.context.diagram = Diagram.fromJSON(data);\n              this.diagramFileName = file.name;\n              this.context.history.clear();\n            } catch (e) {\n              this.$buefy.notification.open({\n                type: \"is-danger\",\n                message: `${this.$t(\"message.failedToLoadJSON\").toString()}<br>${file.name}`,\n              });\n            }\n          }\n        };\n      }\n    };\n    input.click();\n  }\n\n  private onDownloadButtonClick(): void {\n    const json = JSON.stringify(this.context.diagram);\n    const blob = new Blob([ json ], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = this.diagramFileName;\n    a.click();\n  }\n\n  private onHelpButtonClick(): void {\n    this.subView = this.subView == \"help\" ? \"none\" : \"help\";\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0b443b07&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n    ja: {\n        message: {\n            failedToLoadJSON: \"ファイルの読み込みに失敗しました。\",\n            editButtonTooltip: \"編集モード\",\n            undoButtonTooltip: \"元に戻す\",\n            redoButtonTooltip: \"やり直す\",\n            vanishTrainsButtonTooltip: \"列車をクリア\",\n            vanishStationsButtonTooltip: \"駅をクリア\",\n            uploadButtonTooltip: \"ダイヤファイルを読み込む\",\n            downloadButtonTooltip: \"ダイヤファイルを保存する\",\n            helpButtonTooltip: \"操作方法\",\n            help: {\n                addNewStationTitle: \"駅を追加する\",\n                addNewStationBody: \n                    \"<p>左側の駅名エリアをダブルクリックすると、新しい駅を追加できます。</p>\" +\n                    \"<ul><li>駅名をドラッグすると、駅線の位置を調整できます。\" +\n                    \"<li>駅名をクリックすると、駅名を編集できます。\" +\n                    \"<li>駅右側の<i class='mdi mdi-close'></i>アイコンをクリックすると、駅を削除できます。</ul>\",\n                addNewTrainTitle: \"列車を追加する\",\n                addNewTrainBody:\n                    \"<p>駅線の上でダブルクリックすると、新しい列車を追加できます。駅線を続けてクリックして、停車駅を順に追加できます。</p>\" +\n                    \"<ul><li>列車線の編集を終了するには、もう一度ダブルクリックします。\" +\n                    \"<li>Altキーを押しながらカーソルを動かすと、秒単位で時刻を指定できます。\" +\n                    \"<li>右クリックすると、追加した停車駅を順に削除します。</ul>\",\n                selectTrainTitle: \"列車を選択する\",\n                selectTrainBody:\n                    \"<p>列車線をクリックすると、列車を選択できます。</p>\" +\n                    \"<ul><li>Shiftキーを押しながら別の列車線をクリックすると、複数列車を選択できます。\" +\n                    \"<li>列車を選択した状態でさらにクリックすると、特定の駅または駅間を選択できます。<br>Shiftキーを押しながらクリックすると、複数駅間を選択できます。</ul>\",\n                editTrainTitle: \"列車を編集する\",\n                editTrainBody:\n                    \"<p>列車を選択した状態では、さまざまな方法で列車を編集できます。</p>\" +\n                    \"<ul><li>列車線と駅線の交点をダブルクリックすると、停車駅を追加できます。\" +\n                    \"<li>列車線の始端・終端をダブルクリックすると、列車線を延長できます。\" +\n                    \"<li>Deleteキーを押すと、選択した区間の列車線を削除できます。</ul>\",\n                editTimeTitle: \"着発時刻を変更する\",\n                editTimeBody: \n                    \"<p>列車を選択した状態で列車線をドラッグすると、着発時刻を変更できます。</p>\" +\n                    \"<ul><li>Altキーを押しながらカーソルを動かすと、秒単位で時刻を指定できます。\" +\n                    \"<li>番線線上の列車線をドラッグすると、着発番線を変更できます。\" +\n                    \"<li>Ctrlキーを押しながらドラッグすると、着発時刻を変更する代わりに、<br>列車線をコピーして新しい列車を作成できます。</ul>\",\n                tipsTitle: \"アイコンメニュー\",\n                tipsBody: \n                    \"<ul><li><i class='mdi mdi-undo'></i><i class='mdi mdi-redo'></i>ボタンで、操作の取り消し・やり直しができます。\" +\n                    \"<li><i class='mdi mdi-vanish'></i>ボタンで、列車・駅の一括削除ができます。\" +\n                    \"<li><i class='mdi mdi-upload'></i><i class='mdi mdi-download'></i>ボタンで、データの読み込み・保存ができます。</ul>\",\n                contactTitle: \"不明点・不具合などを見つけたら\",\n                contactBody:\n                    \"<p>不明点・不具合などがありましたら、<a href='https://twitter.com/nosrithe'>@nosrithe</a> までお知らせください。</p>\" +\n                    \"<ul><li>お問い合わせの際は、操作の目的や再現手順を具体的にお伝えください。\" +\n                    \"<li>不具合などの修正は <a href='https://github.com/nosrith/diafreaks/issues'>GitHub プロジェクト</a> で管理しています。<br>既知の不具合についてはこちらをご確認ください。</ul>\"\n            },\n        },\n    },\n};\n","import Vue from \"vue\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\nimport VueI18n from \"vue-i18n\";\nimport VueKonva from \"vue-konva\";\nimport App from \"./App.vue\";\nimport messages from \"./messages\";\n\nVue.config.productionTip = false\nVue.use(Buefy, {\n  defaultNotificationDuration: 5000,\n  defaultNotificationPosition: \"is-bottom-right\",\n});\nVue.use(VueI18n);\nVue.use(VueKonva);\n\nconst i18n = new VueI18n({\n  locale: \"ja\",\n  messages,\n});\n\nnew Vue({\n  render: h => h(App),\n  i18n,\n}).$mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelpView.vue?vue&type=style&index=0&id=ec83cbc6&lang=scss&scoped=true&\""],"sourceRoot":""}